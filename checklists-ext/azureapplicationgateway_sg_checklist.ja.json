{
    "$schema": "https://raw.githubusercontent.com/Azure/review-checklists/main/checklists/checklist.schema.json",
    "categories": [],
    "items": [
        {
            "description": "複数のインスタンスを複数のゾーンに分散すると、ワークロードは 1 つのゾーンでの障害に耐えることができます。使用できないゾーンがある場合、トラフィックは他のゾーンの正常なインスタンスに自動的に移行されるため、アプリケーションの信頼性が維持されます。",
            "guid": "a36e2517-aa81-4e4b-9962-e78144b18ac7",
            "service": "Azure Application Gateway",
            "text": "Application Gateway インスタンスをゾーン対応構成でデプロイします。 ゾーン冗長のリージョン サポートを確認してください (すべてのリージョンでこの機能が提供されているわけではありません)。",
            "type": "recommendation",
            "waf": "確実"
        },
        {
            "description": "正常性プローブは、トラフィックを処理できるバックエンドにのみトラフィックがルーティングされるようにします。Application Gateway は、バックエンド プール内のすべてのサーバーの正常性を監視し、異常と見なされたサーバーへのトラフィックの送信を自動的に停止します。",
            "guid": "9afcdcea-4d65-4d51-9008-297c2c363625",
            "service": "Azure Application Gateway",
            "text": "Application Gateway の正常性プローブを使用して、バックエンドの使用不可を検出します。",
            "type": "recommendation",
            "waf": "確実"
        },
        {
            "description": "レート制限を使用して、再試行ストームなどの問題を回避します。",
            "guid": "7bcec0ab-ea83-427d-ae8c-946bf662ece6",
            "service": "Azure Application Gateway",
            "text": "Azure WAF のレート制限ルールを構成して、クライアントがアプリケーションに大量のトラフィックを送信できないようにします。",
            "type": "recommendation",
            "waf": "確実"
        },
        {
            "description": "Application Gateway サブネット上の UDR は、いくつかの問題を引き起こす可能性があります。バックエンドの正常性、ログ、メトリックを表示できるように、Application Gateway サブネットで UDR を使用しないでください。",
            "guid": "b2881b32-11c9-4bec-94d0-255ec577fdab",
            "service": "Azure Application Gateway",
            "text": "バックエンドの正常性レポートが適切に機能し、正しいログとメトリックを生成するように、Application Gateway で UDR を使用しないでください。 Application Gateway サブネットで UDR を使用する必要がある場合は、「サポートされている UDR」を参照してください。",
            "type": "recommendation",
            "waf": "確実"
        },
        {
            "description": "バックエンドと一致するように IdleTimeout を設定します。この設定により、バックエンドが要求に応答するのに 4 分以上かかる場合でも、Application Gateway とクライアント間の接続が開いたままになります。この設定を構成しない場合、接続は閉じられ、クライアントにはバックエンドの応答が表示されません。",
            "guid": "0719fb38-2436-415b-8db7-3d19a1e57bee",
            "service": "Azure Application Gateway",
            "text": "バックエンド・アプリケーションのリスナーおよびトラフィック特性に一致するように IdleTimeout 設定を構成します。デフォルト値は 4 分です。最大 30 分に設定できます。 詳細については、「ロード バランサーの伝送制御プロトコル (TCP) のリセットとアイドル タイムアウト」を参照してください。",
            "type": "recommendation",
            "waf": "確実"
        },
        {
            "description": "最新の TLS ポリシーを使用して、TLS 1.2 以上の暗号の使用を強制します。TLS ポリシーには、TLS プロトコルのバージョンと暗号スイートの制御、および TLS ハンドシェイクで暗号を使用する順序の制御が含まれます。",
            "guid": "8e0ffc7d-aecb-456f-8a8a-6cbd5743e076",
            "service": "Azure Application Gateway",
            "text": "セキュリティを強化するために TLS ポリシーを設定します。最新の TLS ポリシーバージョンを使用していることを確認してください。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "異なるバックエンドに送信される要求が各バックエンドに対して再認証する必要がないため、パフォーマンスが向上します。ゲートウェイは、要求コンテンツにアクセスし、インテリジェントなルーティング決定を行うことができます。Application Gateway に証明書をインストールするだけで、証明書の管理が簡単になります。",
            "guid": "0534341b-03de-4eb4-9fbb-47806be1958d",
            "service": "Azure Application Gateway",
            "text": "TLS 終了には Application Gateway を使用します。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "このアプローチにより、セキュリティが強化され、役割と責任の分離が容易になり、管理された証明書のサポートが実現し、証明書の更新とローテーションのプロセスが容易になります。",
            "guid": "14551ef6-ea58-410f-bb9b-08a0c10381a8",
            "service": "Azure Application Gateway",
            "text": "Application Gateway を Key Vault と統合して、TLS 証明書を格納します。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "Application Gateway サブネットは NSG をサポートしていますが、いくつかの制限があります。たとえば、特定のポート範囲との一部の通信は禁止されています。これらの制限の影響を理解していることを確認してください。",
            "guid": "6febf0db-32d2-4e89-a3fd-debec3a426dd",
            "service": "Azure Application Gateway",
            "text": "Application Gateway のすべての NSG 制限に準拠します。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "停止した Application Gateway インスタンスにはコストは発生しません。継続的に実行される Application Gateway インスタンスでは、不要なコストが発生する可能性があります。使用パターンを評価し、不要な場合はインスタンスを停止します。たとえば、開発/テスト環境では、営業時間後の使用量が少なくなることが予想されます。",
            "guid": "147308ab-aa3c-4724-b314-5820ebe6a0ee",
            "service": "Azure Application Gateway",
            "text": "Application Gateway インスタンスは、使用されていないときに停止します。詳細については、「Stop-AzApplicationGateway」と「Start-AzApplicationGateway」を参照してください。",
            "type": "recommendation",
            "waf": "費用"
        },
        {
            "description": "これらのメトリクスを使用して、プロビジョニングされたインスタンス数が受信トラフィックの量と一致するかどうかを検証し、割り当てられたリソースを完全に活用していることを確認します。",
            "guid": "1946aefd-0576-40b2-a8ed-58265dc9dcf0",
            "service": "Azure Application Gateway",
            "text": "主要なコスト ドライバーである Application Gateway のメトリックを監視します: - 請求される容量ユニットの見積もり。 - 固定請求可能な容量ユニット。- 現在の容量ユニット。 帯域幅のコストを考慮してください。",
            "type": "recommendation",
            "waf": "費用"
        },
        {
            "description": "メトリックがしきい値を超えたときにアラートを設定して、使用量が増加したときに把握できるようにします。このアプローチにより、ワークロードに必要な変更を実装するのに十分な時間を確保し、パフォーマンスの低下や停止を防ぐことができます。",
            "guid": "aa1eacb3-ef9f-4e69-bc98-784ec67d1192",
            "service": "Azure Application Gateway",
            "text": "CPU 使用率やコンピューティング ユニットの使用量などの容量メトリックが推奨されるしきい値を超えたときにチームに通知するアラートを構成します。 容量メトリックに基づいてアラートの包括的なセットを構成するには、「Application Gateway の高トラフィックのサポート」を参照してください。",
            "type": "recommendation",
            "waf": "オペレーションズ"
        },
        {
            "description": "アラートを使用すると、チームが問題にタイムリーに対応し、トラブルシューティングを容易に行うことができます。",
            "guid": "91992f80-fca7-48ad-85bc-3bad00352475",
            "service": "Azure Application Gateway",
            "text": "アラートを構成して、Application Gateway またはバックエンドの問題を示すメトリックについてチームに通知します。- 異常なホスト数 - 応答状態 (4xx エラーや 5xx エラーなど) - バックエンド応答状態 (4xx エラーや 5xx エラーなど) - バックエンドの最終バイト応答時間 - Application Gateway の合計時間詳細については、「Application Gateway のメトリック」を参照してください。",
            "type": "recommendation",
            "waf": "オペレーションズ"
        },
        {
            "description": "ログを使用して、Application Gateway インスタンスとワークロードの問題を検出、調査、トラブルシューティングします。",
            "guid": "59ddc80c-f93b-488b-814d-270a4ad7786d",
            "service": "Azure Application Gateway",
            "text": "Application Gateway と WAF で診断ログを有効にして、ファイアウォール ログ、パフォーマンス ログ、アクセス ログを収集します。",
            "type": "recommendation",
            "waf": "オペレーションズ"
        },
        {
            "description": "Advisor アラートを使用して、常に最新の情報を入手し、問題を迅速に修正します。コントロールプレーンまたはデータプレーン関連の問題を防止します。 Application Gateway は、リンクされた Key Vault インスタンス内の更新された証明書のバージョンを 4 時間ごとに確認します。Key Vault の構成が正しくないために証明書のバージョンにアクセスできない場合は、そのエラーをログに記録し、対応する Advisor の推奨事項をプッシュします。",
            "guid": "88daf0df-5324-450c-ae59-e8d3f12f697a",
            "service": "Azure Application Gateway",
            "text": "Advisor を使用して、Key Vault の構成の問題を監視します。Application Gateway の Azure Key Vault の問題を解決するという推奨事項を受け取ったときにチームに通知するアラートを設定します。",
            "type": "recommendation",
            "waf": "オペレーションズ"
        },
        {
            "description": "Application Gateway v2 の場合、自動スケールは、追加のインスタンス セットがトラフィックを処理する準備が整うまでに約 6 分から 7 分かかります。その間、Application Gateway のトラフィックの急増が短い場合は、一時的な待機時間またはトラフィックの損失が予想されます。",
            "guid": "1c9a7b2a-0e95-4416-8af5-4d173c48870e",
            "service": "Azure Application Gateway",
            "text": "最小インスタンス数は、推定インスタンス数、実際の Application Gateway 自動スケールの傾向、およびアプリケーション パターンに基づいて最適なレベルに設定します。 過去 1 か月の現在のコンピューティング ユニットを確認します。このメトリクスは、ゲートウェイの CPU 使用率を表します。最小インスタンス数を定義するには、ピーク使用量を 10 で割ります。たとえば、過去 1 か月の現在の平均コンピューティング ユニットが 50 の場合は、最小インスタンス数を 5 に設定します。",
            "type": "recommendation",
            "waf": "パフォーマンス"
        },
        {
            "description": "Application Gateway は、アプリケーションへのトラフィックの増加を処理するために、必要に応じてスケールアウトできます。この設定では、消費された容量に対してのみ支払うため、コストは増加しません。",
            "guid": "2b1242f0-cf07-48fa-8567-63a11efd6d13",
            "service": "Azure Application Gateway",
            "text": "自動スケーリング インスタンスの最大数を、可能な最大数 (125 インスタンス) に設定します。Application Gateway 専用サブネットに、増加したインスタンスのセットをサポートするのに十分な使用可能な IP アドレスがあることを確認します。",
            "type": "recommendation",
            "waf": "パフォーマンス"
        },
        {
            "description": "/24 サブネットを使用して、Application Gateway v2 のデプロイに必要なすべての IP アドレスをサポートします。 Application Gateway では、インスタンスごとに 1 つのプライベート IP アドレスが使用され、プライベート フロントエンド IP を構成する場合は別のプライベート IP アドレスが使用されます。Standard_v2 SKU または WAF_v2 SKU は、最大 125 個のインスタンスをサポートできます。Azure では、内部使用のために各サブネットに 5 つの IP アドレスが予約されています。",
            "guid": "bd29ba93-56b6-43cc-9546-8aace18d45e5",
            "service": "Azure Application Gateway",
            "text": "Application Gateway 専用サブネットのサイズを適切に設定します。Application Gateway v2 のデプロイには /24 サブネットを使用することを強くお勧めします。 同じサブネットに他の Application Gateway リソースをデプロイする場合は、最大インスタンス数に必要な追加の IP アドレスを検討してください。 サブネットのサイズ設定に関するその他の考慮事項については、「Application Gateway インフラストラクチャの構成」を参照してください。",
            "type": "recommendation",
            "waf": "パフォーマンス"
        }
    ],
    "metadata": {
        "name": "Azure Application Gateway Service Guide",
        "state": "preview",
        "timestamp": "October 21, 2024",
        "waf": "all"
    },
    "status": [
        {
            "description": "このチェックはまだ見ていません",
            "name": "未確認"
        },
        {
            "description": "このチェックにはアクションアイテムが関連付けられています",
            "name": "開ける"
        },
        {
            "description": "このチェックは検証済みであり、これ以上のアクション アイテムは関連付けられていません",
            "name": "達成"
        },
        {
            "description": "現在のデザインには適用されません",
            "name": "該当なし"
        },
        {
            "description": "必須ではありません",
            "name": "必須ではありません"
        }
    ],
    "waf": [
        {
            "name": "確実"
        },
        {
            "name": "費用"
        },
        {
            "name": "オペレーションズ"
        },
        {
            "name": "安全"
        },
        {
            "name": "パフォーマンス"
        },
        {
            "name": "確実"
        },
        {
            "name": "オペレーションズ"
        },
        {
            "name": "安全"
        },
        {
            "name": "パフォーマンス"
        },
        {
            "name": "費用"
        }
    ],
    "yesno": [
        {
            "name": "はい"
        },
        {
            "name": "いいえ"
        }
    ]
}