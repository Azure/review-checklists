{
    "categories": [
        {
            "name": "Operações"
        },
        {
            "name": "Armazenamento"
        },
        {
            "name": "Rede"
        },
        {
            "name": "Windows"
        },
        {
            "name": "Aplicação"
        },
        {
            "name": "Cluster_Security"
        },
        {
            "name": "Recipiente"
        },
        {
            "name": "Resource_Management"
        },
        {
            "name": "Identidade"
        },
        {
            "name": "Bc_Dr"
        },
        {
            "name": "Cluster_Multi"
        }
    ],
    "items": [
        {
            "category": "Aplicação",
            "description": "Muitos aplicativos em execução por longos períodos de tempo eventualmente fazem a transição para estados interrompidos e não podem se recuperar, exceto sendo reiniciados. O Kubernetes fornece sondas de vivacidade para detectar e remediar essas situações. A sonda está aqui para dizer ao Kubernetes para reiniciar seu pod quando ele não estiver mais respondendo",
            "documentation": [
                {
                    "title": "Configure Liveness, Readiness and Startup Probes",
                    "url": "https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/"
                }
            ],
            "guid": "2e9ed573-38b2-4856-a7f9-676d9ab604e1",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Implement a proper Liveness probe"
        },
        {
            "category": "Aplicação",
            "description": "Proteja contêineres de partida lenta com sondas de inicialização. A sonda de inicialização permite atrasar a verificação inicial por vivacidade, o que pode causar impasse ou resultado incorreto",
            "documentation": [
                {
                    "title": "Configure Liveness, Readiness and Startup Probes",
                    "url": "https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/"
                }
            ],
            "guid": "a066989c-9dce-4712-bce3-4eef36f8c0c2",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Implement a proper Startup probe"
        },
        {
            "category": "Aplicação",
            "description": "Às vezes, os aplicativos ficam temporariamente incapazes de atender ao tráfego. Por exemplo, um aplicativo pode precisar carregar dados grandes ou arquivos de configuração durante a inicialização ou depender de serviços externos após a inicialização. Nesses casos, você não deseja encerrar o aplicativo, mas também não deseja enviar solicitações. O Kubernetes fornece sondas de prontidão para detectar e mitigar essas situações. Um pod com contêineres relatando que não estão prontos não recebe tráfego por meio dos Serviços do Kubernetes.",
            "documentation": [
                {
                    "title": "Configure Liveness, Readiness and Startup Probes",
                    "url": "https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/"
                }
            ],
            "guid": "de1b6b38-4fa9-4f6e-ab92-d824346dd20c",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Implement a proper Readiness probe"
        },
        {
            "category": "Aplicação",
            "description": "Esse gancho é chamado imediatamente antes de um contêiner ser encerrado devido a uma solicitação de API ou evento de gerenciamento, como falha de sonda de atividade, preempção, contenção de recursos e outros. Ele pode ser usado quando você tem um processo crítico que deseja concluir ou salvar quando seu pod é destruído por qualquer motivo",
            "documentation": [
                {
                    "title": "Container Lifecycle Hooks",
                    "url": "https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/"
                }
            ],
            "guid": "dc4828a3-fc4f-4ac5-8844-122b8482dbb1",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Implement a proper prestop hook"
        },
        {
            "category": "Aplicação",
            "description": "Certifique-se de que seu aplicativo sempre configure réplicas adequadas para garantir a resiliência no caso de um pod falhar ou ser removido.",
            "documentation": [
                {
                    "title": "Pod replicas",
                    "url": "https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/"
                }
            ],
            "guid": "4f1f88f9-98a3-48f5-a37f-4d9c9aecbb11",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Run more than one replica for your Deployment"
        },
        {
            "category": "Aplicação",
            "description": "Certifique-se de que seus componentes estejam marcados, podem ser marcas comerciais, de segurança ou técnicas e essas marcas ajudarão a avaliar ou aplicar políticas relevantes.",
            "documentation": [
                {
                    "title": "Recommended Labels",
                    "url": "https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels/"
                }
            ],
            "guid": "7b613b26-df38-49a8-94bf-c5301a91d558",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Apply tags/labels to all resources"
        },
        {
            "category": "Aplicação",
            "description": "Dimensione automaticamente seu aplicativo para o número de pods necessários para lidar com a carga atual. Isso pode ser feito usando o Horizontal Pod Autoscaler para CPU e Memória ou usando o KEDA para dimensionamento com base em outras fontes",
            "documentation": [
                {
                    "title": "Horizontal Pod Autoscaler",
                    "url": "https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/"
                }
            ],
            "guid": "faa19bfe-9d55-4d04-a3c4-919ca1b2d121",
            "optionalFields": {
                "score": {
                    "scale": 1,
                    "simple": -1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null
            ],
            "title": "Implement autoscaling of your applications (Horizontal pod autoscaler, KEDA)",
            "tools": [
                {
                    "title": "Kubernetes Event-driven Autoscaling (KEDA)",
                    "url": "https://keda.sh/"
                },
                {
                    "title": "KEDA as AKS addon",
                    "url": "https://docs.microsoft.com/azure/aks/keda-about"
                }
            ],
            "waf": "Desempenho"
        },
        {
            "category": "Aplicação",
            "description": "Os segredos não são criptografados no etcd, prefira armazenar seus segredos em um HSM adequado, como o Azure Key Vault. Em seguida, você pode injetar segredos usando o provedor CSI.",
            "documentation": [
                {
                    "title": "Azure Key Vault Provider for Secret Store CSI Driver",
                    "url": "https://github.com/Azure/secrets-store-csi-driver-provider-azure"
                },
                {
                    "title": "AKV2K8S",
                    "url": "https://akv2k8s.io/"
                }
            ],
            "guid": "5e3df584-eccc-4d97-a3b6-bcda3b50eb2e",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Segredos",
            "tags": [
                null,
                null
            ],
            "title": "Store your secrets in Azure Key Vault, don't inject passwords in Docker Images",
            "waf": "Segurança"
        },
        {
            "category": "Aplicação",
            "description": "Não use credenciais fixas em pods ou imagens de contêiner, pois elas correm o risco de exposição ou abuso. Em vez disso, use a federação de identidade de carga de trabalho para acessar recursos protegidos do Azure Active Directory (Azure AD) sem precisar gerenciar segredos ",
            "detail": "When pods need access to other Azure services, such as Cosmos DB, Key Vault, or Blob Storage, the pod needs access credentials. These access credentials could be defined with the container image or injected as a Kubernetes secret, but need to be manually created and assigned. Often, the credentials are reused across pods, and aren't regularly rotated. Managed identities for Azure resources (currently implemented as an associated AKS open source project) let you automatically request access to services through Azure AD. You don't manually define credentials for pods, instead they request an access token in real time, and can use it to access only their assigned services.",
            "documentation": [
                {
                    "title": "Use Azure Workload Identity",
                    "url": "https://learn.microsoft.com/azure/aks/workload-identity-overview"
                },
                {
                    "title": "Azure Active Directory Pod Identity (deprecated)",
                    "url": "https://docs.microsoft.com/azure/aks/use-azure-ad-pod-identity"
                }
            ],
            "guid": "d2e0d5d7-71d4-41e3-910c-c57b4a4b1410",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Implement Azure Workload Identity",
            "waf": "Segurança"
        },
        {
            "category": "Aplicação",
            "description": "Os namespaces oferecem a capacidade de criar partições lógicas e impor a separação de seus recursos, bem como limitar o escopo das permissões do usuário. Não se esqueça de não usar o namespace Default",
            "documentation": [
                {
                    "title": "Namespaces",
                    "url": "https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/"
                }
            ],
            "guid": "0b56d03c-5fc8-42b1-943b-9e4b4d0f3de8",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Use Kubernetes namespaces to properly isolate your Kubernetes resources"
        },
        {
            "category": "Aplicação",
            "description": "Quando os contêineres têm solicitações de recursos especificadas, o agendador pode tomar melhores decisões sobre em quais nós colocar os pods. E quando os contêineres têm seus limites especificados, a contenção de recursos em um nó pode ser tratada de uma maneira especificada.",
            "documentation": [
                {
                    "title": "Managing Compute Resources for Containers",
                    "url": "https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/"
                },
                {
                    "title": "Take benefit of the Quality of Service",
                    "url": "https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/"
                }
            ],
            "guid": "b54eb2eb-03dd-4aa3-9927-18e2edb11726",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Recursos",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Set up requests and limits on your containers",
            "waf": "Operações"
        },
        {
            "category": "Aplicação",
            "description": "Um contexto de segurança define configurações de privilégio e controle de acesso para um Pod ou Contêiner. Controle os recursos e os direitos que seu contêiner pode ter. Se você não especificar o contexto de segurança, o pod obterá o 'padrão', que pode ter mais direitos do que deveria",
            "detail": "You should also disable mounting credentials by default (automountServiceAccountToken)",
            "documentation": [
                {
                    "title": "Configure a Security Context for a Pod or Container",
                    "url": "https://kubernetes.io/docs/tasks/configure-pod-container/security-context/"
                }
            ],
            "guid": "20861805-be15-48f5-b40b-5ae203ddbb67",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Specify the security context of your pod/container"
        },
        {
            "category": "Aplicação",
            "description": "As práticas recomendadas dentro do cluster começam com a configuração de seus manifestos. Garantir que eles respeitem as boas práticas",
            "documentation": [
                {
                    "title": "Kubernetes YAML: Enforcing best practices and security policies",
                    "url": "https://thechief.io/c/editorial/kubernetes-yaml-enforcing-best-practices-and-security-policies-cicd-and-gitops-pipelines/"
                },
                {
                    "title": "13 Best Practices for Using Helm",
                    "url": "https://betterprogramming.pub/13-best-practices-for-using-helm-f4fc68545a2c"
                }
            ],
            "guid": "5388e9de-d167-4dd1-a2b0-ac241b999a64",
            "optionalFields": {
                "score": {
                    "simple": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Ensure your manifests respect good practices",
            "tools": [
                {
                    "title": "kube-score",
                    "url": "https://kube-score.com/"
                },
                {
                    "title": "Checkov",
                    "url": "https://www.checkov.io/"
                },
                {
                    "title": "kubelinter",
                    "url": "https://github.com/stackrox/kube-linter"
                }
            ]
        },
        {
            "category": "Aplicação",
            "description": "Defina uma linha de base de segurança de build de imagem para seus desenvolvedores seguirem. Você também deve usar ferramentas de verificação para detectar o problema do Dockerfile",
            "documentation": [
                {
                    "title": "SNYK 10 Docker Image Security Best Practices",
                    "url": "https://snyk.io/blog/10-docker-image-security-best-practices/"
                },
                {
                    "title": "21 Best Practises in 2021 for Dockerfile",
                    "url": "https://dev.to/chrisedrego/21-best-practise-in-2021-for-dockerfile-1dji"
                }
            ],
            "guid": "b5222fdc-72b7-4b5f-baae-ab48a69b1d36",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Conduct Dockerfile scanning to ensure Docker Image Security Best Practices",
            "tools": [
                {
                    "title": "Dockle",
                    "url": "https://github.com/goodwithtech/dockle"
                },
                {
                    "title": "Hadolint",
                    "url": "https://github.com/hadolint/hadolint"
                }
            ]
        },
        {
            "category": "Aplicação",
            "description": "Introdução de DevSecOps no ambiente para promover um modelo de segurança proativo que começa a transferir a responsabilidade para a esquerda",
            "documentation": [
                {
                    "title": "Introduction to Microsoft Defender for container registries",
                    "url": "https://docs.microsoft.com/azure/defender-for-cloud/defender-for-containers-introduction"
                },
                {
                    "title": "Palo Alto CI/CD Integration (twistcli)",
                    "url": "https://docs.paloaltonetworks.com/prisma/prisma-cloud/prisma-cloud-admin-compute/tools/twistcli_scan_images"
                },
                {
                    "title": "Qualys CI/CD Integration",
                    "url": "https://qualysguard.qg2.apps.qualys.com/cs/help/vuln_scans/docker_images.htm"
                },
                {
                    "title": "Clair CI/CD Integration",
                    "url": "https://github.com/quay/clair"
                }
            ],
            "guid": "54cbc938-394e-480a-823a-51c2bcd3c66b",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Static Analysis of Docker Images on Build"
        },
        {
            "category": "Aplicação",
            "description": "Restrinja builds com problemas identificados.",
            "detail": "Use a tool that allows for the restriction of builds with enough granularity to not break development.  All Critical CVE's are not the same, so being able to restrict builds based on Critical or High vulnerabilities with a Vendor fix, but allowing builds to continue if that Critical vulnerability is 'Open'",
            "documentation": [
                {
                    "title": "Prisma Threshold enforcement",
                    "url": "https://docs.paloaltonetworks.com/prisma/prisma-cloud/prisma-cloud-admin-compute/vulnerability_management/vuln_management_rules.html"
                }
            ],
            "guid": "1a67a172-c4ca-4383-8934-a71277cb927e",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Threshold enforcement of Docker Image Builds that contain vulnerabilities"
        },
        {
            "category": "Aplicação",
            "description": "Ser capaz de avaliar e restringir o estado de conformidade de uma imagem na compilação.",
            "detail": "Identifying an image running as 'root' before it get deployed, or opening up port 80 or 22",
            "documentation": [
                {
                    "title": "Azure Built-In Policy",
                    "url": "https://docs.microsoft.com/azure/aks/policy-samples"
                },
                {
                    "title": "Prisma Managing Compliance",
                    "url": "https://docs.paloaltonetworks.com/prisma/prisma-cloud/prisma-cloud-admin-compute/compliance/manage_compliance.html"
                }
            ],
            "guid": "01ede997-e0bf-454a-bd1f-114be06a9874",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Compliance enforcement of Docker Image Builds"
        },
        {
            "category": "Aplicação",
            "description": "A ferramenta de conteinerização de aplicativos oferece uma abordagem de apontar e conteinerizar para reempacotar aplicativos como contêineres com alterações mínimas ou nenhuma alteração de código usando o estado de execução do aplicativo. Atualmente, a ferramenta oferece suporte à conteinerização de aplicativos ASP.NET e aplicativos da Web Java em execução no Apache Tomcat.",
            "documentation": [
                {
                    "title": "Accelerate application modernization with Azure Migrate: App Containerization",
                    "url": "https://aka.ms/AppContainerizationtoAKS"
                }
            ],
            "guid": "c1c05f94-4b74-4231-9d36-aa7a56fb775e",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Use Azure Migrate to quick containerize your applications"
        },
        {
            "category": "Aplicação",
            "description": "Há uma variedade de técnicas para implantar novos aplicativos na produção, portanto, escolher a estratégia certa é uma decisão importante que precisa ser tomada para aproveitar o impacto da mudança no consumidor.",
            "documentation": [
                {
                    "title": "Kubernetes Deployment Strategies",
                    "url": "https://blog.container-solutions.com/deployment-strategies"
                }
            ],
            "guid": "3abc7c0e-44c7-40fc-afce-aa4ddbf3dd81",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Apply the right deployment type to your application"
        },
        {
            "category": "Aplicação",
            "description": "Pods nus são pods não vinculados a um Replicaset ou a uma Implantação. Os Pods nus não serão reagendados em caso de falha de um nó.",
            "details": "If imagePullPolicy is omitted and either the image tag is :latest or it is omitted: imagePullPolicy is automatically set to Always. Prefer to set explicitly IfNotPresent",
            "guid": "980e9f76-e20a-426a-9c01-cbae1b63c5e8",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Don't use naked pods"
        },
        {
            "category": "Aplicação",
            "description": "Se esse atributo não for definido corretamente, o Kubernetes fará o download da imagem do contêiner para cada nova instância dos contêineres.",
            "documentation": [
                {
                    "title": "Updating images",
                    "url": "https://kubernetes.io/docs/concepts/containers/images/#updating-images"
                }
            ],
            "guid": "d457598a-047b-4fd7-88e5-9c61dea67f6a",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Control the usage of imagePullPolicy"
        },
        {
            "category": "Aplicação",
            "description": "Se esse atributo não for definido corretamente, o Kubernetes fará o download da imagem do contêiner para cada nova instância dos contêineres.",
            "documentation": [
                {
                    "title": "Create a Kubernetes cluster with Azure Kubernetes Service using Terraform",
                    "url": "https://docs.microsoft.com/azure/developer/terraform/create-k8s-cluster-with-tf-and-aks"
                }
            ],
            "guid": "3acbe04b-be20-49d3-afda-47778424d116",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Infraestrutura como código",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use automation through ARM/TF to create your Azure resources",
            "waf": "Operações"
        },
        {
            "category": "Aplicação",
            "description": "Isso ajudará a garantir que suas cargas de trabalho permaneçam online durante as atualizações de cluster.",
            "documentation": [
                {
                    "title": "Blue-green deployment for AKS",
                    "url": "https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/containers/blue-green-deployment-for-aks/blue-green-deployment-for-aks"
                }
            ],
            "guid": "785c2fa5-5b56-4ad4-a408-fe72734c476b",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Desenvolvimento",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use canary or blue/green deployments",
            "waf": "Operações"
        },
        {
            "category": "Aplicação",
            "description": "Isso ajudará a garantir que suas cargas de trabalho permaneçam online durante as atualizações de cluster.",
            "documentation": [
                {
                    "title": "Dapr project page",
                    "url": "https://dapr.io/"
                }
            ],
            "guid": "26886d20-b66c-457b-a591-19bf8e8f5c58",
            "optionalFields": {
                "score": {
                    "simple": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Desenvolvimento",
            "tags": [
                null,
                null
            ],
            "title": "Use Dapr to ease microservice development",
            "waf": "Operações"
        },
        {
            "category": "Bc_Dr",
            "description": "Antes de ir para a produção, é muito importante decidir a meta de disponibilidade e tempo de recuperação que você está procurando. Isso ajudará você a decidir a estratégia de backup correta, mas também a arquitetura de sua solução.",
            "documentation": [
                {
                    "title": "Define the BCDR strategy",
                    "url": "https://learn.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/business-continuity-and-disaster-recovery"
                }
            ],
            "guid": "bc14aea6-e65d-48d9-a3ad-c218e6436b06",
            "optionalFields": {
                "score": {
                    "ha": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Requisitos",
            "tags": [
                null,
                null
            ],
            "title": "Define non-functional requirements such as SLAs, RTO (Recovery Time Objective) and RPO (Recovery Point Objective)",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Uma implantação de espaço em branco (greenfield) é o exercício de excluir tudo e reimplantar toda a plataforma de forma automatizada.",
            "detail": "In case of an emergency, a security flaw or datacenter failure, it's mandatory for you to be able to restore/create a new environment properly configured in a fully automated way",
            "documentation": [
                {
                    "title": "Schedule and perform DR tests regularly",
                    "url": "https://docs.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/business-continuity-and-disaster-recovery"
                }
            ],
            "guid": "36cb45e5-7960-4332-9bdf-8cc23318da61",
            "optionalFields": {
                "score": {
                    "ha": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Recuperação de desastres",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Schedule and perform DR tests regularly (whitespace deplyment)",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Um cluster do AKS (Serviço de Kubernetes do Azure) distribui recursos como os nós e o armazenamento entre seções lógicas da infraestrutura de computação subjacente do Azure. Esse modelo de implantação garante que os nós sejam executados em domínios separados de atualização e falha em um único datacenter do Azure.",
            "documentation": [
                {
                    "title": "Create an AKS cluster across availability zones",
                    "url": "https://docs.microsoft.com/azure/aks/availability-zones"
                }
            ],
            "graph": "resources | where type=='microsoft.containerservice/managedclusters' | extend compliant= isnotnull(properties.agentPoolProfiles[0].availabilityZones) | distinct id,compliant",
            "guid": "578a219a-46be-4b54-9350-24922634292b",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant= isnotnull(zones) | distinct id,compliant",
                    "ha": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Alta disponibilidade",
            "tags": [
                null,
                null
            ],
            "title": "Use Availability Zones if supported in your Azure region",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Ao implantar vários clusters do AKS, escolha regiões em que o AKS está disponível e use regiões emparelhadas.",
            "documentation": [
                {
                    "title": "Plan for multiregion deployment",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-multi-region#plan-for-multiregion-deployment"
                }
            ],
            "guid": "4e907690-4780-492f-9632-03bcc80b7a80",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Plan for multiregion deployment",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "O Gerenciador de Tráfego do Azure pode direcionar os clientes para o cluster do AKS e a instância do aplicativo mais próximos. Para obter o melhor desempenho e redundância, direcione todo o tráfego do aplicativo por meio do Gerenciador de Tráfego antes que ele vá para o cluster do AKS.",
            "documentation": [
                {
                    "title": "Traffic Manager and AKS",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-multi-region#use-azure-traffic-manager-to-route-traffic"
                },
                {
                    "title": "Cross-region load balancer",
                    "url": "https://learn.microsoft.com/en-us/azure/load-balancer/cross-region-overview"
                }
            ],
            "guid": "170265f4-bb46-4a39-9af7-f317284797b1",
            "optionalFields": {
                "score": {
                    "ha": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Alta disponibilidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Azure Traffic Manager or Azure Front Door as a global load balancer for region failover",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Seus aplicativos podem usar o Armazenamento do Azure para seus dados. Como seus aplicativos estão distribuídos em vários clusters do AKS em regiões diferentes, você precisa manter o armazenamento sincronizado",
            "documentation": [
                {
                    "title": "Create a storage migration plan",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-multi-region#create-a-storage-migration-plan"
                },
                {
                    "title": "Backup, restore and migrate Kubernetes resources including state to another AKS cluster with Velero",
                    "url": "https://pumpingco.de/blog/backup-and-restore-a-kubernetes-cluster-with-state-using-velero/"
                }
            ],
            "guid": "8c6703c5-42e9-46ef-93f1-7f6232af25fc",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Create a storage migration plan",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "A camada padrão (anteriormente SLA de tempo de atividade) é um recurso opcional para habilitar um SLA mais alto com suporte financeiro para um cluster. Ele fornece um SLA de 99,95% em vez do SLO de 99,5% e é relevante para seus clusters de produção (e grandes)",
            "detail": "Customers needing an SLA to meet compliance requirements or require extending an SLA to their end users should enable this feature. Customers with critical workloads that will benefit from a higher uptime SLA may also benefit. Using the Uptime SLA feature with Availability Zones enables a higher availability for the uptime of the Kubernetes API server.",
            "documentation": [
                {
                    "title": "Azure Kubernetes Service (AKS) Uptime SLA",
                    "url": "https://learn.microsoft.com/en-gb/azure/aks/free-standard-pricing-tiers"
                },
                {
                    "title": "Business continuity / disaster recovery to protect and recover AKS",
                    "url": "https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/app-platform/aks/management#business-continuity--disaster-recovery-to-protect-and-recover-aks"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (sku.tier=='Paid') | distinct id,compliant",
            "guid": "71d41e36-10cc-457b-9a4b-1410d4395898",
            "optionalFields": {
                "score": {
                    "cost": -2,
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (sku.tier=='Paid') | distinct id,compliant",
                    "ha": 2
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Alta disponibilidade",
            "tags": [
                null,
                null
            ],
            "title": "Use the standard-tier AKS offering",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Mesmo que você execute várias cópias de seus Pods, não há garantias de que a perda de um nó não derrubará seu serviço.",
            "detail": "Customers needing an SLA to meet compliance requirements or require extending an SLA to their end users should enable this feature. Customers with critical workloads that will benefit from a higher uptime SLA may also benefit. Using the Uptime SLA feature with Availability Zones enables a higher availability for the uptime of the Kubernetes API server.",
            "documentation": [
                {
                    "title": "Inter-pod affinity and anti-affinity",
                    "url": "https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity"
                }
            ],
            "guid": "1eea4888-8c2a-40b2-a40b-cacdc5f55497",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Avoid Pods being placed into a single node",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "As empresas que desejam uma presença local ou um backup dinâmico optam por executar serviços de várias regiões do Azure.",
            "detail": "As a best practice, placing a container registry in each region where images are run allows network-close operations, enabling fast, reliable image layer transfers. Geo-replication enables an Azure container registry to function as a single registry, serving multiple regions with multi-master regional registries.",
            "documentation": [
                {
                    "title": "Enable geo-replication for container images",
                    "url": "https://docs.microsoft.com/azure/container-registry/container-registry-geo-replication"
                }
            ],
            "guid": "b0803aed-1ca6-4330-816c-92677c6e9935",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "If using a private registry (ACR), configure region replication to store images in multiple regions",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Use as zonas de disponibilidade do Azure para criar um registro de contêiner do Azure resiliente e de alta disponibilidade em uma região do Azure.",
            "documentation": [
                {
                    "title": "Enable zone redundancy in Azure Container Registry for resiliency and high availability",
                    "url": "https://review.learn.microsoft.com/en-us/azure/container-registry/zone-redundancy"
                }
            ],
            "guid": "a4cefd60-f24f-4907-9723-b927300b4c42",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Configure your registry to use zone reduncancy",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Como os registros de contêiner são recursos usados em vários hosts de contêiner, um registro deve residir em seu próprio grupo de recursos.",
            "detail": "Although you might experiment with a specific host type, such as Azure Container Instances, you’ll likely want to delete the container instance when you’re done. However, you might also want to keep the collection of images you pushed to Azure Container Registry. By placing your registry in its own resource group, you minimize the risk of accidentally deleting the collection of images in the registry when you delete the container instance resource group.",
            "documentation": [
                {
                    "title": "Registry best practices - Use dedicated resource group",
                    "url": "https://learn.microsoft.com/en-us/azure/container-registry/container-registry-best-practices#dedicated-resource-group"
                }
            ],
            "guid": "7b0bb400-deb6-4914-82da-2e914c9aaa72",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null
            ],
            "title": "Move Container Registry to a dedicated resource group ",
            "waf": "Resiliência"
        },
        {
            "category": "Bc_Dr",
            "description": "Depois de habilitar a política de exclusão reversível, o ACR gerencia os artefatos excluídos como os artefatos excluídos temporariamente com um período de retenção definido. Assim, você tem a capacidade de listar, filtrar e restaurar os artefatos excluídos de forma reversível. Depois que o período de retenção for concluído, todos os artefatos excluídos de forma reversível serão limpos automaticamente.",
            "documentation": [
                {
                    "title": "Enable soft delete policy",
                    "url": "https://learn.microsoft.com/en-us/azure/container-registry/container-registry-soft-delete-policy"
                }
            ],
            "guid": "49919955-fd6c-40f5-9c5c-5a7273c7a935",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null
            ],
            "title": "Enable soft delete policy",
            "waf": "Resiliência"
        },
        {
            "category": "Cluster_Multi",
            "description": "Use o isolamento lógico para separar equipes e projetos. Tente minimizar o número de clusters físicos do AKS implantados para isolar equipes ou aplicativos",
            "documentation": [
                {
                    "title": "Isolating cluster",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-cluster-isolation#logically-isolate-clusters"
                }
            ],
            "guid": "49be78dc-6ff0-4b2c-94ef-e74002e18866",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Logically isolate cluster"
        },
        {
            "category": "Cluster_Multi",
            "description": "Minimize o uso de isolamento físico para cada equipe separada ou implantação de aplicativo",
            "documentation": [
                {
                    "title": "Isolating cluster",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-cluster-isolation#physically-isolate-clusters"
                }
            ],
            "guid": "3b77c0ee-3f84-4a86-bb46-c6dc3070168c",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null
            ],
            "title": "Physically isolate cluster"
        },
        {
            "category": "Cluster_Multi",
            "description": "Com o AKS (Serviço de Kubernetes do Azure), você pode definir marcas do Azure em um cluster do AKS e seus recursos relacionados usando o Azure Resource Manager, por meio da CLI do Azure.",
            "documentation": [
                {
                    "title": "Use Azure tags in Azure Kubernetes Service ",
                    "url": "https://learn.microsoft.com/en-us/Azure/aks/use-tags"
                },
                {
                    "title": "Use Azure tags in Azure Kubernetes Service (AKS)",
                    "url": "https://techcommunity.microsoft.com/t5/fasttrack-for-azure/use-azure-tags-in-azure-kubernetes-service-aks/ba-p/3611583"
                }
            ],
            "guid": "574bd2fe-f58b-4199-b334-f7eff3ef90c8",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Azure tags in Azure Kubernetes Service (AKS)"
        },
        {
            "category": "Cluster_Security",
            "description": "O sistema operacional otimizado para contêiner do Mariner é um sistema operacional primário desenvolvido especificamente para o AKS (Serviço de Kubernetes do Azure). Ele foi projetado para otimizar a execução de cargas de trabalho do Kubernetes, oferecendo um ambiente seguro, leve e de alto desempenho. ",
            "documentation": [
                {
                    "title": "Use the Mariner container host on Azure Kubernetes Service",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/use-mariner"
                }
            ],
            "guid": "d34f49c0-e964-4465-9211-520479338b13",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Mariner COS as host OS",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Alguns setores exigem kubernetes certificados ou para implementar configurações específicas. O AKS oferece vários recursos para atender a esses requisitos",
            "documentation": [
                {
                    "title": "Use FIPS-enabled node pool",
                    "url": "https://docs.microsoft.com/azure/aks/use-multiple-node-pools#add-a-fips-enabled-node-pool"
                },
                {
                    "title": "AKS CIS benchmark",
                    "url": "https://docs.microsoft.com/compliance/regulatory/offering-CIS-Benchmark"
                },
                {
                    "title": "AKS architecture reference for PCI-DSS 3.2.1",
                    "url": "https://docs.microsoft.com/azure/architecture/reference-architectures/containers/aks-pci/aks-pci-intro"
                }
            ],
            "guid": "42d4aefe-2383-470e-b019-c30df24996b2",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "security": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Configure your cluster for regulated industries",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "A partir da versão 1.19 do Kubernetes, o AKS não permitirá mais que o complemento do painel gerenciado do Kubernetes seja instalado por motivos de segurança e o complemento está agendado para ser preterido. Verifique se o painel do Kubernetes não está instalado no cluster.",
            "detail": "It can be done with the following CLI: az aks disable-addons --addons kube-dashboard --resource-group RG_NAME --name CLUSTER_NAME",
            "documentation": [],
            "guid": "aefbf509-a9e8-46cc-8ae9-80f07acffd7c",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Check if you need the Kubernetes dashboard",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Por padrão, o ETCD é criptografado em repouso com chaves gerenciadas pela Microsoft. É possível criptografar o banco de dados usando sua própria chave usando um plug-in KMS e armazenar a chave no Azure Key Vault.",
            "documentation": [
                {
                    "title": "Add KMS etcd encryption to an Azure Kubernetes Service (AKS) cluster",
                    "url": "https://docs.microsoft.com/azure/aks/use-kms-etcd-encryption"
                },
                {
                    "title": "Kubernetes KMS",
                    "url": "https://github.com/Azure/kubernetes-kms"
                }
            ],
            "guid": "e7ba73a3-0508-4f80-806f-527db30cee96",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "security": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Segredos",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Encrypt ETCD at rest with your own key",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Para se manter atualizado sobre novos recursos e correções de bugs, atualize regularmente para a versão do Kubernetes no cluster do AKS. O suporte para kubernetes é apenas atual e apenas para as versões N-2",
            "documentation": [
                {
                    "title": "Regularly update to the latest version of Kubernetes",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-cluster-security#regularly-update-to-the-latest-version-of-kubernetes"
                },
                {
                    "title": "Use the auto-upgrade feature",
                    "url": "https://docs.microsoft.com/azure/aks/upgrade-cluster#set-auto-upgrade-channel"
                }
            ],
            "guid": "e189c599-df0d-45a7-9dd4-ce32c1881370",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Maintain kubernetes version up to date",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Agora você pode proteger seus clusters do Kubernetes e cargas de trabalho de contêiner contra possíveis ameaças, restringindo a implantação de imagens de contêiner com vulnerabilidades em seus componentes de software.",
            "guid": "1f95a465-c682-405b-84b4-966c3a619c12",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Policy blocking the deployment of vulnerable image",
            "tools": [
                {
                    "title": "Policy blocking the deployment of vulnerable images",
                    "url": "https://github.com/Azure/azure-policy/blob/master/built-in-policies/policyDefinitions/Kubernetes/BlockVulnerableImages.json"
                }
            ],
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Usar o Azure Key Vault para armazenar segredos e certificados",
            "documentation": [
                {
                    "title": "Tutorial: Configure and run the Azure Key Vault provider for the Secrets Store CSI driver on Kubernetes",
                    "url": "https://docs.microsoft.com/azure/key-vault/general/key-vault-integrate-kubernetes"
                }
            ],
            "guid": "fc1e68dd-ac89-4851-8e53-8fbac3461d26",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Azure Key Vault",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "A Central de Segurança traz benefícios de segurança para os clusters do AKS usando dados já coletados pelo nó mestre do AKS.",
            "documentation": [
                {
                    "title": "Azure Kubernetes Services integration with Security Center",
                    "url": "https://docs.microsoft.com/azure/security-center/azure-kubernetes-service-integration"
                }
            ],
            "guid": "23fda718-b80b-44c8-b2e4-d46580ab6651",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Monitor the security of your cluster with Azure Security Center",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Com o limpador de imagens, você pode detectar e remover automaticamente todas as imagens não utilizadas e vulneráveis armazenadas em cache nos nós do AKS, mantendo os nós mais limpos e seguros.",
            "detail": "It's common to use pipelines to build and deploy images on Azure Kubernetes Service (AKS) clusters. While great for image creation, this process often doesn't account for the stale images left behind and can lead to image bloat on cluster nodes. These images can present security issues as they may contain vulnerabilities. By cleaning these unreferenced images, you can remove an area of risk in your clusters. When done manually, this process can be time intensive, which ImageCleaner can mitigate via automatic image identification and removal.",
            "documentation": [
                {
                    "title": "Use ImageCleaner to clean up stale images on your AKS cluster",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/image-cleaner"
                }
            ],
            "guid": "ca62d835-69cc-476d-bd8e-ea8fa58fab9c",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Remove vulnerable images from your cluster",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Microsoft Defender para Contêineres fornece proteções para seus clusters do Kubernetes onde quer que eles estejam em execução (AKS e local)",
            "documentation": [
                {
                    "title": "Introduction to Microsoft Defender for Containers",
                    "url": "https://docs.microsoft.com/azure/defender-for-cloud/defender-for-containers-introduction"
                }
            ],
            "guid": "c9e95ffe-6dd1-4a17-8c5f-110389ca9b21",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "security": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Segredos",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Enable Microsoft Defender for Containers",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "O Azure Policy se integra ao AKS (Serviço de Kubernetes do Azure) para aplicar imposições e proteções em escala em seus clusters de maneira centralizada e consistente.",
            "documentation": [
                {
                    "title": "Azure Policies for AKS",
                    "url": "https://docs.microsoft.com/azure/governance/policy/concepts/rego-for-aks"
                },
                {
                    "title": "Azure Kubernetes Services Governance with Azure Policy",
                    "url": "https://learn.microsoft.com/training/modules/aks-governance-azure-policy"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.azurepolicy) and properties.addonProfiles.azurepolicy.enabled==true) | distinct id,compliant",
            "guid": "9ca48e4a-85e2-4223-bce8-bb12307ca5f1",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.azurepolicy) and properties.addonProfiles.azurepolicy.enabled==true) | distinct id,compliant",
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Use Azure Policy for Kubernetes to ensure cluster compliance",
            "tools": [
                {
                    "title": "Gatekeeper",
                    "url": "https://github.com/open-policy-agent/gatekeeper"
                }
            ],
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Gerencie pools de nós do sistema no AKS (Serviço de Kubernetes do Azure) e adicione taint ao pool de nós do sistema para torná-lo dedicado",
            "documentation": [
                {
                    "title": "AKS System Pools",
                    "url": "https://docs.microsoft.com/azure/aks/use-system-pools"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | project id,resourceGroup,name,pools=properties.agentPoolProfiles | project id,name,resourceGroup,poolcount=array_length(pools) | extend compliant = (poolcount > 1)",
            "guid": "6f158e3e-a3a9-42c2-be7e-2165c3a87af4",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "graph": "where type=='microsoft.containerservice/managedclusters' | project id,resourceGroup,name,pools=properties.agentPoolProfiles | project id,name,resourceGroup,poolcount=array_length(pools) | extend compliant = (poolcount > 1)",
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Separate applications from the control plane with user/system nodepools",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Talvez você queira atualizar ou girar as credenciais como parte de uma política de segurança definida",
            "documentation": [
                {
                    "title": "Update or rotate the credentials for AKS",
                    "url": "https://docs.microsoft.com/azure/aks/update-credentials"
                }
            ],
            "guid": "b03dda6d-58d7-4c89-8ddb-107d5769ae66",
            "optionalFields": {
                "score": {
                    "security": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Segredos",
            "tags": [
                null,
                null
            ],
            "title": "If user Service Principals for the cluster, refresh credentials periodically (like quarterly)",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "O Registro de Contêiner do Azure permite que você crie, armazene e gerencie imagens e artefatos de contêiner em um registro privado",
            "documentation": [
                {
                    "title": "Azure Container Registry documentation",
                    "url": "https://docs.microsoft.com/azure/container-registry/"
                }
            ],
            "guid": "55b46a94-8008-4ae7-b7e4-b475b6c8bdbf",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Use a private registry for your images, such as ACR",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Microsoft Defender para Contêineres é a solução nativa de nuvem usada para proteger seus contêineres ",
            "documentation": [
                {
                    "title": "Overview of Microsoft Defender for Containers",
                    "url": "https://docs.microsoft.com/azure/security-center/container-security"
                }
            ],
            "guid": "cc639637-a652-42ac-89e8-06965388e9de",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "security": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Use Azure Security Center to detect security posture vulnerabiities",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Os contêineres executados em um TEE (Ambiente de Execução Confiável) trazem isolamento de outros contêineres, o kernel do nó em um ambiente atestado protegido por hardware e integridade.",
            "documentation": [
                {
                    "title": "Application enclave support on AKS",
                    "url": "https://learn.microsoft.com/en-us/azure/confidential-computing/confidential-nodes-aks-overview"
                }
            ],
            "guid": "ec8e4e42-0344-41b0-b865-9123e8956d31",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "security": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Segredos",
            "tags": [
                null,
                null
            ],
            "title": "If required consider using Confidential Compute for AKS",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Planejar clusters multilocatários e separação de recursos e usar isolamento lógico ou físico em seus clusters do AKS",
            "documentation": [
                {
                    "title": "Best practices for cluster isolation in AKS",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-cluster-isolation"
                }
            ],
            "guid": "d167dd18-2b0a-4c24-8b99-9a646f8389a7",
            "optionalFields": {
                "score": {
                    "security": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Define app separation requirements (namespace/nodepool/cluster)",
            "waf": "Segurança"
        },
        {
            "category": "Cluster_Security",
            "description": "Planejar clusters multilocatários e separação de recursos e usar isolamento lógico ou físico em seus clusters do AKS",
            "documentation": [
                {
                    "title": "Add Azure Dedicated Host to an AKS cluster",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/use-azure-dedicated-hosts"
                }
            ],
            "guid": "5ae124ba-34df-4585-bcdc-e9bd3bb0cdb3",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null
            ],
            "title": "If required consider using Azure Dedicated Hosts for AKS nodes",
            "waf": "Segurança"
        },
        {
            "category": "Recipiente",
            "description": "Verificar suas imagens de contêiner para garantir que não haja vulnerabilidades nelas",
            "documentation": [
                {
                    "title": "Azure Security Center : scanning feature (Qualys)",
                    "url": "https://docs.microsoft.com/azure/security-center/azure-container-registry-integration"
                },
                {
                    "title": "Identify vulnerable container images in your CI/CD workflows",
                    "url": "https://docs.microsoft.com/azure/defender-for-cloud/defender-for-containers-cicd"
                }
            ],
            "guid": "59bce65d-e8a0-43f9-9879-468d66a786d6",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "security": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Scan the container image against vulnerabilities",
            "tools": [
                {
                    "title": "Prisma (ex Twistlock)",
                    "url": "https://www.twistlock.com/"
                },
                {
                    "title": "Anchore",
                    "url": "https://anchore.com/"
                },
                {
                    "title": "Clair",
                    "url": "https://github.com/quay/clair"
                }
            ],
            "waf": "Segurança"
        },
        {
            "category": "Recipiente",
            "description": "Uma das políticas personalizadas mais comuns que você pode querer considerar é restringir as imagens que podem ser implantadas em seu cluster. Mas também pode ser resolvido com um bloqueio de saída adequado ou usando um controlador de admissão",
            "documentation": [
                {
                    "title": "Use the Azure Policy : Ensure only allowed container images in AKS",
                    "url": "https://docs.microsoft.com/azure/governance/policy/concepts/rego-for-aks#built-in-policies"
                },
                {
                    "title": "Using ImagePolicyWebhook",
                    "url": "https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#imagepolicywebhook"
                },
                {
                    "title": "Using egress lockdown and authorizing only the URL of your registry",
                    "url": "https://docs.microsoft.com/azure/aks/limit-egress-traffic"
                }
            ],
            "guid": "8dcb9d27-a601-48e6-aeb8-e0469aaf8921",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Allow deploying containers only from known registries"
        },
        {
            "category": "Recipiente",
            "description": "Integre a segurança de tempo de execução para seus pods.  Para concluir a estrutura de defesa em profundidade, certifique-se de que a proteção de tempo de execução esteja em vigor para proteger contra ataques de processo, rede, armazenamento e chamada do sistema.",
            "guid": "a71e024f-ac46-4d0e-86d8-fad9a86c99af",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Runtime Security of Applications",
            "tools": [
                {
                    "title": "Prisma Runtime defense",
                    "url": "https://docs.paloaltonetworks.com/prisma/prisma-cloud/prisma-cloud-admin-compute/runtime_defense.html"
                },
                {
                    "title": "Falco",
                    "url": "https://falco.org"
                }
            ]
        },
        {
            "category": "Recipiente",
            "description": "Use a política para proteger as imagens contra descompasso enquanto estiverem no registro, tanto por push quanto por pull.",
            "detail": "On build, the image is secured based on the threshold set, but now while in the registry a new issue is discovered.  You need to ensure that the image can not be deployed until the issue is remediated.",
            "documentation": [
                {
                    "title": "ACR Quarantine",
                    "url": "https://github.com/Azure/acr/tree/master/docs/preview/quarantine"
                }
            ],
            "guid": "c970cb26-a707-4bf2-9e40-5401fea3d55b",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Quarantine of Docker Images in Docker Registries that have discovered issues"
        },
        {
            "category": "Recipiente",
            "description": "O serviço Registro de Contêiner do Azure dá suporte a um conjunto de funções internas do Azure que fornecem diferentes níveis de permissões para um registro de contêiner do Azure. Use o RBAC (controle de acesso baseado em função) do Azure para atribuir permissões específicas a usuários, entidades de serviço ou outras identidades que precisam interagir com um registro.",
            "documentation": [
                {
                    "title": "Azure Container Registry roles and permissions",
                    "url": "https://docs.microsoft.com/azure/container-registry/container-registry-roles"
                }
            ],
            "guid": "3f703579-9f4a-43c4-8c40-5a9e78015379",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Role-Based Access Contol (RBAC) to Docker Registries"
        },
        {
            "category": "Recipiente",
            "description": "Limite o acesso a um registro atribuindo endereços IP privados de rede virtual aos pontos de extremidade do registro e usando o Link Privado do Azure. O tráfego de rede entre os clientes na rede virtual e os pontos de extremidade privados do registro atravessa a rede virtual e um link privado na rede de backbone da Microsoft, eliminando a exposição da Internet pública. O Link Privado também habilita o acesso ao registro privado local por meio do emparelhamento privado do Azure ExpressRoute ou de um gateway de VPN.",
            "documentation": [
                {
                    "title": "Azure Container Registry Private Link",
                    "url": "https://docs.microsoft.com/azure/container-registry/container-registry-private-link"
                }
            ],
            "guid": "6ae51d09-8142-4979-95ed-7ec3451de81c",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Network Segmentation of Docker Registries"
        },
        {
            "category": "Recipiente",
            "description": "Ao criar uma imagem do docker, tente usar a versão sem distribuição da imagem base do sistema operacional para reduzir o risco de vulnerabilidades com ferramentas pré-instaladas, mas não utilizadas. Por exemplo, use base-debian10 em vez de debian10",
            "detail": "'Distroless' images are bare-bones versions of common base images. They have the bare-minimum needed to execute a binary.The shell and other developer utilities have been removed so that if/when an attacker gains control of your container, they can't do much of anything",
            "documentation": [
                {
                    "title": "Google distroless images",
                    "url": "https://github.com/GoogleContainerTools/distroless"
                }
            ],
            "guid": "f57ba3a5-93ae-435f-9468-80ccd6a841b9",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Prefer distroless images"
        },
        {
            "category": "Recipiente",
            "description": "Ao usar imagens base para imagens de aplicativos, use a automação para criar novas imagens quando a imagem base for atualizada. Como essas imagens base normalmente incluem correções de segurança, atualize todas as imagens de contêiner de aplicativo downstream.",
            "documentation": [
                {
                    "title": "Automatically build new images on base image update",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-container-image-management#automatically-build-new-images-on-base-image-update"
                },
                {
                    "title": "Azure DevOps - Trigger pipeline from Docker image update",
                    "url": "https://dev.to/larryclaman/trigger-azure-devops-build-pipeline-from-docker-image-update-5d3i"
                }
            ],
            "guid": "22882284-a9c2-4e16-b3e3-2d4947cc24b8",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Refresh container when base image is updated"
        },
        {
            "category": "Identidade",
            "description": "O AKS (Serviço de Kubernetes do Azure) pode ser configurado para usar o Azure Active Directory (Azure AD) para autenticação de usuário. Nessa configuração, você pode entrar em um cluster do AKS usando o token de autenticação do Azure AD.",
            "documentation": [
                {
                    "title": "AKS-managed Azure Active Directory integration",
                    "url": "https://docs.microsoft.com/azure/aks/managed-aad"
                },
                {
                    "title": "Disable local accounts",
                    "url": "https://docs.microsoft.com/azure/aks/managed-aad#disable-local-accounts"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = isnotnull(properties.aadProfile) | distinct id,compliant",
            "guid": "7e42c78e-78c0-46a6-8a21-94956e698dc4",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = isnotnull(properties.aadProfile) | distinct id,compliant",
                    "simple": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "severity": "Média",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Integrate authentication with AAD (using the managed integration)",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "Controlar o acesso aos recursos de cluster usando o controle de acesso baseado em função do Kubernetes e as identidades do Azure Active Directory no Serviço de Kubernetes do Azure",
            "documentation": [
                {
                    "title": "Limit cluster access via K8S RBAC for users & workloads",
                    "url": "https://docs.microsoft.com/azure/aks/azure-ad-rbac"
                }
            ],
            "guid": "eec4962c-c3bd-421b-b77f-26e5e6b3bec3",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Integrate authorization with AAD RBAC",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "O AKS pode se autenticar no ACR sem usar nenhuma senha, mas usando a Entidade de Serviço ou a Identidade Gerenciada.",
            "detail": "For AKS to download/pull images from Azure Container Registry (ACR), it needs the ACR credentials including the password. To avoid saving the password in the cluster, you can simply activate the ACR integration on new or existing AKS cluster using SPN or Managed Identity",
            "documentation": [
                {
                    "title": "Authenticate with Azure Container Registry from AKS",
                    "url": "https://docs.microsoft.com/azure/aks/cluster-container-registry-integration"
                }
            ],
            "guid": "100f8f70-3ec6-44bb-ab07-95eef965e80d",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use AKS and ACR integration without password",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "Cada cluster do AKS precisa de uma Identidade Gerenciada ou de uma Entidade de Serviço.  Recomendamos usar a Identidade Gerenciada no AKS",
            "documentation": [
                {
                    "title": "Use managed identities in Azure Kubernetes Service",
                    "url": "https://docs.microsoft.com/azure/aks/use-managed-identity"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.servicePrincipalProfile.clientId=='msi') | distinct id,compliant",
            "guid": "ed127dd1-42b0-46b2-8c69-99a646f3389a",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.servicePrincipalProfile.clientId=='msi') | distinct id,compliant",
                    "simple": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use managed identities instead of Service Principals",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "Para limitar quem pode obter essas informações de configuração do Kubernetes (kubeconfig) e limitar as permissões que eles têm, você pode usar o RBAC do Azure (controle de acesso baseado em função) do Azure.",
            "documentation": [
                {
                    "title": "Use Azure RBAC to define access to the Kubernetes configuration file",
                    "url": "https://docs.microsoft.com/azure/aks/control-kubeconfig-access"
                }
            ],
            "guid": "a2fe27b2-e287-401a-8352-beedf79b488d",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Limit access to admin kubeconfig (get-credentials --admin)",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": " Você pode usar kubelogin para acessar o cluster com entrada de entidade de serviço não interativa.",
            "documentation": [
                {
                    "title": "Non-interactive sign in with kubelogin",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/managed-aad#non-interactive-sign-in-with-kubelogin"
                }
            ],
            "guid": "f4dcf690-1b30-407d-abab-6f8aa780d3a3",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "For AKS non-interactive logins use kubelogin",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "O AKS oferece aos usuários a capacidade de desabilitar contas locais por meio de um sinalizador, disable-local-accounts",
            "documentation": [
                {
                    "title": "Disable local accounts",
                    "url": "https://learn.microsoft.com/azure/aks/managed-aad#disable-local-accounts"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.disableLocalAccounts==true) | distinct id,compliant",
            "guid": "b085b1f2-3119-4771-8c9a-bbf4411810ec",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Disable AKS local accounts",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "O AKS oferece aos usuários a capacidade de habilitar o acesso por um tempo limitado",
            "documentation": [
                {
                    "title": "Configure just-in-time cluster access with Azure AD and AKS",
                    "url": "https://learn.microsoft.com/azure/aks/managed-aad#configure-just-in-time-cluster-access-with-azure-ad-and-aks"
                }
            ],
            "guid": "36abb0db-c118-4f4c-9880-3f30f9a2deb6",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Configure if required Just-in-time cluster access",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "Uma identidade do Kubelet permite o acesso concedido à identidade existente antes da criação do cluster.",
            "documentation": [
                {
                    "title": "Use a pre-created kubelet managed identity",
                    "url": "https://learn.microsoft.com/azure/aks/use-managed-identity#use-a-pre-created-kubelet-managed-identity"
                }
            ],
            "guid": "1f711a74-3672-470b-b8b8-a2148d640d79",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "For finer control consider using a managed Kubelet Identity",
            "waf": "Segurança"
        },
        {
            "category": "Identidade",
            "description": "Ao integrar o Azure AD ao cluster do AKS, você também pode usar o Acesso Condicional para controlar o acesso ao cluster.",
            "documentation": [
                {
                    "title": "Use Conditional Access with Azure AD and AKS",
                    "url": "https://learn.microsoft.com/azure/aks/managed-aad#use-conditional-access-with-azure-ad-and-aks"
                }
            ],
            "guid": "c4d7f4c6-79bf-45d0-aa05-ce8fc717e150",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Configure if required AAD conditional access for AKS",
            "waf": "Segurança"
        },
        {
            "category": "Rede",
            "description": "Para integração com redes virtuais existentes ou redes locais, use a rede CNI do Azure no AKS. Esse modelo de rede também permite maior separação de recursos e controles em um ambiente corporativo, mas esteja ciente do impacto na topologia da rede/intervalos de IP. Agora você pode usar o modelo de sobreposição CNI, que oferece mais controle e aproveita os benefícios de ambas as abordagens.",
            "detail": "While Kubenet is the default Kubernetes network plugin, the Container Networking Interface (CNI) is a vendor-neutral protocol that lets the container runtime make requests to a network provider. The Azure CNI assigns IP addresses to pods and nodes, and provides IP address management (IPAM) features as you connect to existing Azure virtual networks. Each node and pod resource receives an IP address in the Azure virtual network, and no additional routing is needed to communicate with other resources or services.",
            "documentation": [
                {
                    "title": "Kubenet vs CNI",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-network#choose-the-appropriate-network-model"
                },
                {
                    "title": "Dynamic IP allocation",
                    "url": "https://docs.microsoft.com/azure/aks/configure-azure-cni#dynamic-allocation-of-ips-and-enhanced-subnet-support"
                },
                {
                    "title": "Azure CNI Overlay",
                    "url": "https://learn.microsoft.com/azure/aks/azure-cni-overlay"
                },
                {
                    "title": "Bring your own CNI",
                    "url": "https://docs.microsoft.com/azure/aks/use-byo-cni"
                },
                {
                    "title": "Add a node pool with a unique subnet",
                    "url": "https://docs.microsoft.com/azure/aks/use-multiple-node-pools#add-a-node-pool-with-a-unique-subnet"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.networkProfile.networkPlugin=='azure') | distinct id,compliant",
            "guid": "a0f61565-9de5-458f-a372-49c831112dbd",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.networkProfile.networkPlugin=='azure') | distinct id,compliant",
                    "simple": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "IPAM",
            "tags": [
                null,
                null
            ],
            "title": "Choose the best CNI network plugin for your requirements (Azure CNI recommended)",
            "waf": "Fiabilidade"
        },
        {
            "category": "Rede",
            "description": "O tamanho da sua rede virtual e sua sub-rede devem acomodar o número de pods que você planeja executar e o número de nós para o cluster.",
            "detail": "As an example, using CNI, you need one IP for each node + one spare for a new node in case of cluster upgrade, and you need an IP for each pod which can represent hundred of IP addresses",
            "documentation": [
                {
                    "title": "Plan IP addressing for your cluster",
                    "url": "https://docs.microsoft.com/azure/aks/configure-azure-cni#plan-ip-addressing-for-your-cluster"
                }
            ],
            "guid": "7faf12e7-0943-4f63-8472-2da29c2b1cd6",
            "optionalFields": {
                "score": {
                    "scale": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "IPAM",
            "tags": [
                null,
                null
            ],
            "title": "If using Azure CNI, size your subnet accordingly considering the maximum number of pods per node",
            "waf": "Desempenho"
        },
        {
            "category": "Rede",
            "description": "Para distribuir o tráfego HTTP ou HTTPS para seus aplicativos, use recursos e controladores de entrada. Os controladores de entrada fornecem recursos adicionais em relação a um balanceador de carga regular do Azure e podem ser gerenciados como recursos nativos do Kubernetes.",
            "documentation": [
                {
                    "title": "Application routing add-on for Azure Kubernetes Service (AKS)",
                    "url": "https://aka.ms/aks/docs/app-routing"
                },
                {
                    "title": "Distribute ingress traffic",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-network#distribute-ingress-traffic"
                },
                {
                    "title": "Network concepts: Ingress controllers",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/concepts-network#ingress-controllers"
                }
            ],
            "guid": "b3808b9f-a1cf-4204-ad01-3a923ce474db",
            "optionalFields": {
                "score": {
                    "scale": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null
            ],
            "title": "Use an ingress controller to expose web-based apps instead of exposing them with LoadBalancer-type services",
            "waf": "Fiabilidade"
        },
        {
            "category": "Rede",
            "description": "Se você planeja hospedar aplicativos expostos, para verificar o tráfego de entrada em busca de possíveis ataques, use um WAF (firewall de aplicativo Web), como o Barracuda WAF para Azure ou o Gateway de Aplicativo do Azure. Esses recursos de rede mais avançados também podem rotear o tráfego além de apenas conexões HTTP e HTTPS ou terminação SSL básica.",
            "documentation": [
                {
                    "title": "Secure traffic with a web application firewall (WAF)",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-network#secure-traffic-with-a-web-application-firewall-waf"
                }
            ],
            "guid": "a3a92c2d-e7e2-4165-a3a8-7af4a7a1f893",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "security": 2,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Segurança",
            "tags": [
                null,
                null
            ],
            "title": "Secure your exposed applications with a web application firewall (WAF)",
            "waf": "Segurança"
        },
        {
            "category": "Rede",
            "description": "Quando um usuário cria um manifesto de entrada, ele pode usar qualquer nome de host nele. Talvez você queira controlar quais nomes de host têm permissão para usar, como os nomes de host da sua empresa.",
            "documentation": [
                {
                    "title": "Tutorial: only allow approved domain names as ingress hostnames",
                    "url": "https://www.openpolicyagent.org/docs/latest/kubernetes-tutorial/#4-define-a-policy-and-load-it-into-opa-via-kubernetes"
                }
            ],
            "guid": "e5684a8b-f072-43d2-83b2-234ad48f57c7",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Apply control on ingress hostnames"
        },
        {
            "category": "Rede",
            "description": "Quase não há motivo para expor diretamente o ponto de entrada à Internet, mas, por padrão, o AKS cria um ponto público. Diga a ele para criar apenas um interno.",
            "documentation": [
                {
                    "title": "Create an ingress controller to an internal virtual network",
                    "url": "https://docs.microsoft.com/azure/aks/ingress-internal-ip"
                }
            ],
            "guid": "c0179fd4-470b-43c8-b7bb-80307051bc96",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Don't expose your load-balancer on Internet if not necessary"
        },
        {
            "category": "Rede",
            "description": "Use políticas de rede para permitir ou negar tráfego para pods. Por padrão, todo o tráfego é permitido entre pods dentro de um cluster. Para melhorar a segurança, defina regras que limitem a comunicação do pod.",
            "detail": "Network policy is a Kubernetes feature that lets you control the traffic flow between pods. You can choose to allow or deny traffic based on settings such as assigned labels, namespace, or traffic port. The use of network policies gives a cloud-native way to control the flow of traffic. As pods are dynamically created in an AKS cluster, the required network policies can be automatically applied. Don't use Azure network security groups to control pod-to-pod traffic, use network policies.",
            "documentation": [
                {
                    "title": "Enable a Kubernetes Network Policy option (Calico/Azure)",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-network#control-traffic-flow-with-network-policies"
                },
                {
                    "title": "Secure traffic between pods using network policies",
                    "url": "https://docs.microsoft.com/azure/aks/use-network-policies"
                }
            ],
            "guid": "0751f099-e6f4-4250-b405-d2b26c707432",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = isnotnull(properties.networkProfile.networkPolicy) | distinct id,compliant",
                    "security": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "severity": "Alto",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Control traffic flow with network policies",
            "tools": [
                {
                    "title": "Calico",
                    "url": "https://docs.projectcalico.org/reference/resources/networkpolicy"
                },
                {
                    "title": "Cillium",
                    "url": "https://cilium.io/"
                }
            ]
        },
        {
            "category": "Rede",
            "description": "Comece criando uma política de negação de tudo em cada namespace e, em seguida, adicione políticas específicas.",
            "documentation": [
                {
                    "title": "Recipes of best default network policies",
                    "url": "https://github.com/ahmetb/kubernetes-network-policy-recipes"
                },
                {
                    "title": "Callico global network policy",
                    "url": "https://projectcalico.docs.tigera.io/reference/resources/globalnetworkpolicy"
                }
            ],
            "guid": "0bc4e0c6-97fd-411a-9eb4-1a1f85f9cdf0",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Configure default network policies in each namespace"
        },
        {
            "category": "Rede",
            "description": "Use o Firewall do Azure para proteger e controlar todo o tráfego de saída que sai do cluster.",
            "documentation": [
                {
                    "title": "Egress traffic requirements",
                    "url": "https://docs.microsoft.com/azure/aks/limit-egress-traffic"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.networkProfile.outboundType=='userDefinedRouting') | distinct id,compliant",
            "guid": "3b365a91-7ecb-4e48-bbe5-4cd7df2e8bba",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.networkProfile.outboundType=='userDefinedRouting') | distinct id,compliant",
                    "security": 2,
                    "simple": -2
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "severity": "Alto",
            "subcategory": "Segurança",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Filter egress traffic with AzFW/NVA if your security requirements mandate it (egress lockdown)",
            "waf": "Segurança"
        },
        {
            "category": "Rede",
            "description": "Quando possível, use o link privado para permitir que apenas a rede privada acesse seu registro.",
            "documentation": [
                {
                    "title": "Azure Container Registry Private Link",
                    "url": "https://docs.microsoft.com/azure/container-registry/container-registry-private-link"
                }
            ],
            "guid": "e38f1680-8ddc-4c93-bf09-6b932a4935ca",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Don't expose your container registry on Internet"
        },
        {
            "category": "Rede",
            "description": "Por padrão, os pods têm acesso ao VMSS IMDS e podem solicitar o token de acesso da Identidade Gerenciada anexada. Esse acesso deve ser restrito usando a Diretiva de Rede.",
            "documentation": [
                {
                    "title": "Pods requesting access to get a token",
                    "url": "https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/how-to-use-vm-token#get-a-token-using-curl"
                }
            ],
            "guid": "4fb072a7-0303-46d8-9ecf-d8aa4d69ff83",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Block Pod access to VMSS IMDS"
        },
        {
            "category": "Rede",
            "description": "Em um cluster privado, o plano de controle ou o servidor de API tem endereços IP internos e não é exposto à Internet",
            "detail": "By using a private cluster, you can ensure that network traffic between your API server and your node pools remains on the private network only. Because the API server has a private address, it means that to access it for administration or for deployment, you need to set up private connection, like using a 'jumpbox' (i.e.: Azure Bastion)",
            "documentation": [
                {
                    "title": "Create a private cluster (using private link)",
                    "url": "https://docs.microsoft.com/azure/aks/private-clusters"
                },
                {
                    "title": "Create an Azure Kubernetes Service cluster with API Server VNet Integration (preview)",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/api-server-vnet-integration"
                },
                {
                    "title": "Use azure CLI to run command on a private cluster",
                    "url": "https://docs.microsoft.com/azure/aks/private-clusters#options-for-connecting-to-the-private-cluster"
                },
                {
                    "title": "Use public DNS with a private cluster",
                    "url": "https://docs.microsoft.com/azure/aks/private-clusters#create-a-private-aks-cluster-with-a-public-dns-address"
                }
            ],
            "guid": "29fb411c-20a8-4c39-84df-aaa4227eaeb2",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use private clusters if your requirements mandate it"
        },
        {
            "category": "Rede",
            "description": "O Gerenciador de Tráfego do Azure pode direcionar os clientes para o cluster do AKS e a instância do aplicativo mais próximos. Para obter o melhor desempenho e redundância, direcione todo o tráfego do aplicativo por meio do Gerenciador de Tráfego antes que ele vá para o cluster do AKS.",
            "detail": "If you have multiple AKS clusters in different regions, use Traffic Manager to control how traffic flows to the applications that run in each cluster. Azure Traffic Manager is a DNS-based traffic load balancer that can distribute network traffic across regions. Use Traffic Manager to route users based on cluster response time or based on geography. It can be used to improve app availability with automatic failover",
            "documentation": [
                {
                    "title": "Use Azure Traffic Manager to route traffic",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-multi-region#use-azure-traffic-manager-to-route-traffic"
                }
            ],
            "guid": "5d0bb60d-b8e0-4031-9c5b-1f0a735f771f",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Enable traffic management"
        },
        {
            "category": "Rede",
            "description": "Com a CNI (Interface de Rede de Contêiner do Azure), cada pod obtém um endereço IP da sub-rede e pode ser acessado diretamente.",
            "detail": "These IP addresses must be unique across your network space, and must be planned in advance. Each node has a configuration parameter for the maximum number of pods that it supports. ",
            "documentation": [
                {
                    "title": "Configure Azure CNI networking on AKS",
                    "url": "https://docs.microsoft.com/azure/aks/configure-azure-cni"
                }
            ],
            "guid": "22f54b29-bade-43aa-b1e8-c38ec9366673",
            "optionalFields": {
                "score": {
                    "scale": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "IPAM",
            "tags": [
                null,
                null,
                null
            ],
            "title": "If using Azure CNI, check the maximum pods/node (default 30)",
            "waf": "Desempenho"
        },
        {
            "category": "Rede",
            "description": "Para melhorar a segurança de seus clusters e minimizar o risco de ataques, recomendamos limitar os intervalos de endereços IP que podem acessar o servidor de API.",
            "documentation": [
                {
                    "title": "Secure access to the API server using authorized IP address ranges",
                    "url": "https://docs.microsoft.com/azure/aks/api-server-authorized-ip-ranges"
                }
            ],
            "guid": "d783a3e8-264f-4dac-870f-569791d1837e",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "If using a public API endpoint, restrict the IP addresses that can access it"
        },
        {
            "category": "Rede",
            "description": "Embora os clientes do AKS possam rotear o tráfego de saída por meio de um Azure Load Balancer, há limitações na quantidade de fluxos de saída de tráfego possíveis.",
            "documentation": [
                {
                    "title": "Managed NAT Gateway",
                    "url": "https://learn.microsoft.com/azure/aks/nat-gateway"
                }
            ],
            "guid": "ccb534e7-416e-4a1d-8e93-533b53199085",
            "optionalFields": {
                "score": {
                    "scale": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Azue NAT Gateway as outboundType for scaling egress traffic",
            "waf": "Fiabilidade"
        },
        {
            "category": "Rede",
            "description": "Uma desvantagem da CNI tradicional é o esgotamento dos endereços IP do pod à medida que o cluster do AKS cresce, resultando na necessidade de recompilar todo o cluster em uma sub-rede maior.",
            "detail": "The new dynamic IP allocation capability in Azure CNI solves this problem by allocating pod IPs from a subnet separate from the subnet hosting the AKS cluster.",
            "documentation": [
                {
                    "title": "Dynamic allocation of IPs and enhanced subnet support",
                    "url": "https://learn.microsoft.com/azure/aks/configure-azure-cni#dynamic-allocation-of-ips-and-enhanced-subnet-support"
                }
            ],
            "guid": "8ee9a69a-1b58-4b1e-9c61-476e110a160b",
            "optionalFields": {
                "score": {
                    "scale": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Dynamic allocations of IPs in order to avoid Azure CNI IP exhaustion",
            "waf": "Fiabilidade"
        },
        {
            "category": "Rede",
            "description": "O App Gateway Ingress Controller (AGIC) é um pod dentro do cluster do Kubernetes. O AGIC monitora os recursos de entrada do Kubernetes e cria e aplica a configuração do App Gateway com base neles.",
            "documentation": [
                {
                    "title": "Application gateway ingress controller",
                    "url": "https://azure.github.io/application-gateway-kubernetes-ingress/setup/install-existing/"
                }
            ],
            "guid": "cbd8ac2a-aebc-4a2a-94da-1dbf3dc99248",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Práticas recomendadas",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "If using AGIC, do not share an AppGW across clusters",
            "waf": "Fiabilidade"
        },
        {
            "category": "Rede",
            "description": "Isso ajudará a manter seu cluster seguro, limitando o acesso de fora da rede virtual aos serviços de PaaS do Azure",
            "documentation": [
                {
                    "title": "What is Azure Private Link?",
                    "url": "https://docs.microsoft.com/azure/private-link/private-link-overview"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | where isnotnull(properties.apiServerAccessProfile.enablePrivateCluster) | extend compliant = (properties.apiServerAccessProfile.enablePrivateCluster==true) | distinct id, compliant",
            "guid": "ecccd979-3b6b-4cda-9b50-eb2eb03dda6d",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | where isnotnull(properties.apiServerAccessProfile.enablePrivateCluster) | extend compliant = (properties.apiServerAccessProfile.enablePrivateCluster==true) | distinct id, compliant",
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Segurança",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Private Endpoints (preferred) or Virtual Network Service Endpoints to access PaaS services from the cluster",
            "waf": "Segurança"
        },
        {
            "category": "Rede",
            "description": "Um service mesh fornece recursos como gerenciamento de tráfego, resiliência, política, segurança, identidade forte e observabilidade para suas cargas de trabalho.",
            "documentation": [
                {
                    "title": "About service meshes",
                    "url": "https://learn.microsoft.com/azure/aks/servicemesh-about"
                }
            ],
            "guid": "e9855d04-c3c3-49c9-a6bb-2c12159a114b",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -2
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Segurança",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Consider using a service mesh for advanced microservice communication management",
            "waf": "Segurança"
        },
        {
            "category": "Rede",
            "description": "Um service mesh fornece recursos como gerenciamento de tráfego, resiliência, política, segurança, identidade forte e observabilidade para suas cargas de trabalho.",
            "documentation": [
                {
                    "title": "Bring your own Container Network Interface (CNI) plugin for AKS",
                    "url": "https://learn.microsoft.com/azure/aks/servicemesh-about"
                }
            ],
            "guid": "57bf217f-6dc8-481c-81e2-785773e9c00f",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -2
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Operações",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "If required add your own CNI plugin",
            "waf": "Segurança"
        },
        {
            "category": "Rede",
            "description": "Isso pode atender a requisitos como ter espaço de endereço de rede virtual não contíguo para dividir entre pools de nós e outros motivos de segurança.",
            "documentation": [
                {
                    "title": "Add a node pool with a unique subnet",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/use-multiple-node-pools#add-a-node-pool-with-a-unique-subnet"
                }
            ],
            "guid": "22fbe8d6-9b40-47ef-9011-25bb1a555a6b",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -2
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Práticas recomendadas",
            "tags": [
                null,
                null,
                null
            ],
            "title": "If using Azure CNI, consider using different Subnets for NodePools",
            "waf": "Segurança"
        },
        {
            "category": "Rede",
            "description": "O CIDR de serviço não deve se sobrepor ao CIDR do pod ou ao CIDR de sub-rede ou mesmo ao CIDR da VNET emparelhada. Se não estiver configurado corretamente, o cluster poderá ter um comportamento estranho.",
            "documentation": [
                {
                    "title": "Pod CIDR, Service CIDR and Subnet CIDR",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/configure-azure-cni#plan-ip-addressing-for-your-cluster"
                },
                {
                    "title": "Use the right CIDR ranges for networking parameters",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/configure-azure-cni#deployment-parameters"
                }
            ],
            "guid": "22fbe8d6-9b40-47ef-9011-25bb1a555a6c",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -2
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Verify non overlapping CIDR ranges for Service-CIDR and Pod-CIDR or Subnet-CIDR"
        },
        {
            "category": "Operações",
            "description": "O AKS dá suporte à atualização das imagens em um nó para que você esteja atualizado com as atualizações mais recentes do sistema operacional e do runtime. O AKS fornece uma nova imagem por semana com as atualizações mais recentes, portanto, é benéfico atualizar as imagens do nó regularmente para os recursos mais recentes, incluindo patches do Linux ou do Windows",
            "detail": "Using automation and this method will ensure that all your nodes are consistently up to date with last features/fixes/patchs, without having to upgrade the kubernetes version. An alternative could be to use Kured to reboot nodes with pending reboots but it will only patch the Operating System, not the AKS layer",
            "documentation": [
                {
                    "title": "Azure Kubernetes Service (AKS) node image upgrades",
                    "url": "https://docs.microsoft.com/azure/aks/node-image-upgrade"
                },
                {
                    "title": "Process Linux node updates and reboots using Kured (not recommended because it can behave incorrectly in some cluster configurations like autoscaling)",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-cluster-security#process-linux-node-updates-and-reboots-using-kured"
                },
                {
                    "title": "Use Event Grid to know when an upgrade is available",
                    "url": "https://docs.microsoft.com/azure/aks/quickstart-event-grid"
                }
            ],
            "guid": "945889a8-a9e9-4059-b1aa-0a0df2b8a82c",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Have a regular process to upgrade the cluster node images periodically (weekly, for example), or use the AKS autoupgrade feature",
            "tools": [
                {
                    "title": "Kured (KUbernetes REboot Daemon)",
                    "url": "https://github.com/weaveworks/kured"
                }
            ],
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Ao implantar seu aplicativo no Azure, a distribuição de instâncias de VM (Máquina Virtual) entre regiões ou zonas de disponibilidade cria latência de rede, o que pode afetar o desempenho geral do aplicativo. Um grupo de posicionamento por proximidade é um agrupamento lógico usado para garantir que os recursos de computação do Azure estejam fisicamente localizados próximos uns dos outros",
            "detail": "Be careful, by using PPG on a nodepool, you reduce the average SLA of your application since they don't rely on availability zones anymore",
            "documentation": [
                {
                    "title": "Reduce latency with proximity placement groups",
                    "url": "https://docs.microsoft.com/azure/aks/reduce-latency-ppg"
                }
            ],
            "guid": "17bd8ae4-8ee7-472d-bca5-c7e3cc9b6d82",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Use placement proximity group to improve performance",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "As extensões de cluster fornecem uma experiência orientada pelo Azure Resource Manager para instalação e gerenciamento do ciclo de vida de serviços como o Azure Machine Learning (ML) em um cluster do AKS. ",
            "detail": "This feature enables:Azure Resource Manager-based deployment of extensions, including at-scale deployments across AKS clusters but also lifecycle management of the extension (Update, Delete) from Azure Resource Manager.",
            "documentation": [
                {
                    "title": "Customize node configuration for Azure Kubernetes Service (AKS) node pools",
                    "url": "https://docs.microsoft.com/en-gb/azure/aks/cluster-extensions"
                }
            ],
            "guid": "4cd9bd7a-fe6f-427b-b5dd-9ab2f50aa663",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.austoscalerProfile)) | distinct id,compliant",
                    "ha": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Customize your clusters with extensions",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Ao criar um novo cluster do AKS, o grupo de recursos MC_ é criado por padrão. Você pode personalizar o nome do grupo de recursos MC_.",
            "documentation": [
                {
                    "title": "Custom resource group name",
                    "url": "https://learn.microsoft.com/en-gb/azure/aks/cluster-configuration#custom-resource-group-name"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.nodeResourceGroup !startswith 'MC_') | distinct id,compliant",
            "guid": "73b32a5a-67f7-4a9e-b5b3-1f38c3f39812",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.nodeResourceGroup !startswith 'MC_') | distinct id,compliant",
                    "simple": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Customize the name of the MC_ resource group",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Não exponha a conectividade remota aos nós do AKS. Crie um host bastião ou jump box em uma rede virtual de gerenciamento. Use o host bastião para rotear com segurança o tráfego para o cluster do AKS para tarefas de gerenciamento remoto.",
            "documentation": [
                {
                    "title": "Securely connect to nodes through a bastion host",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-network#securely-connect-to-nodes-through-a-bastion-host"
                }
            ],
            "guid": "28538587-2c1f-4390-b571-384649732c16",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Securely connect to nodes through a bastion host",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Execute regularmente a versão mais recente da ferramenta de software livre de verificação de cluster para detectar problemas em seu cluster. Por exemplo, se você aplicar cotas de recursos em um cluster do AKS existente, execute kubestriker primeiro para encontrar pods que não tenham solicitações e limites de recursos definidos.",
            "guid": "4dd8b544-5b8b-443d-8e76-cea80d9dec30",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Regularly check for cluster issues ",
            "tools": [
                {
                    "title": "AKS Periscope",
                    "url": "https://github.com/Azure/aks-periscope"
                },
                {
                    "title": "kubestriker",
                    "url": "https://www.kubestriker.io/"
                },
                {
                    "title": "kubebench",
                    "url": "https://github.com/aquasecurity/kube-bench"
                }
            ],
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Certifique-se de estar sempre ciente do que acontece em seu cluster. Monitorar a integridade do cluster (nós, servidor), mas também dos pods",
            "documentation": [
                {
                    "title": "Azure Monitor for AKS",
                    "url": "https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-analyze"
                },
                {
                    "title": "Azure Managed Grafana",
                    "url": "https://azure.microsoft.com/services/managed-grafana/"
                }
            ],
            "guid": "90640e42-ce36-4c2a-b20a-bee9c572df6c",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Provision a log aggregation tool",
            "tools": [
                {
                    "title": "Elastic Cloud",
                    "url": "https://www.elastic.co/elastic-cloud-kubernetes"
                },
                {
                    "title": "Datadog",
                    "url": "https://www.datadoghq.com/"
                }
            ],
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Se a integração padrão puder coletar dados de telemetria e métricas básicas (CPU/Memória), ela não coletará métricas personalizadas e informações mais detalhadas. Muitas vezes é necessário instalar um software de terceiros (o prometheus é recomendado no Kubernetes) e eles armazenam essas métricas para explorá-las.",
            "detail": "Typically, to use Prometheus, you need to set up and manage a Prometheus server with a store. By integrating with Azure Monitor, a Prometheus server is not required. You just need to expose the Prometheus metrics endpoint through your exporters or pods (application), and the containerized agent for Azure Monitor for containers can scrape the metrics for you.",
            "documentation": [
                {
                    "title": "Configure scraping of Prometheus metrics",
                    "url": "https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-prometheus-integration"
                },
                {
                    "title": "Deploying ELK",
                    "url": "https://www.elastic.co/guide/en/cloud-on-k8s/current/k8s-quickstart.html"
                }
            ],
            "guid": "6f8389a7-f82c-4b8e-a8c0-aa63a25a4956",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Monitorização",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Monitor your cluster metrics with Container Insights (or other tools like Prometheus)",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O rastreamento distribuído, também chamado de rastreamento de solicitação distribuída, é um método usado para criar perfis e monitorar aplicativos, especialmente aqueles criados usando uma arquitetura de microsserviços. O rastreamento distribuído ajuda a identificar onde ocorrem falhas e o que causa baixo desempenho.",
            "documentation": [
                {
                    "title": "Solution for onboarding Kubernetes/AKS workloads onto Application Insights monitoring.",
                    "url": "https://github.com/microsoft/Application-Insights-K8s-Codeless-Attach"
                },
                {
                    "title": "Zero instrumentation application monitoring for Kubernetes hosted applications (deprecated)",
                    "url": "https://docs.microsoft.com/azure/azure-monitor/app/kubernetes"
                }
            ],
            "guid": "8d33b2b2-e043-4c61-aa5d-319a8eb6c382",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Configure distributed tracing",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Além de atualizar manualmente um cluster, você pode definir um canal de atualização automática em seu cluster",
            "documentation": [
                {
                    "title": "Set AKS auto-upgrade channel",
                    "url": "https://docs.microsoft.com/azure/aks/upgrade-cluster#set-auto-upgrade-channel"
                }
            ],
            "guid": "01deb8ed-b6f5-40bb-8d0b-d0ee2d933f51",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Set Upgrade Channel",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Para acompanhar as demandas de aplicativo no AKS (Serviço de Kubernetes do Azure), talvez seja necessário ajustar o número de nós que executam suas cargas de trabalho. O componente do dimensionador automático de cluster pode observar pods em seu cluster que não podem ser agendados devido a restrições de recursos.",
            "detail": "You can enable autoscaling module per node pool but only create one mutual autoscale profile",
            "documentation": [
                {
                    "title": "AKS Autoscaler",
                    "url": "https://docs.microsoft.com/azure/aks/cluster-autoscaler"
                },
                {
                    "title": "Node autoprovisioning (karpenter)",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/node-autoprovision"
                },
                {
                    "title": "Cluster autoscaler",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/concepts-scale#cluster-autoscaler"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.autoScalerProfile)) | distinct id,compliant",
            "guid": "90ce65de-8e13-4f9c-abd4-69266abca264",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "ha": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Enable cluster autoscaling",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O GitOps funciona usando o Git como uma única fonte de verdade para infraestrutura e aplicativos declarativos",
            "detail": "On Azure you can for instance use Azure Arc for Kubernetes but also directly GitOps addon for AKS",
            "documentation": [
                {
                    "title": "Use Flux v2 addon for AKS",
                    "url": "https://learn.microsoft.com/en-us/azure/azure-arc/kubernetes/tutorial-use-gitops-flux2"
                },
                {
                    "title": "What is Azure Arc enabled Kubernetes?",
                    "url": "https://docs.microsoft.com/azure/azure-arc/kubernetes/overview"
                },
                {
                    "title": "Guide To GitOps",
                    "url": "https://www.weave.works/technologies/gitops"
                }
            ],
            "guid": "0102ce16-ee30-41e6-b882-e52e4621dd68",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Use GitOps to deploy workloads in your cluster",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Em vez de GitOps (ou além disso), você pode usar CI/CD para implantar cargas de trabalho/ferramentas em seu cluster",
            "documentation": [
                {
                    "title": "Automated Deployments for Azure Kubernetes Service (Preview)",
                    "url": "https://learn.microsoft.com/en-gb/azure/aks/automated-deployments"
                },
                {
                    "title": "Build and deploy to Azure Kubernetes Service with Azure Pipelines",
                    "url": "https://learn.microsoft.com/en-gb/azure/aks/devops-pipeline?pivots=pipelines-yaml"
                },
                {
                    "title": "Tutorial: Deploy from GitHub to Azure Kubernetes Service using Jenkins",
                    "url": "https://learn.microsoft.com/en-gb/azure/developer/jenkins/deploy-from-github-to-aks"
                }
            ],
            "guid": "cd943950-e336-4906-a719-d2128c8d78e4",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Implement CI/CD to deploy workloads in your cluster",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O ecossistema do Kubernetes é fortalecido por muitas ferramentas que facilitam a operação.  Aqui estão alguns",
            "guid": "fd926057-60e1-4d6c-afc2-0f03b5ab3763",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Improve efficiency with K8S Tools",
            "tools": [
                {
                    "title": "OpenLens",
                    "url": "https://github.com/MuhammedKalkan/OpenLens"
                },
                {
                    "title": "Helm",
                    "url": "https://helm.sh"
                },
                {
                    "title": "kubectl aliases",
                    "url": "https://github.com/ahmetb/kubectl-aliases"
                },
                {
                    "title": "kubectx",
                    "url": "https://github.com/ahmetb/kubectx"
                },
                {
                    "title": "k9s",
                    "url": "https://k9scli.io/"
                }
            ],
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "É recomendável manter todos os aplicativos em um namespace diferente do padrão",
            "documentation": [
                {
                    "title": "Using multiple namespaces",
                    "url": "https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/?ref=www.the-aks-checklist.com#when-to-use-multiple-namespaces"
                }
            ],
            "guid": "13bb9e32-6f48-4747-9531-0147f20f4b03",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Don't use the default namespace",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Um conjunto comum de rótulos permite que as ferramentas funcionem de forma interoperável, descrevendo objetos de uma maneira comum que todas as ferramentas possam entender. Por exemplo, os recursos devem ter rótulos técnicos, comerciais e de segurança. ",
            "documentation": [
                {
                    "title": "Recommended labels",
                    "url": "https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels/"
                }
            ],
            "guid": "13bb9e32-6f48-4747-9531-0147f20f4b04",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Apply different types of labels to all resources",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Personalizar a configuração do nó permite que você defina ou ajuste as configurações do sistema operacional (SO), os pools de nós ou os parâmetros do kubelet para atender às necessidades das cargas de trabalho.",
            "detail": "When you create an AKS cluster or add a node pool to your cluster, you can customize a subset of commonly used OS and kubelet settings.",
            "documentation": [
                {
                    "title": "Customize node configuration for Azure Kubernetes Service (AKS) node pools",
                    "url": "https://learn.microsoft.com/azure/aks/custom-node-configuration"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.austoscalerProfile)) | distinct id,compliant",
            "guid": "831c2872-c693-4b39-a887-a561bada49bc",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.austoscalerProfile)) | distinct id,compliant",
                    "ha": 1,
                    "severity": "Low"
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null
            ],
            "title": "Fine tune your node configuration",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Você pode usar command invoke para acessar clusters privados sem precisar configurar uma VPN ou Express Route",
            "detail": "Using command invoke allows you to remotely invoke commands like kubectl and helm on your private cluster through the Azure API without directly connecting to the cluster.",
            "documentation": [
                {
                    "title": "Use command invoke to access a private AKS",
                    "url": "https://learn.microsoft.com/azure/aks/command-invoke"
                }
            ],
            "guid": "d7672c26-7602-4482-85a4-14527fbe855c",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Consider using AKS command invoke on private clusters",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Com os insights de contêiner, você pode usar os gráficos de desempenho e o status de integridade para monitorar a carga de trabalho dos clusters do Kubernetes hospedados no AKS",
            "documentation": [
                {
                    "title": "Monitor your Kubernetes cluster performance",
                    "url": "https://learn.microsoft.com/azure/azure-monitor/containers/container-insights-analyze"
                }
            ],
            "guid": "4621dd68-c5a5-4be2-bdb1-1726769ef669",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Monitorização",
            "tags": [
                null,
                null
            ],
            "title": "Monitor CPU and memory utilization of the nodes",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Para ajudar a solucionar problemas de seu aplicativo e serviços, talvez seja necessário exibir os logs gerados pelos componentes mestres. Lembre-se de que, se você não habilitar esses logs, não haverá como a Microsoft recuperá-los para você",
            "documentation": [
                {
                    "title": "Enable and review Kubernetes master node logs",
                    "url": "https://docs.microsoft.com/azure/aks/view-control-plane-logs"
                },
                {
                    "title": "Monitoring Azure Kubernetes Service (AKS) with Azure Monitor",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/monitor-aks"
                }
            ],
            "guid": "5b56ad48-408f-4e72-934c-476ba280dcf5",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "ha": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Send master logs (aka API logs) to Azure Monitor or your preferred log management solution",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "A otimização do tamanho do nó pode levar a muitos benefícios, incluindo otimização de custos, desempenho otimizado e alocação adequada de recursos",
            "documentation": [
                {
                    "title": "Which VM size should I choose as AKS node?",
                    "url": "https://blog.cloudtrooper.net/2020/10/23/which-vm-size-should-i-choose-as-aks-node/"
                }
            ],
            "guid": "5ae124ba-34df-4585-bcdc-e9bd3bb0cdb3",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Consider an appropriate node size, not too large or too small",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O assistente do Azure pode aprimorar o monitoramento do ambiente e ajudar a melhorar as operações do cluster reduzindo custos etc",
            "documentation": [
                {
                    "title": "Azure advisor get started",
                    "url": "https://docs.microsoft.com/azure/advisor/advisor-get-started"
                }
            ],
            "guid": "337453a3-cc63-4963-9a65-22ac19e80696",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null,
                null,
                null,
                null,
                null
            ],
            "title": "Regularly check Azure Advisor for recommendations on your cluster",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Existem várias ferramentas que podem facilitar muito a criação de arquivos de manifesto k8s e podem ajudar na eficiência operacional",
            "documentation": [
                {
                    "title": "what is prettier",
                    "url": "https://prettier.io/"
                }
            ],
            "guid": "b78f2dec-d75e-44c3-937a-7509fd7a54f1",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Write manifests following good practices using dedicated tools",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Periodicamente, talvez seja necessário alternar esses certificados por motivos de segurança ou política. Por exemplo, você pode ter uma política para alternar todos os seus certificados a cada 90 dias.",
            "documentation": [
                {
                    "title": "Certificate rotation in Azure Kubernetes Service (AKS)",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/certificate-rotation"
                }
            ],
            "guid": "3aa70560-e7e7-4968-be3d-628af35b2ced",
            "optionalFields": {
                "score": {
                    "simple": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Enable AKS auto-certificate rotation",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O monitoramento dos logs do cluster pode ajudar a evitar problemas e identificar áreas de melhorias",
            "documentation": [
                {
                    "title": "Container insights overview",
                    "url": "https://learn.microsoft.com/en-us/azure/azure-monitor/containers/container-insights-overview"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.omsagent) and properties.addonProfiles.omsagent.enabled==true) | distinct id,compliant",
            "guid": "eaa8dc4a-2436-47b3-9697-15b1752beee0",
            "priority": "High",
            "service": "AKS",
            "subcategory": "Monitorização",
            "tags": [
                null,
                null
            ],
            "title": "Store and analyze your cluster logs with Container Insights (or other tools like Telegraf/ElasticSearch)",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O esquema ContainerLogV2 melhora os dados relacionados aos logs do contêiner (como namespace, nome do pod, nome do contêiner etc.) e permite que você consulte os logs usando esses campos",
            "documentation": [
                {
                    "title": "Enable the ContainerLogV2 schema",
                    "url": "https://learn.microsoft.com/en-gb/azure/azure-monitor/containers/container-insights-logging-v2"
                }
            ],
            "guid": "62f89719-db42-4cd0-824f-82ac7d62d9ac",
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Enable ContainerLogV2 schema for logging",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Os nós virtuais com ACI podem ajudar a acelerar o dimensionamento",
            "documentation": [
                {
                    "title": "Create and configure an AKS cluster to use virtual nodes",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/virtual-nodes"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.aciConnectorLinux) and properties.addonProfiles.aciConnectorLinux.enabled==true) | distinct id,compliant",
            "guid": "c755562f-2b4e-4456-9b4d-874a748b662e",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.aciConnectorLinux) and properties.addonProfiles.aciConnectorLinux.enabled==true) | distinct id,compliant",
                    "scale": 1,
                    "simple": -1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Custar",
            "tags": [
                null,
                null
            ],
            "title": "Consider AKS virtual node for quick bursting",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Os nodepools spot podem ajudar no gerenciamento de custos",
            "documentation": [
                {
                    "title": "Add an Azure Spot node pool to an AKS cluster",
                    "url": "https://docs.microsoft.com/azure/aks/spot-node-pool"
                }
            ],
            "guid": "c5a5b252-1e44-4a59-a9d2-399c4d7b68d0",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Custar",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Consider spot node pools for non time-sensitive workloads",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Os alertas podem fornecer avisos antecipados de problemas, etc. em seu cluster",
            "documentation": [
                {
                    "title": "Metric alert rules in Container insights",
                    "url": "https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-metric-alerts"
                }
            ],
            "guid": "67f7a9ed-5b31-4f38-a3f3-9812b2463cff",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Alertando",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Configure alerts on the most critical metrics (see Container Insights for recommendations)",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O monitoramento dessas portas é importante por motivos de segurança",
            "documentation": [
                {
                    "title": "Use a public standard load balancer in Azure Kubernetes Service",
                    "url": "https://docs.microsoft.com/azure/aks/load-balancer-standard"
                }
            ],
            "guid": "95951d87-1a2f-4a45-833c-2fc62d23c44d",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "If not using egress filtering with AzFW/NVA, monitor standard ALB allocated SNAT ports",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Saiba como solucionar problemas de integridade de recursos",
            "documentation": [
                {
                    "title": "Azure Kubernetes Services troubleshooting documentation",
                    "url": "https://learn.microsoft.com/en-us/troubleshoot/azure/azure-kubernetes/welcome-azure-kubernetes"
                }
            ],
            "guid": "74c2ee76-569b-4a79-a57e-dedf91b022c9",
            "optionalFields": {
                "score": {
                    "ha": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Monitorização",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Subscribe to resource health notifications for your AKS cluster",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "O AKS emite determinados eventos que permitem que ele assine o EventGrid, que pode ser usado para automação",
            "documentation": [
                {
                    "title": "AKS as an Event Grid source",
                    "url": "https://learn.microsoft.com/azure/event-grid/event-schema-aks"
                }
            ],
            "guid": "9583c0f6-6083-43f6-aa6b-df7102c901bb",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Escalabilidade",
            "tags": [
                null,
                null
            ],
            "title": "Consider subscribing to EventGrid Events for AKS automation",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Desenvolver práticas próprias de governança para garantir que nenhuma alteração seja realizada pelos operadores no RG do nó (também conhecido como 'infra RG')",
            "documentation": [
                {
                    "title": "AKS FAQ",
                    "url": "https://docs.microsoft.com/azure/aks/faq"
                }
            ],
            "guid": "ed0fda7f-211b-47c7-8b6e-c18873fb473c",
            "optionalFields": {
                "score": {
                    "security": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Develop own governance practices to make sure no changes are performed by operators in the node RG (aka 'infra RG')",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Operações",
            "description": "Você nunca está pronto quando algo ruim acontece e depurar um cluster kubernetes pode ser complicado. Algumas caixas de ferramentas podem ser implantadas para ajudá-lo a encontrar e corrigir os problemas mais comuns",
            "documentation": [
                {
                    "title": "Inspektor Gadget",
                    "url": "https://www.inspektor-gadget.io/"
                }
            ],
            "guid": "f1d2d2f4-53a2-5f1b-9d1a-3a907b6844a5",
            "optionalFields": {
                "score": {
                    "security": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Install debuging tools on your cluster",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Para dimensionar rapidamente o cluster do AKS, você pode integrar-se às ACI (Instâncias de Contêiner do Azure)",
            "detail": "Kubernetes has built-in components to scale the replica and node count. However, if your application needs to rapidly scale, the horizontal pod autoscaler may schedule more pods than can be provided by the existing compute resources in the node pool.",
            "documentation": [
                {
                    "title": "Burst to Azure Container Instances",
                    "url": "https://learn.microsoft.com/en-gb/azure/aks/concepts-scale#burst-to-azure-container-instances"
                }
            ],
            "guid": "c88681ab-bb2b-46d1-9ea6-72564b75429a",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Burst serverless with Azure Container Instances and Virtual Nodes",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "que tipo de nós de trabalho devo usar e quantos deles é uma questão crítica que requer a análise das cargas de trabalho implantadas em seu cluster para obter os melhores valores dele",
            "detail": "Choosing on one hand between easy management and big blast radius, and on the other end to focus on high replication, low impact but worse resources optimization ",
            "documentation": [
                {
                    "title": "Choosing a worker node size",
                    "url": "https://learnk8s.io/kubernetes-node-size"
                },
                {
                    "title": "Choose the right storage type",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-storage#choose-the-appropriate-storage-type"
                }
            ],
            "guid": "7f8b07c5-882b-45ba-9ec9-bcc29b4721ff",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Sizing of the nodes",
            "tools": [
                {
                    "title": "Kubernetes instance calculator",
                    "url": "https://learnk8s.io/kubernetes-instance-calculator"
                }
            ],
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Beneficie-se do melhor preço, desempenho de computação e menor utilização de energia do ARM64 em pools de nós do AKS.",
            "documentation": [
                {
                    "title": "Add an ARM64 node pool",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/use-multiple-node-pools#add-an-arm64-node-pool"
                }
            ],
            "guid": "2a5f0cab-92b2-46dc-81a6-d358f7fd062a",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Use ARM64 nodes when possible",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Planeje e aplique cotas de recursos no nível do namespace. Se os pods não definirem solicitações e limites de recursos, rejeite a implantação. Monitore o uso de recursos e ajuste as cotas conforme necessário.",
            "detail": "Resource requests and limits are placed in the pod specification. These limits are used by the Kubernetes scheduler at deployment time to find an available node in the cluster. But developers can forget them and thus impact other applications by over-consuming resources of the cluster",
            "documentation": [
                {
                    "title": "Enforce resource quotas",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-scheduler#enforce-resource-quotas"
                },
                {
                    "title": "Resources quotas",
                    "url": "https://kubernetes.io/docs/concepts/policy/resource-quotas/"
                }
            ],
            "guid": "769ef669-1a48-435a-a942-223ece80b123",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Recursos",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Enforce resource quotas for namespaces",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": " Um LimitRange é uma política para restringir alocações de recursos (para Pods ou Contêineres) em um namespace. É útil garantir que os pods não se esqueçam de declarar limites de solicitação",
            "documentation": [
                {
                    "title": "LimitRange",
                    "url": "https://kubernetes.io/docs/concepts/policy/limit-range/"
                }
            ],
            "guid": "b74ea93b-598d-48e0-bb26-762b015602e1",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Namespaces should have LimitRange",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Defina limites e solicitações de CPU e memória para todos os contêineres. Ele evita vazamentos de memória e uso excessivo da CPU e protege toda a plataforma",
            "detail": " When you specify limits for CPU and memory, each takes a different action when it reaches the specified limit. With CPU limits, the container is throttled from using more than its specified limit. With memory limits, the pod is restarted if it reaches its limit. The pod might be restarted on the same host or a different host within the cluster.",
            "documentation": [
                {
                    "title": "Define pod resource requests and limits",
                    "url": "https://learn.microsoft.com/en-gb/azure/aks/developer-best-practices-resource-management#define-pod-resource-requests-and-limits"
                },
                {
                    "title": "Assign Memory Resources to container",
                    "url": "https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource/"
                }
            ],
            "guid": "4868aa30-95a9-49fd-867e-57e70cb0d1d5",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Set memory limits and requests for all containers",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Para manter a disponibilidade dos aplicativos, defina PDBs (Orçamentos de Disrupção de Pod) para garantir que um número mínimo de pods esteja disponível no cluster.",
            "detail": "At some point in time, Kubernetes might need to evict pods from a host. There are two types of evictions: voluntary and involuntary disruptions. Involuntary disruptions can be caused by hardware failure, network partitions, kernel panics, or a node being out of resources. Voluntary evictions can be caused by performing maintenance on the cluster, the Cluster Autoscaler deallocating nodes, or updating pod templates. To minimize the impact to your application, you can set a PodDisruptionBudget to ensure uptime of the application when pods need to be evicted. A PodDisruptionBudget allows you to set a policy on the minimum available and maximum unavailable pods during voluntary eviction events. An example of a voluntary eviction would be when draining a node to perform maintenance on the node.",
            "documentation": [
                {
                    "title": "Plan for availability using pod disruption budgets",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-scheduler#plan-for-availability-using-pod-disruption-budgets"
                },
                {
                    "title": "Specifying a Disruption Budget for your Application",
                    "url": "https://kubernetes.io/docs/tasks/run-application/configure-pdb/"
                }
            ],
            "guid": "3c763963-7a55-42d5-a15e-401955387e5c",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "ha": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Alta disponibilidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use Disruption Budgets in your pod and deployment definitions",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Essas ferramentas podem ser muito valiosas para alocação de custos, especialmente no caso de multilocação",
            "documentation": [
                {
                    "title": "cost governance with kubecost",
                    "url": "https://docs.microsoft.com/azure/cloud-adoption-framework/scenarios/aks/eslz-cost-governance-with-kubecost"
                }
            ],
            "guid": "f82cb8eb-8c0a-4a63-a25a-4956eaa8dc4a",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Custar",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Use an external application such as kubecost to allocate costs to different users",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "A GPU A100 da Nvidia pode ser dividida em até sete instâncias independentes. Cada instância tem sua própria memória e multiprocessador de fluxo (SM).",
            "documentation": [
                {
                    "title": "Multi-instance GPU Node pool",
                    "url": "https://learn.microsoft.com/azure/aks/gpu-multi-instance"
                }
            ],
            "guid": "87e651ea-bc4a-4a87-a6df-c06a4b570ebc",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Custar",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "When required use multi-instance partioning GPU on AKS Clusters",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Suas cargas de trabalho do AKS podem não precisar ser executadas continuamente, por exemplo, um cluster de desenvolvimento que tem pools de nós executando cargas de trabalho específicas.",
            "documentation": [
                {
                    "title": "Start and stop an Azure Kubernetes Service (AKS) node pool",
                    "url": "https://learn.microsoft.com/azure/aks/start-stop-nodepools"
                }
            ],
            "guid": "2b72a08b-0410-4cd6-9093-e068a5cf27e8",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Custar",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "If running a Dev/Test cluster use NodePool Start/Stop",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "Os instantâneos do pool de nós permitem que você tire um instantâneo de configuração do pool de nós e, em seguida, crie novos pools de nós ou novos clusters com base nesse instantâneo enquanto essa configuração e a versão do Kubernetes forem compatíveis.",
            "documentation": [
                {
                    "title": "AKS node pool snapshot",
                    "url": "https://learn.microsoft.com/azure/aks/node-pool-snapshot"
                }
            ],
            "guid": "64d1a846-e28a-4b6b-9a33-22a635c15a21",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "If required scale NodePool snapshots",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": "As VMs/nós do Azure têm cotas por assinatura. Certifique-se de ter planejado essas cotas e prepare-se proativamente para solicitar mais, se necessário",
            "documentation": [
                {
                    "title": "Azure subscription and service limits, quotas, and constraints",
                    "url": "https://learn.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits"
                }
            ],
            "guid": "081a5417-4158-433e-a3ad-3c2de733165c",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Recursos",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Ensure your subscription has enough quota to scale out your nodepools",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Resource_Management",
            "description": " O Modo de Redução Horizontal permite que você decida se deseja excluir ou desalocar os nós no cluster do AKS (Serviço de Kubernetes do Azure) após a redução vertical.",
            "documentation": [
                {
                    "title": "Use Scale-down Mode to delete/deallocate nodes",
                    "url": "https://learn.microsoft.com/azure/aks/scale-down-mode"
                }
            ],
            "guid": "4d3dfbab-9924-4831-a68d-fdf0d72f462c",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Custar",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use scale down mode to delete/delallocate nodes",
            "waf": "Excelência Operacional"
        },
        {
            "category": "Armazenamento",
            "description": "Entenda as necessidades do seu aplicativo para escolher o armazenamento certo. Use armazenamento baseado em SSD de alto desempenho para cargas de trabalho de produção. Planeje o armazenamento baseado em rede quando houver necessidade de várias conexões simultâneas.",
            "documentation": [
                {
                    "title": "Storage considerations for Azure Kubernetes Service",
                    "url": "https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/app-platform/aks/storage"
                },
                {
                    "title": "Choose the right storage type",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-storage#choose-the-appropriate-storage-type"
                }
            ],
            "guid": "4c20c4bd-a7e3-449f-9597-4939a3aeafe7",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Choose the right storage type"
        },
        {
            "category": "Armazenamento",
            "description": "Cada tamanho de nó suporta um número máximo de discos. Diferentes tamanhos de nó também fornecem diferentes quantidades de armazenamento local e largura de banda de rede. Planeje as demandas do aplicativo para implantar o tamanho apropriado dos nós.",
            "detail": "Different types and sizes of nodes are available. Each node (underlying VM) size provides a different amount of core resources such as CPU and memory. These VM sizes have a maximum number of disks that can be attached. Storage performance also varies between VM sizes for the maximum local and attached disk IOPS (input/output operations per second). If your applications require Azure Disks as their storage solution, plan for and choose an appropriate node VM size. The amount of CPU and memory isn't the only factor when you choose a VM size. The storage capabilities are also important.",
            "documentation": [
                {
                    "title": "Size the nodes for storage needs",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-storage#size-the-nodes-for-storage-needs"
                }
            ],
            "guid": "18707174-fa23-4935-b463-8f9982629b35",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Size the nodes for storage needs"
        },
        {
            "category": "Armazenamento",
            "description": "Para reduzir a sobrecarga de gerenciamento e permitir que você dimensione, não crie e atribua volumes persistentes estaticamente. Use o provisionamento dinâmico. Em suas classes de armazenamento, defina a política de recuperação apropriada para minimizar os custos de armazenamento desnecessários depois que os pods forem excluídos.",
            "documentation": [
                {
                    "title": "Dynamically provision volumes",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-storage#dynamically-provision-volumes"
                }
            ],
            "guid": "77bda7ce-1fcf-4735-bd3d-1b3a83a9e484",
            "optionalFields": {
                "score": {}
            },
            "priority": "Low",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Dynamically provision volumes"
        },
        {
            "category": "Armazenamento",
            "description": "Faça backup de seus dados usando uma ferramenta apropriada para seu tipo de armazenamento, como Velero ou Azure Site Recovery",
            "detail": "Understand the limitations of the different approaches to data backups and if you need to quiesce your data prior to snapshot. Data backups don't necessarily let you restore your application environment of cluster deployment.",
            "documentation": [
                {
                    "title": "Secure and back up your data",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-storage#secure-and-back-up-your-data"
                }
            ],
            "guid": "13d493b9-2cdc-4632-b188-6882b81da0ed",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Secure and back up your data"
        },
        {
            "category": "Armazenamento",
            "description": "Sempre que possível, não armazene o estado do serviço dentro do contêiner. Em vez disso, use uma PaaS (plataforma como serviço) do Azure que dê suporte à replicação de várias regiões.",
            "detail": "Service state refers to the in-memory or on-disk data that a service requires to function. State includes the data structures and member variables that the service reads and writes. Depending on how the service is architected, the state might also include files or other resources that are stored on the disk. For example, the state might include the files a database uses to store data and transaction logs.",
            "documentation": [
                {
                    "title": "Remove service state from inside containers",
                    "url": "https://docs.microsoft.com/azure/aks/operator-best-practices-multi-region#remove-service-state-from-inside-containers"
                }
            ],
            "guid": "9f7547c1-747d-4c56-868a-714435bd19dd",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Armazenamento",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Avoid keeping state in the cluster, and store data outside (AzStorage, AzSQL, Cosmos, etc)",
            "waf": "Desempenho"
        },
        {
            "category": "Armazenamento",
            "description": " Com discos do sistema operacional efêmero, você vê menor latência de leitura/gravação no disco do sistema operacional dos nós do agente do AKS, pois o disco está anexado localmente.",
            "detail": "You will also get faster cluster operations like scale or upgrade thanks to faster re-imaging and boot times",
            "documentation": [
                {
                    "title": "Everything you want to know about ephemeral OS disks and AKS",
                    "url": "https://learn.microsoft.com/en-us/samples/azure-samples/aks-ephemeral-os-disk/aks-ephemeral-os-disk/"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | project id,resourceGroup,name,pools=properties.agentPoolProfiles | mvexpand pools | extend compliant = (pools.osDiskType=='Ephemeral') | project id,name=strcat(name,'-',pools.name), resourceGroup, compliant",
            "guid": "24367b33-6971-45b1-952b-eee0b9b588de",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "graph": "where type=='microsoft.containerservice/managedclusters' | project id,resourceGroup,name,pools=properties.agentPoolProfiles | mvexpand pools | extend compliant = (pools.osDiskType=='Ephemeral') | project id,name=strcat(name,'-',pools.name), resourceGroup, compliant",
                    "scale": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Armazenamento",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Use ephemeral OS disks",
            "waf": "Desempenho"
        },
        {
            "category": "Armazenamento",
            "description": "Os discos ultra do Azure oferecem alta taxa de transferência, IOPS alto e armazenamento em disco consistente de baixa latência para seus aplicativos com estado.",
            "detail": "One major benefit of ultra disks is the ability to dynamically change the performance of the SSD along with your workloads without the need to restart your agent nodes. Ultra disks are suited for data-intensive workloads.",
            "documentation": [
                {
                    "title": "Use Azure ultra disks on AKS",
                    "url": "https://learn.microsoft.com/azure/aks/use-ultra-disks"
                }
            ],
            "guid": "39c486ce-d5af-4062-89d5-18bb5fd795db",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "scale": 1
                }
            },
            "priority": "Low",
            "service": "AKS",
            "subcategory": "Armazenamento",
            "tags": [
                null,
                null,
                null
            ],
            "title": "For hyper performance storage option use Ultra Disks on AKS",
            "waf": "Desempenho"
        },
        {
            "category": "Armazenamento",
            "description": "Sempre que possível, não armazene o estado do serviço dentro do contêiner. Em vez disso, use uma PaaS (plataforma como serviço) do Azure que dê suporte à replicação de várias regiões.",
            "detail": "Service state refers to the in-memory or on-disk data that a service requires to function. State includes the data structures and member variables that the service reads and writes. Depending on how the service is architected, the state might also include files or other resources that are stored on the disk. For example, the state might include the files a database uses to store data and transaction logs.",
            "documentation": [
                {
                    "title": "Remove service state from inside containers",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/operator-best-practices-multi-region#remove-service-state-from-inside-containers"
                }
            ],
            "guid": "b5f3808d-3a6a-42a5-adde-7bb34e047169",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Avoid keeping state in the cluster, and store data outside (AzStorage, AzSQL, Cosmos, etc)"
        },
        {
            "category": "Armazenamento",
            "description": "Se estiver usando Discos e AZs do Azure, considere ter pools de nós dentro de uma zona para o disco LRS com VolumeBindingMode:WaitForFirstConsumer para provisionar o armazenamento na zona direita ou usar o disco ZRS para pools de nós que abrangem várias zonas",
            "documentation": [
                {
                    "title": "Azure disk availability zone support",
                    "url": "https://docs.microsoft.com/azure/aks/availability-zones#azure-disk-availability-zone-support"
                }
            ],
            "guid": "83958a8c-2689-4b32-ab57-cfc64546135a",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Armazenamento",
            "tags": [
                null,
                null,
                null
            ],
            "title": "If using Azure Disks and AZs, consider having nodepools within a zone for LRS disk",
            "waf": "Desempenho"
        },
        {
            "category": "Armazenamento",
            "description": "Para discos não efêmeros, use IOPS alto e discos de sistema operacional maiores para os nós ao executar muitos pods/nós, pois isso requer alto desempenho para executar vários pods e gerará logs enormes com limites de rotação de log padrão do AKS",
            "documentation": [
                {
                    "title": "Azure disk availability zone support",
                    "url": "Azure managed disk types"
                }
            ],
            "guid": "fc4972cc-3cd2-45bf-a707-6e9eab4bed32",
            "optionalFields": {
                "score": {
                    "cost": -1,
                    "scale": 1
                }
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null,
                null
            ],
            "title": "For non-ephemeral disks, use high IOPS and larger OS disks for the nodes when running many pods/node"
        },
        {
            "category": "Windows",
            "description": "Windows tem regras de compatibilidade estritas, em que a versão do sistema operacional do host deve corresponder à versão do sistema operacional da imagem base do contêiner. Há suporte apenas para contêineres do Windows com um sistema operacional de contêiner do Windows Server 2019.",
            "documentation": [
                {
                    "title": "Windows container version compatibility",
                    "url": "https://docs.microsoft.com/virtualization/windowscontainers/deploy-containers/version-compatibility"
                },
                {
                    "title": "Limitations of Windows containers",
                    "url": "https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#supported-functionality-and-limitations"
                }
            ],
            "guid": "4d3e8a06-b724-43a3-b9b9-328a08325c61",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Map the base image to node OS"
        },
        {
            "category": "Windows",
            "description": "TerminationGracePeriod não é implementado em contêineres do Windows",
            "documentation": [
                {
                    "title": "Understand pod lifecycle",
                    "url": "https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-terminating-with-grace"
                },
                {
                    "title": "Limitations of Windows containers",
                    "url": "https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#supported-functionality-and-limitations"
                }
            ],
            "guid": "fce3ccf3-5f62-4ad6-b945-845362777529",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Prepare your application for an abrupt kill"
        },
        {
            "category": "Windows",
            "description": "Os contêineres do Windows não dão suporte à elevação de privilégio",
            "documentation": [
                {
                    "title": "Limitations of Windows containers",
                    "url": "https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#supported-functionality-and-limitations"
                }
            ],
            "guid": "bd773172-40dc-4502-b284-137c70d77bc9",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Don't use privileged containers"
        },
        {
            "category": "Windows",
            "description": "Não há ações de despejo OOM tomadas pelo kubelet. O Windows sempre trata todas as alocações de memória do modo de usuário como virtuais e os arquivos de paginação são obrigatórios. Se a memória estiver superprovisionada e toda a memória física estiver esgotada, a paginação poderá diminuir o desempenho.",
            "documentation": [
                {
                    "title": "Limitations of Windows containers",
                    "url": "https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#supported-functionality-and-limitations"
                }
            ],
            "guid": "dea429d5-2c10-480c-85a1-9d9d0c4afc3d",
            "optionalFields": {
                "score": {}
            },
            "priority": "Medium",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Watch for memory usage"
        },
        {
            "category": "Windows",
            "description": "Os clusters do AKS com pools de nós do Windows devem usar o modelo de rede CNI (avançado) do Azure. A rede Kubenet (básica) não é suportada. ",
            "documentation": [
                {
                    "title": "What network plug-ins are supported?",
                    "url": "https://docs.microsoft.com/azure/aks/windows-node-limitations#what-network-plug-ins-are-supported"
                }
            ],
            "guid": "3922e5b0-fa6b-4020-a92e-2e0d76338e95",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Implement CNI network mode"
        },
        {
            "category": "Windows",
            "description": "Os nós do Windows Server no AKS devem ser atualizados para obter as correções e atualizações de patch mais recentes. As atualizações do Windows não estão habilitadas em nós no AKS. O AKS lança novas imagens de pool de nós assim que os patches estão disponíveis, é responsabilidade do cliente atualizar os pools de nós para se manter atualizado sobre patches e hotfix. ",
            "documentation": [
                {
                    "title": "Windows container version compatibility",
                    "url": "https://docs.microsoft.com/virtualization/windowscontainers/deploy-containers/version-compatibility?tabs=windows-server-20H2%2Cwindows-10-20H2"
                },
                {
                    "title": "How do patch my Windows nodes? ",
                    "url": "https://docs.microsoft.com/azure/aks/windows-node-limitations#how-do-patch-my-windows-nodes"
                }
            ],
            "guid": "67138b82-0102-4ce1-9ee3-01e6e882e52e",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null
            ],
            "title": "Keep windows containers patch level in sync with host patch level",
            "waf": "Operações"
        },
        {
            "category": "Windows",
            "description": "No momento, não há suporte para políticas de rede, certifique-se de que os aplicativos em contêineres tenham uma camada de proteção, como autenticação ",
            "documentation": [
                {
                    "title": "Limitations of Windows containers",
                    "url": "https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#supported-functionality-and-limitations"
                }
            ],
            "guid": "74e42965-8bbd-46fb-b027-ccad9c3933a4",
            "optionalFields": {
                "score": {}
            },
            "priority": "High",
            "service": "AKS",
            "tags": [
                null,
                null
            ],
            "title": "Secure the traffic of your containers"
        },
        {
            "category": "Windows",
            "description": "As Contas de Serviço Gerenciado de Grupo (GMSA) são uma conta de domínio gerenciada para vários servidores que fornece gerenciamento automático de senhas, gerenciamento simplificado de SPN (nome da entidade de serviço) e a capacidade de delegar o gerenciamento a outros administradores.",
            "documentation": [
                {
                    "title": "Enable Group Managed Service Accounts (GMSA) for your Windows Server nodes",
                    "url": "https://docs.microsoft.com/en-gb/azure/aks/use-group-managed-service-accounts"
                }
            ],
            "guid": "e1123a7c-a333-4eb4-a120-4ee3f293c9f3",
            "optionalFields": {
                "score": {
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Identidade",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "Enable Group Managed Service Accounts (GMSA) for your Windows Server nodes",
            "waf": "Segurança"
        },
        {
            "category": "Windows",
            "description": "Os contêineres HostProcess/Privileged estendem o modelo de contêiner do Windows para habilitar uma variedade mais ampla de cenários de gerenciamento de cluster do Kubernetes.",
            "documentation": [
                {
                    "title": "Use Windows HostProcess containers",
                    "url": "https://learn.microsoft.com/azure/aks/use-windows-hpc"
                }
            ],
            "guid": "ab5351f6-383a-45ed-9c5e-b143b16db40a",
            "optionalFields": {
                "score": {
                    "cost": 1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Desenvolvimento",
            "tags": [
                null,
                null,
                null
            ],
            "title": "If required for AKS Windows workloads, HostProcess containers can be used",
            "waf": "Fiabilidade"
        },
        {
            "category": "Windows",
            "description": "Adicionar taints, tolerations e seletores de nó ajudará a evitar que os pods sejam agendados no pool de nós do sistema operacional errado",
            "documentation": [
                {
                    "title": "Adapt apps for mixed-OS Kubernetes clusters using node selectors or taints and tolerations",
                    "url": "https://learn.microsoft.com/en-us/azure/aks/hybrid/adapt-apps-mixed-os-clusters"
                }
            ],
            "guid": "c1881370-6f7c-44c0-b4e5-14648d2457ed",
            "optionalFields": {
                "score": {
                    "ha": 1,
                    "simple": -1
                }
            },
            "priority": "low",
            "service": "AKS",
            "subcategory": "Conformidade",
            "tags": [
                null,
                null,
                null
            ],
            "title": "Taint Windows nodes",
            "waf": "Operações"
        },
        {
            "category": "Windows",
            "description": "Para nós do AKS Windows 2019 e 2022, as Políticas de Rede Calico podem ser usadas",
            "documentation": [
                {
                    "title": "Secure traffic between pods using network policies",
                    "url": "https://learn.microsoft.com/azure/aks/use-network-policies"
                }
            ],
            "graph": "where type=='microsoft.containerservice/managedclusters' | where isnotnull(properties.apiServerAccessProfile.enablePrivateCluster) | extend compliant = (properties.apiServerAccessProfile.enablePrivateCluster==true) | distinct id, compliant",
            "guid": "ce7f2a7c-297c-47c6-adea-a6ff838db665",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | where isnotnull(properties.apiServerAccessProfile.enablePrivateCluster) | extend compliant = (properties.apiServerAccessProfile.enablePrivateCluster==true) | distinct id, compliant",
                    "security": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Segurança",
            "tags": [
                null,
                null,
                null,
                null
            ],
            "title": "For Windows 2019 and 2022 AKS nodes Calico Network Policies can be us",
            "waf": "Segurança"
        },
        {
            "category": "Windows",
            "description": "Para cargas de trabalho do Windows, use a Rede Acelerada",
            "documentation": [
                {
                    "title": "What is Accelerated Networking?",
                    "url": "https://learn.microsoft.com/azure/virtual-network/accelerated-networking-overview"
                }
            ],
            "guid": "7bacd7b9-c025-4a9d-a5d2-25d6bc5439d9",
            "optionalFields": {
                "score": {
                    "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnull(properties.addonProfiles.httpApplicationRouting) or properties.addonProfiles.httpApplicationRouting.enabled==false) | distinct id,compliant",
                    "scale": 1,
                    "simple": -1
                }
            },
            "priority": "Medium",
            "service": "AKS",
            "subcategory": "Práticas recomendadas",
            "tags": [
                null,
                null,
                null
            ],
            "title": "For Windows workloads use Accelerated Networking",
            "waf": "Desempenho"
        }
    ],
    "metadata": {
        "name": "The AKS Checklist",
        "state": "preview",
        "timestamp": "July 14, 2024",
        "waf": "none"
    },
    "severities": [
        {
            "name": "Alto"
        },
        {
            "name": "Média"
        },
        {
            "name": "Baixo"
        }
    ],
    "status": [
        {
            "description": "Esta verificação ainda não foi analisada",
            "name": "Não verificado"
        },
        {
            "description": "Há um item de ação associado a essa verificação",
            "name": "Abrir"
        },
        {
            "description": "Essa verificação foi verificada e não há mais itens de ação associados a ela",
            "name": "Cumprido"
        },
        {
            "description": "Recomendação compreendida, mas não necessária pelos requisitos atuais",
            "name": "Não é necessário"
        },
        {
            "description": "Não aplicável para o projeto atual",
            "name": "N/A"
        }
    ],
    "waf": [
        {
            "name": "Fiabilidade"
        },
        {
            "name": "Segurança"
        },
        {
            "name": "Custar"
        },
        {
            "name": "Operações"
        },
        {
            "name": "Desempenho"
        }
    ],
    "yesno": [
        {
            "name": "Sim"
        },
        {
            "name": "Não"
        }
    ]
}