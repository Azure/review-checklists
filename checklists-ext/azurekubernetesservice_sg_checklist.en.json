{
    "$schema": "https://raw.githubusercontent.com/Azure/review-checklists/main/checklists/checklist.schema.json",
    "items": [
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Control pod scheduling by using node selectors and affinity. In AKS, the Kubernetes scheduler can logically isolate workloads by hardware in the node. Unlike tolerations, pods that don't have a matching node selector can be scheduled on labeled nodes, but priority is given to pods that define the matching node selector.",
            "description": "Node affinity results in more flexibility, which allows you to define what happens if the pod can't be matched with a node.",
            "type": "recommendation",
            "guid": "36922d8c-98fb-4d4f-acb6-fa1a9b9d5227"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Choose the appropriate network plugin based on network requirements and cluster sizing. Different network plugins provide varying levels of functionality. Azure Container Networking Interface (Azure CNI) is required for specific scenarios, such as Windows-based node pools, some networking requirements, and Kubernetes network policies.  For more information, see Kubenet versus Azure CNI.",
            "description": "The right network plugin can help ensure better compatibility and performance.",
            "type": "recommendation",
            "guid": "0d4d75ea-c666-4b13-af6d-10e7e4546da1"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Use the AKS uptime SLA for production-grade clusters.",
            "description": "The workload can support higher availability targets because of the higher availability guarantees of the Kubernetes API server endpoint for AKS clusters.",
            "type": "recommendation",
            "guid": "7cb635c3-4105-4eea-9c02-b4cc26dcc450"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Use availability zones to maximize resilience within an Azure region by distributing AKS agent nodes across physically separate datacenters.If colocality requirements exist, use a regular virtual machine scale sets-based AKS deployment into a single zone or use proximity placement groups to minimize internode latency.",
            "description": "By spreading node pools across multiple zones, nodes in one node pool continue to run even if another zone goes down.",
            "type": "recommendation",
            "guid": "0dabe408-2db6-45ca-96d7-a1cc9c9fc35f"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Define pod resource requests and limits in application deployment manifests. Enforce those limits by using Azure Policy.",
            "description": "Container CPU and memory resource limits are necessary to prevent resource exhaustion in your Kubernetes cluster.",
            "type": "recommendation",
            "guid": "5bbc78c1-3240-42b2-bce0-e65fc1b8b975"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Keep the system node pool isolated from application workloads.System node pools require a virtual machine (VM) SKU of at least 2 vCPUs and 4 GB of memory. We recommend that you use 4 vCPU or more. For more information, see System and user node pools.",
            "description": "The system node pool hosts critical system pods that are essential for the control plane of your cluster. By isolating these system pods from application workloads, you help ensure that the essential services are unaffected by the resource demands or potential problems caused by a workload.",
            "type": "recommendation",
            "guid": "08830d0e-bf7f-4704-ba1e-93727658788a"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Separate applications to dedicated node pools based on specific requirements. Avoid large numbers of node pools to reduce management overhead.",
            "description": "Applications can share the same configuration and need GPU-enabled VMs, CPU or memory-optimized VMs, or the ability to scale to zero. By dedicating node pools to specific applications, you can help ensure that each application gets the resources it needs without overprovisioning or underutilizing resources.",
            "type": "recommendation",
            "guid": "aa2d15d3-5600-4a7f-af98-6187b49aeb8d"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Use a NAT gateway for clusters that run workloads that make many concurrent outbound connections.",
            "description": "Azure NAT Gateway supports reliable egress traffic at scale and helps you avoid reliability problems by applying Azure Load Balancer limitations to high concurrent outbound traffic.",
            "type": "recommendation",
            "guid": "436a18a9-d302-4008-baa8-a415083d5759"
        },
        {
            "waf": "Reliability",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Use Azure Backup to protect AKS cluster and restore to alternate regions during disaster.  Azure Backup supports the backup and restore operations of containerized applications and data running for both cluster state and application data. You can use the backups in a regional disaster scenario and recover backups.",
            "description": "Azure Backup with Azure Kubernetes Service (AKS) offers a fully managed, scalable, secure, and cost-effective solution. Enhances the reliability of the workload without the complexities of setting up and maintaining backup infrastructure.",
            "type": "recommendation",
            "guid": "03f66a10-1d35-4ed0-89b4-ed007b7bb2cf"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Use managed identities on the cluster.",
            "description": "You can avoid the overhead associated with managing and rotating service principles.",
            "type": "recommendation",
            "guid": "3b085d30-3fa8-4497-a6d2-afc260a981a4"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Workload) Use Microsoft Entra Workload ID with AKS to access Microsoft Entra protected resources, such as Azure Key Vault and Microsoft Graph, from your workload.",
            "description": "Use AKS Workload IDs to protect access to Azure resources by using Microsoft Entra ID RBAC without having to manage credentials directly in your code.",
            "type": "recommendation",
            "guid": "f806207f-aed4-45e7-864f-6c7f1cb56c96"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Use Microsoft Entra ID to authenticate with Azure Container Registry from AKS.",
            "description": "By using Microsoft Entra ID, AKS can authenticate with Container Registry without the use of `imagePullSecrets` secrets.",
            "type": "recommendation",
            "guid": "f62f5eac-109e-4cf2-857b-3c3c2bae124c"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Secure network traffic to your API server by using private AKS cluster if the workload requirements require higher levels of segmentation.",
            "description": "By default, network traffic between your node pools and the API server travels the Microsoft backbone network. By using a private cluster, you can help ensure that network traffic to your API server remains on the private network only.",
            "type": "recommendation",
            "guid": "5135ede1-7afd-415c-ad5e-89449b8124b7"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) For public AKS clusters, use API server-authorized IP address ranges. Include sources like the public IP addresses of your deployment build agents, operations management, and node pools' egress point, such as Azure Firewall.",
            "description": "When you use public clusters, you can significantly reduce the attack surface of your AKS cluster by limiting the traffic that can reach the API server of your clusters.",
            "type": "recommendation",
            "guid": "fc234dca-a17f-4df9-acde-0d7f28400315"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Protect the API server by using Microsoft Entra ID RBAC.Disable local accounts to enforce all cluster access by using Microsoft Entra ID-based identities.",
            "description": "Securing access to the Kubernetes API server is one of the most important things that you can do to secure your cluster. Integrate Kubernetes RBAC with Microsoft Entra ID to control access to the API server.",
            "type": "recommendation",
            "guid": "ec5cb7dc-b2fd-4296-bfbf-d2ad9bb69af8"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Use Azure network policies or Calico.",
            "description": "By using policies, you can secure and control network traffic between pods in a cluster. Calico provides a richer set of capabilities, including policy ordering and priority, deny rules, and more flexible match rules.",
            "type": "recommendation",
            "guid": "33664205-a916-424e-97af-ed9a7b5b75e0"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Secure clusters and pods by using Azure Policy.",
            "description": "Azure Policy can help apply at-scale enforcement and safeguards on your clusters in a centralized, consistent manner. It can also control what functions pods are granted and detect whether anything is running against company policy.",
            "type": "recommendation",
            "guid": "9d6ed0e9-fee1-4c25-b5e8-03a4fea4f9bb"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Secure container access to resources. Limit access to actions that containers can perform. Provide the least number of permissions, and avoid the use of root or privileged escalation.For Linux based containers, see Security container access to resources using built-in Linux security features.",
            "description": "By restricting permissions and avoiding the use of root or privileged escalation, you help reduce the risk of security breaches. You can help ensure that, even if a container is compromised, the potential damage is minimized.",
            "type": "recommendation",
            "guid": "b0a443c9-24db-4996-b8ad-80f130484c44"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Control cluster egress traffic by ensuring that your cluster's outbound traffic passes through a network security point such as Azure Firewall or an HTTP proxy.",
            "description": "By routing outbound traffic through Azure Firewall or an HTTP proxy, you can help enforce security policies that prevent unauthorized access and data exfiltration. This approach also simplifies the administration of security policies and makes it easier to enforce consistent rules across your entire AKS cluster.",
            "type": "recommendation",
            "guid": "5a170011-093b-4922-b976-b130f425e510"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Use the open-source Microsoft Entra Workload ID and Secrets Store CSI Driver with Key Vault.",
            "description": "These features help you protect and rotate secrets, certificates, and connection strings in Key Vault by using strong encryption. They provide an access audit log and keep core secrets out of the deployment pipeline.",
            "type": "recommendation",
            "guid": "b50182f9-9d24-4bcb-bae5-967dac38d9b2"
        },
        {
            "waf": "Security",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Use Microsoft Defender for Containers.",
            "description": "Microsoft Defender for Containers helps you monitor and maintain the security of your clusters, containers, and their applications.",
            "type": "recommendation",
            "guid": "6746bf44-02b9-4fb5-99af-0b48e46fae88"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Align AKS SKU selection and managed disk size with workload requirements.",
            "description": "Matching your selection to your workload demands helps ensure that you don't pay for unneeded resources.",
            "type": "recommendation",
            "guid": "55b066b5-6563-4172-a95e-d9e8b0fe6b18"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Choose the right VM instance types for your AKS node pools.To determine the right VM instance types, consider workload characteristics, resource requirements, and availability needs.",
            "description": "Selecting the right VM instance type is crucial because it directly affects the cost to run applications on AKS. Choosing a high-performance instance without proper utilization can lead to wasteful spending. Choosing a less powerful instance can lead to performance problems and increased downtime.",
            "type": "recommendation",
            "guid": "8cbe56ba-3474-4be8-b5a3-9b06fab779a1"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Choose VMs based on the more power efficient Azure Resource Manager architecture. AKS supports creating Arm64 node pools and a mix of Intel and Resource Manager architecture nodes within a cluster.",
            "description": "The Arm64 architecture provides a better price-to-performance ratio because of its lower power utilization and efficient compute performance. These capabilities can bring better performance at a lower cost.",
            "type": "recommendation",
            "guid": "b2e71c48-cbaf-4d99-8c17-a6e35c2ea8b0"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Enable the cluster autoscaler to automatically reduce the number of agent nodes in response to excess resource capacity.",
            "description": "Automatically scaling down the number of nodes in your AKS cluster lets you run an efficient cluster when demand is low and scale up when demand increases.",
            "type": "recommendation",
            "guid": "7f176926-0efa-4cf6-a47c-bd4ddfc73230"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Enable node autoprovisioning to automate VM SKU selection.",
            "description": "Node autoprovision simplifies the SKU selection process and decides, based on pending pod resource requirements, the optimal VM configuration to run workloads in the most efficient and cost-effective manner.",
            "type": "recommendation",
            "guid": "d086a384-e740-484b-ba79-b47b2caf1ac4"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Workload) Use HorizontalPodAutoscaler to adjust the number of pods in a deployment depending on CPU utilization or other metrics.",
            "description": "Automatically scaling down the number of pods when demand is low and scaling out when demand increases results in a more cost-effective operation of your workload.",
            "type": "recommendation",
            "guid": "08155215-83f1-4188-8e71-980bd7a9e529"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Workload) Use VerticalPodAutoscaler (preview) to rightsize your pods and dynamically set requests and limits based on historic usage.",
            "description": "By setting resource requests and limits on containers for each workload, VerticalPodAutoscaler frees up CPU and memory for other pods and helps ensure effective utilization of your AKS clusters.",
            "type": "recommendation",
            "guid": "98c8e98e-5f2f-4497-9ff2-da47047fe9ff"
        },
        {
            "waf": "Cost",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Configure the AKS cost analysis add-on.",
            "description": "The cost analysis cluster extension enables you to obtain granular insight into costs that are associated with various Kubernetes resources in your clusters or namespaces.",
            "type": "recommendation",
            "guid": "197b8613-a0ff-4f70-9e50-e7a866e312f3"
        },
        {
            "waf": "Operations",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Operationalize cluster and pod configuration standards by using Azure policies for AKS.",
            "description": "Azure policies for AKS can help you apply at-scale enforcement and safeguards on your clusters in a centralized, consistent manner. Use policies to define the permissions granted to pods and ensure compliance with company policies.",
            "type": "recommendation",
            "guid": "e96cf35a-d410-49da-80b6-e63b205cefe8"
        },
        {
            "waf": "Operations",
            "service": "Azure Kubernetes Service",
            "text": "(Workload) Use Kubernetes Event Driven Autoscaler (KEDA).",
            "description": "KEDA allows your applications to scale based on events, like the number of events being processed. You can choose from a rich catalog of more than 50 KEDA scalers.",
            "type": "recommendation",
            "guid": "09f7f5a9-2dfa-4924-8686-219c2c33c95e"
        },
        {
            "waf": "Performance",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster) Enable cluster autoscaler to automatically adjust the number of agent nodes in response to workload demands.Use the HorizontalPodAutoscaler to adjust the number of pods in a deployment depending on CPU utilization or other metrics.",
            "description": "The ability to automatically scale up or scale down the number of nodes and the number of pods in your AKS cluster lets you run an efficient, cost-effective cluster.",
            "type": "recommendation",
            "guid": "c5ac26e5-e72c-4222-9f78-844ab2723c7a"
        },
        {
            "waf": "Performance",
            "service": "Azure Kubernetes Service",
            "text": "(Cluster and workload) Separate workloads into different node pools and consider scaling user node pools.",
            "description": "Unlike system node pools that always require running nodes, user node pools allow you to scale up or scale down.",
            "type": "recommendation",
            "guid": "e73fb529-0f8f-40cc-9724-5601f23110af"
        },
        {
            "waf": "Performance",
            "service": "Azure Kubernetes Service",
            "text": "(Workload) Use AKS advanced scheduler features to implement advanced balancing of resources for workloads that require them.",
            "description": "As you manage AKS clusters, you often need to isolate teams and workloads. Advanced features that the Kubernetes scheduler provides let you control which pods can be scheduled on certain nodes. They also let you control how multipod applications can be appropriately distributed across the cluster.",
            "type": "recommendation",
            "guid": "04302838-ade8-4ed5-afbd-abca958fc1f7"
        },
        {
            "waf": "Performance",
            "service": "Azure Kubernetes Service",
            "text": "(Workload) Use KEDA to build a meaningful autoscale ruleset based on signals that are specific to your workload.",
            "description": "Not all scale decisions can be derived from CPU or memory metrics. Scale considerations often come from more complex or even external data points. KEDA allows your applications to scale based on events, such as the number of messages in a queue or the length of a topic lag.",
            "type": "recommendation",
            "guid": "ddc26835-9557-4bcb-9d55-b19df3db78db"
        }
    ],
    "categories": [],
    "waf": [
        {
            "name": "Security"
        },
        {
            "name": "Reliability"
        },
        {
            "name": "security"
        },
        {
            "name": "reliability"
        },
        {
            "name": "operations"
        },
        {
            "name": "Operations"
        },
        {
            "name": "Performance"
        },
        {
            "name": "cost"
        },
        {
            "name": "Cost"
        },
        {
            "name": "performance"
        }
    ],
    "yesno": [
        {
            "name": "Yes"
        },
        {
            "name": "No"
        }
    ],
    "status": [
        {
            "name": "Not verified",
            "description": "This check has not been looked at yet"
        },
        {
            "name": "Open",
            "description": "There is an action item associated to this check"
        },
        {
            "name": "Fulfilled",
            "description": "This check has been verified, and there are no further action items associated to it"
        },
        {
            "name": "N/A",
            "description": "Not applicable for current design"
        },
        {
            "name": "Not required",
            "description": "Not required"
        }
    ],
    "metadata": {
        "name": "Azure Kubernetes Service Service Guide",
        "waf": "all",
        "state": "preview",
        "timestamp": "May 04, 2025"
    }
}