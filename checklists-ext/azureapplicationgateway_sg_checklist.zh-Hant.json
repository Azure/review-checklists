{
    "$schema": "https://raw.githubusercontent.com/Azure/review-checklists/main/checklists/checklist.schema.json",
    "categories": [],
    "items": [
        {
            "description": "當您將多個實例分佈在多個區域中時，您的工作負載可以承受單個區域中的故障。如果您有不可用的可用區，流量會自動轉移到其他可用區中的運行狀況良好的實例，從而保持應用程式的可靠性。",
            "guid": "a36e2517-aa81-4e4b-9962-e78144b18ac7",
            "service": "Azure Application Gateway",
            "text": "在區域感知配置中部署應用程式閘道實例。 檢查區域冗餘的區域支援，因為並非所有區域都提供此功能。",
            "type": "recommendation",
            "waf": "可靠性"
        },
        {
            "description": "運行狀況探測可確保流量僅路由到可以處理流量的後端。應用程式閘道會監視其後端池中所有伺服器的運行狀況，並自動停止向它認為運行狀況不佳的任何伺服器發送流量。",
            "guid": "9afcdcea-4d65-4d51-9008-297c2c363625",
            "service": "Azure Application Gateway",
            "text": "使用應用程式閘道運行狀況探測來檢測後端不可用。",
            "type": "recommendation",
            "waf": "可靠性"
        },
        {
            "description": "使用速率限制來避免重試風暴等問題。",
            "guid": "7bcec0ab-ea83-427d-ae8c-946bf662ece6",
            "service": "Azure Application Gateway",
            "text": "為 Azure WAF 配置速率限制規則，以便客戶端無法向應用程式發送過多流量。",
            "type": "recommendation",
            "waf": "可靠性"
        },
        {
            "description": "應用程式閘道子網上的 UDR 可能會導致一些問題。不要在應用程式閘道子網上使用 UDR，以便可以查看後端運行狀況、日誌和指標。",
            "guid": "b2881b32-11c9-4bec-94d0-255ec577fdab",
            "service": "Azure Application Gateway",
            "text": "不要在應用程式閘道上使用 UDR，以便後端運行狀況報告正常運行並生成正確的日誌和指標。 如果必須在應用程式閘道子網中使用 UDR，請參閱支援的 UDR。",
            "type": "recommendation",
            "waf": "可靠性"
        },
        {
            "description": "設置IdleTimeout以匹配後端。此設置可確保在後端回應請求的時間超過 4 分鐘時，應用程式閘道與客戶端之間的連接保持打開狀態。如果您未配置此設置，則連接將關閉，並且用戶端看不到後端回應。",
            "guid": "0719fb38-2436-415b-8db7-3d19a1e57bee",
            "service": "Azure Application Gateway",
            "text": "配置 IdleTimeout 設定以匹配後端應用程式的偵聽器和流量特徵。預設值為 4 分鐘。您可以將其配置為最長 30 分鐘。 有關更多資訊，請參閱負載均衡器傳輸控制協定 （TCP） 重置和空閒超時。",
            "type": "recommendation",
            "waf": "可靠性"
        },
        {
            "description": "使用最新的 TLS 策略強制使用 TLS 1.2 和更強的密碼。TLS 策略包括對 TLS 協定版本和密碼套件的控制，以及 TLS 握手使用密碼的順序。",
            "guid": "8e0ffc7d-aecb-456f-8a8a-6cbd5743e076",
            "service": "Azure Application Gateway",
            "text": "設置 TLS 策略以增強安全性。確保您使用最新的 TLS 策略版本。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "性能得到提高，因為發送到不同後端的請求不必對每個後端重新進行身份驗證。網關可以訪問請求內容並做出智慧路由決策。您只需在應用程式閘道上安裝證書，從而簡化證書管理。",
            "guid": "0534341b-03de-4eb4-9fbb-47806be1958d",
            "service": "Azure Application Gateway",
            "text": "使用應用程式閘道進行 TLS 終止。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "這種方法提供了更強的安全性、更輕鬆的角色和職責分離、對託管證書的支援以及更輕鬆的證書續訂和輪換過程。",
            "guid": "14551ef6-ea58-410f-bb9b-08a0c10381a8",
            "service": "Azure Application Gateway",
            "text": "將應用程式閘道與 Key Vault 整合以儲存 TLS 證書。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "應用程式閘道子網支援 NSG，但存在一些限制。例如，禁止與某些埠範圍進行某些通信。確保您了解這些限制的含義。",
            "guid": "6febf0db-32d2-4e89-a3fd-debec3a426dd",
            "service": "Azure Application Gateway",
            "text": "遵守應用程式閘道的所有 NSG 限制。",
            "type": "recommendation",
            "waf": "安全"
        },
        {
            "description": "已停止的應用程式閘道實例不會產生費用。持續運行的應用程式閘道實例可能會產生不必要的成本。評估使用模式，並在不需要實例時停止實例。例如，在開發/測試環境中，下班后預計使用率較低。",
            "guid": "147308ab-aa3c-4724-b314-5820ebe6a0ee",
            "service": "Azure Application Gateway",
            "text": "在應用程式閘道實例不使用時停止這些實例。有關更多資訊，請參閱 Stop-AzApplicationGateway 和 Start-AzApplicationGateway。",
            "type": "recommendation",
            "waf": "成本"
        },
        {
            "description": "使用這些指標來驗證預置的實例計數是否與傳入流量匹配，並確保您充分利用分配的資源。",
            "guid": "1946aefd-0576-40b2-a8ed-58265dc9dcf0",
            "service": "Azure Application Gateway",
            "text": "監控關鍵成本驅動因素 Application Gateway 指標，例如：- 估計的計費容量單位。 - 固定的可計費容量單位。- 當前容量單位。 確保考慮頻寬成本。",
            "type": "recommendation",
            "waf": "成本"
        },
        {
            "description": "在指標超過閾值時設置警報，以便您知道使用量何時增加。此方法可確保您有足夠的時間對工作負載實施必要的更改，並防止性能下降或中斷。",
            "guid": "aa1eacb3-ef9f-4e69-bc98-784ec67d1192",
            "service": "Azure Application Gateway",
            "text": "配置警報，以便在容量指標（如 CPU 使用率和計算單位使用率）超過建議的閾值時通知您的團隊。 若要根據容量指標配置一組全面的警報，請參閱應用程式網關高流量支援。",
            "type": "recommendation",
            "waf": "操作"
        },
        {
            "description": "使用警報有助於確保您的團隊能夠及時響應問題並促進故障排除。",
            "guid": "91992f80-fca7-48ad-85bc-3bad00352475",
            "service": "Azure Application Gateway",
            "text": "配置警報以通知團隊有關指示應用程式閘道或後端問題的指標。建議評估以下警報：- 運行狀況不佳的主機計數 - 回應狀態，例如 4xx 和 5xx 錯誤 - 後端回應狀態，例如 4xx 和 5xx 錯誤 - 後端最後一個字節回應時間 - 應用程式網關總時間有關詳細資訊，請參閱應用程式網關的指標。",
            "type": "recommendation",
            "waf": "操作"
        },
        {
            "description": "使用日誌來幫助檢測、調查和排查應用程式閘道實例和工作負載的問題。",
            "guid": "59ddc80c-f93b-488b-814d-270a4ad7786d",
            "service": "Azure Application Gateway",
            "text": "在應用程式閘道和 WAF 上啟用診斷日誌，以收集防火牆日誌、性能日誌和訪問日誌。",
            "type": "recommendation",
            "waf": "操作"
        },
        {
            "description": "使用 Advisor 警報保持最新狀態並立即解決問題。防止任何與控制平面或數據平面相關的問題。 應用程式閘道每 4 小時檢查一次連結的 Key Vault 實例中的續訂證書版本。如果證書版本由於 Key Vault 配置不正確而無法訪問，它會記錄該錯誤並推送相應的 Advisor 建議。",
            "guid": "88daf0df-5324-450c-ae59-e8d3f12f697a",
            "service": "Azure Application Gateway",
            "text": "使用 Advisor 監視 Key Vault 配置問題。設置警報，以便在收到指出 Resolve Azure Key Vault issue for your Application Gateway 的建議時通知你的團隊。",
            "type": "recommendation",
            "waf": "操作"
        },
        {
            "description": "對於應用程式閘道 v2，自動縮放大約需要 6 到 7 分鐘，然後額外的實例集才能準備好提供流量。在此期間，如果應用程式閘道的流量峰值較短，則預計會出現暫時性延遲或流量丟失。",
            "guid": "1c9a7b2a-0e95-4416-8af5-4d173c48870e",
            "service": "Azure Application Gateway",
            "text": "根據估計的實例計數、實際應用程式閘道自動縮放趨勢和應用程式模式，將最小實例計數設置為最佳級別。 檢查過去一個月的當前計算單位。此指標表示閘道的CPU使用率。要定義最小實例計數，請將峰值使用量除以 10。例如，如果您在過去一個月的平均當前計算單位數為50，請將最小實例計數設置為5。",
            "type": "recommendation",
            "waf": "性能"
        },
        {
            "description": "應用程式閘道可以根據需要橫向擴展，以處理應用程式增加的流量。此設置不會增加成本，因為您只需為使用的容量付費。",
            "guid": "2b1242f0-cf07-48fa-8567-63a11efd6d13",
            "service": "Azure Application Gateway",
            "text": "將最大自動縮放實例計數設置為可能的最大值，即125個實例。確保應用程式閘道專用子網具有足夠的可用IP位址來支援增加的實例集。",
            "type": "recommendation",
            "waf": "性能"
        },
        {
            "description": "使用 /24 子網為應用程式閘道 v2 部署所需的所有IP位址提供支援。 應用程式閘道為每個實例使用一個專用IP位址，如果配置了專用前端IP，則使用另一個專用IP位址。Standard_v2 SKU 或 WAF_v2 SKU 最多可支援 125 個實例。Azure 在每個子網中保留 5 個 IP 位址供內部使用。",
            "guid": "bd29ba93-56b6-43cc-9546-8aace18d45e5",
            "service": "Azure Application Gateway",
            "text": "適當調整應用程式閘道專用子網的大小。強烈建議將 /24 子網用於應用程式閘道 v2 部署。 如果要在同一子網中部署其他應用程式閘道資源，請考慮最大實例計數所需的額外IP位址。 有關調整子網大小的更多注意事項，請參閱應用程式網關基礎結構配置。",
            "type": "recommendation",
            "waf": "性能"
        }
    ],
    "metadata": {
        "name": "Azure Application Gateway Service Guide",
        "state": "preview",
        "timestamp": "October 21, 2024",
        "waf": "all"
    },
    "status": [
        {
            "description": "尚未查看此檢查",
            "name": "未驗證"
        },
        {
            "description": "存在與此檢查關聯的操作項",
            "name": "打開"
        },
        {
            "description": "此檢查已經過驗證，沒有與之關聯的其他操作項",
            "name": "實現"
        },
        {
            "description": "不適用於當前設計",
            "name": "不適用"
        },
        {
            "description": "不需要",
            "name": "不需要"
        }
    ],
    "waf": [
        {
            "name": "可靠性"
        },
        {
            "name": "成本"
        },
        {
            "name": "操作"
        },
        {
            "name": "安全"
        },
        {
            "name": "性能"
        },
        {
            "name": "可靠性"
        },
        {
            "name": "操作"
        },
        {
            "name": "安全"
        },
        {
            "name": "性能"
        },
        {
            "name": "成本"
        }
    ],
    "yesno": [
        {
            "name": "是的"
        },
        {
            "name": "不"
        }
    ]
}