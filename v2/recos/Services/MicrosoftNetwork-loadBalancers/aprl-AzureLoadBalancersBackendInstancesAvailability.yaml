name: aprl-AzureLoadBalancersBackendInstancesAvailability
title: Use Health Probes to detect backend instances availability
description: |-
  Health probes are used by Azure Load Balancers to determine the status of backend endpoints. Using custom health probes that are aligned with vendor recommendations enhances understanding of backend availability and facilitates monitoring of backend services for any impact.
source:
  type: aprl
  file: azure-resources/Network/loadBalancers/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.Network/loadBalancers
severity: 0
labels:
  guid: e5f5fcea-f925-4578-8599-9a391e888a60
  area: Monitoring and Alerting
links: []
queries:
  arg: |-
    // Azure Resource Graph Query
    // List the load balancers which don't have health probe configured
    resources
    | where type =~ "microsoft.network/loadbalancers"
    | where array_length(properties.probes) == 0
    | project recommendationId="e5f5fcea-f925-4578-8599-9a391e888a60", name, id, tags, param1="customHealthProbeUsed: false"
