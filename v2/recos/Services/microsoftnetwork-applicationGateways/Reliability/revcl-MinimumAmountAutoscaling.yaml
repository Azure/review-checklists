name: revcl-MinimumAmountAutoscaling
title: Configure autoscaling with a minimum amount of instances of two.
source:
  type: revcl
  file: ./checklists/waf_checklist.en.json
resourceTypes:
- microsoft.network/applicationgateways
waf: Reliability
severity: 1
labels:
  guid: 135bf4ac-f9db-461f-b76b-2ee9e30b12c0
links:
- type: docs
  url: https://learn.microsoft.com/azure/application-gateway/application-gateway-autoscaling-zone-redundant
- type: docs
  url: https://learn.microsoft.com/learn/paths/secure-application-delivery/
queries:
  arg: resources | where type =~ 'microsoft.network/applicationGateways' | extend
    compliant = (isnotnull(properties.autoscaleConfiguration) and properties.autoscaleConfiguration.minCapacity
    >= 2) | distinct id,compliant
