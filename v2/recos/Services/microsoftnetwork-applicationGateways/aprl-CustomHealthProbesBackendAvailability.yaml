name: aprl-CustomHealthProbesBackendAvailability
title: Use Health Probes to detect backend availability
description: |-
  Using custom health probes enhances understanding of backend availability and facilitates monitoring of backend services for any impact.
source:
  type: aprl
  file: azure-resources/Network/applicationGateways/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.Network/applicationGateways
severity: 0
labels:
  guid: 847a8d88-21c4-bc48-a94e-562206edd767
  area: Monitoring and Alerting
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // Application Gateways are not using health probes to monitor the availability of the backend systems
    resources
    | where type =~ "microsoft.network/applicationGateways"
    | where array_length(properties.probes) == 0
    | project recommendationId="847a8d88-21c4-bc48-a94e-562206edd767", name, id, tags, param1="customHealthProbeUsed: false"
