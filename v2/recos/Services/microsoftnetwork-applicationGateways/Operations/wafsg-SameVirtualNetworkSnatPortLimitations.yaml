name: wafsg-SameVirtualNetworkSnatPortLimitations
title: Consider SNAT port limitations in your design
description: SNAT port limitations are important for backend connections on the Application
  Gateway. There are separate factors that affect how Application Gateway reaches
  the SNAT port limit. For example, if the backend is a public IP address, it will
  require its own SNAT port. In order to avoid SNAT port limitations, you can increase
  the number of instances per Application Gateway, scale out the backends to have
  more IP addresses, or move your backends into the same virtual network and use private
  IP addresses for the backends.Requests per second (RPS) on the Application Gateway
  will be affected if the SNAT port limit is reached. For example, if an Application
  Gateway reaches the SNAT port limit, then it won't be able to open a new connection
  to the backend, and the request will fail.
source:
  type: wafsg
  file: ./checklists-ext/wafsg_checklist.en.json
resourceTypes:
- microsoft.network/applicationgateways
waf: Operations
severity: 1
labels:
  guid: 9bb30e02-43fd-4ed2-9189-c9a23ae9933f
links: []
queries: {}
