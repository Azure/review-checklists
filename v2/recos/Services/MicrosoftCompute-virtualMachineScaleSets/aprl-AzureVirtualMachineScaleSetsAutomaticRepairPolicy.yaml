name: aprl-AzureVirtualMachineScaleSetsAutomaticRepairPolicy
title: Enable Automatic Repair Policy on Azure Virtual Machine Scale Sets
description: |-
  Enabling automatic instance repairs in Azure Virtual Machine Scale Sets enhances application availability through a continuous health check and maintenance process.
source:
  type: aprl
  file: azure-resources/Compute/virtualMachineScaleSets/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.Compute/virtualMachineScaleSets
severity: 0
labels:
  guid: 820f4743-1f94-e946-ae0b-45efafd87962
  area: High Availability
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // Find all VMs that do NOT have automatic repair policy enabled
    resources
    | where type == "microsoft.compute/virtualmachinescalesets"
    | where properties.automaticRepairsPolicy.enabled == false
    | project recommendationId = "820f4743-1f94-e946-ae0b-45efafd87962", name, id, tags, param1 = "automaticRepairsPolicy: Disabled"
