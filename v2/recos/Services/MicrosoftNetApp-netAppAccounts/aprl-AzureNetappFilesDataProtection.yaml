name: aprl-AzureNetappFilesDataProtection
title: Enable backup for data protection in Azure NetApp Files
description: |-
  Azure NetApp Files offers a fully managed backup solution enhancing long-term recovery, archiving, and compliance.
source:
  type: aprl
  file: azure-resources/NetApp/netAppAccounts/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.NetApp/netAppAccounts
severity: 0
labels:
  guid: b2fb3e60-97ec-e34d-af29-b16a0d61c2ac
  area: Disaster Recovery
links: []
queries:
  arg: |-
    // Azure Resource Graph Query
    // This Resource Graph query will return all Azure NetApp Files volumes without a backup policy defined.
    resources
    | where type == "microsoft.netapp/netappaccounts/capacitypools/volumes"
    | where properties.dataProtection.backup.backupPolicyId == ""
    | project recommendationId = "b2fb3e60-97ec-e34d-af29-b16a0d61c2ac", name, id, tags
