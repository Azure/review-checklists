name: aprl-AzureNetappFilesMultipleAvailabilityZones
title: Use availability zones for high availability in Azure NetApp Files
description: |-
  Availability zones are distinct locations within an Azure region to withstand local failures. Deploy your workload in multiple availability zones and use application-based replication or Azure NetApp Files cross-zone replication to achieve high availability. Note that failover is a manual process.
source:
  type: aprl
  file: azure-resources/NetApp/netAppAccounts/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.NetApp/netAppAccounts
severity: 0
labels:
  guid: 47d100a5-7f85-5742-967a-67eb5081240a
  area: High Availability
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // This Resource Graph query will return all Azure NetApp Files volumes without an availability zone defined.
    Resources
    | where type =~ "Microsoft.NetApp/netAppAccounts/capacityPools/volumes"
    | where array_length(zones) == 0 or isnull(zones)
    | project recommendationId = "47d100a5-7f85-5742-967a-67eb5081240a", name, id, tags
