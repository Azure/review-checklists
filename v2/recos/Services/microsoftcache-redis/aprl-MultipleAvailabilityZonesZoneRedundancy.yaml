name: aprl-MultipleAvailabilityZonesZoneRedundancy
title: Enable zone redundancy for Azure Cache for Redis
description: |-
  Azure Cache for Redis offers zone redundancy in Premium and Enterprise tiers, using VMs across multiple Availability Zones to ensure greater resilience and availability.
source:
  type: aprl
  file: azure-resources/Cache/Redis/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.Cache/Redis
severity: 0
labels:
  guid: 5a44bd30-ae6a-4b81-9b68-dc3a8ffca4d8
  area: High Availability
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // Find Cache for Redis instances with one or no Zones selected
    resources
    | where type =~ "microsoft.cache/redis"
    | where array_length(zones) <= 1 or isnull(zones)
    | project recommendationId = "5a44bd30-ae6a-4b81-9b68-dc3a8ffca4d8", name, id, tags, param1 = "AvailabilityZones: Single Zone"
    | order by id asc
