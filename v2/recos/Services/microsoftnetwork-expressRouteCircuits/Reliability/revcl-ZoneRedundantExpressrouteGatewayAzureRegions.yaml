name: revcl-ZoneRedundantExpressrouteGatewayAzureRegions
title: Deploy a zone-redundant ExpressRoute gateway in the supported Azure regions.
source:
  type: revcl
  file: ./checklists/alz_checklist.en.json
resourceTypes:
- microsoft.network/expressRouteCircuits
waf: Reliability
severity: 1
labels:
  guid: 2447ec66-138a-4720-8f1c-e16ed301d6e8
  area: Network Topology and Connectivity
  subarea: Hybrid
  id: D06.06
links:
- type: docs
  url: https://learn.microsoft.com/azure/expressroute/expressroute-about-virtual-network-gateways
- type: docs
  url: https://learn.microsoft.com/learn/modules/design-implement-azure-expressroute/
queries:
  arg: resources| where type == 'microsoft.network/virtualnetworkgateways'| where
    properties.gatewayType =~ 'vpn' or properties.gatewayType == 'ExpressRoute'| extend
    SKUName = properties.sku.name, SKUTier = properties.sku.tier, Type = properties.gatewayType|
    extend compliant = SKUTier contains 'AZ'| project name, id, subscriptionId, resourceGroup,
    Type, compliant
