name: revcl-RemoteVirtualNetworkVnetPeerings
title: Use the setting 'Allow traffic to remote virtual network' when configuring
  VNet peerings
source:
  type: revcl
  file: ./checklists/alz_checklist.en.json
resourceTypes:
- Microsoft.Network/virtualNetworks
waf: Reliability
severity: 0
labels:
  guid: c76cb5a2-abe2-11ed-afa1-0242ac120002
  area: Network Topology and Connectivity
  subarea: Hub and spoke
  id: D01.10
links:
- type: docs
  url: https://learn.microsoft.com/azure/virtual-network/virtual-network-manage-peering
queries:
  arg: resources | where type == 'microsoft.network/virtualnetworks' | mvexpand properties.virtualNetworkPeerings
    | project id, peeringName=properties_virtualNetworkPeerings.name, compliant =
    (properties_virtualNetworkPeerings.properties.allowVirtualNetworkAccess == True)
