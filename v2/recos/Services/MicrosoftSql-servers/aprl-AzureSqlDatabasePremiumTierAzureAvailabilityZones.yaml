name: aprl-AzureSqlDatabasePremiumTierAzureAvailabilityZones
title: Enable zone redundancy for Azure SQL Database to achieve high availability
  and resiliency
description: |-
  By default, Azure SQL Database premium tier provisions multiple copies within the same region. For geo redundancy, databases can be set as Zone Redundant, distributing copies across Azure Availability Zones to maintain availability during regional outages.
source:
  type: aprl
  file: azure-resources/Sql/servers/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.Sql/servers
severity: 1
labels:
  guid: c0085c32-84c0-c247-bfa9-e70977cbf108
  area: High Availability
links: []
queries:
  arg: |+
    // Azure Resource Graph Query
    // Finds non-zone redundant SQL databases and lists them
    Resources
    | where type =~ 'microsoft.sql/servers/databases'
    | where tolower(tostring(properties.zoneRedundant))=~'false'
    |project recommendationId = "c0085c32-84c0-c247-bfa9-e70977cbf108", name, id, tags

...
