name: aprl-ZoneRedundantVirtualNetworkGatewaysZoneRedundantVpnGateway
title: Choose a Zone-redundant VPN gateway
description: |-
  Azure VPN gateway offers variable SLAs based on deployment in one or two availability zones. Deploying zone-redundant virtual network gateways across availability zones ensures zone-resiliency, improving access to mission-critical, scalable services on Azure.
source:
  type: aprl
  file: azure-resources/Network/virtualNetworkGateways/recommendations.yaml
  timestamp: July 24, 2024
resourceTypes:
- Microsoft.Network/virtualNetworkGateways
severity: 0
labels:
  guid: 5b1933a6-90e4-f642-a01f-e58594e5aab2
  area: High Availability
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // For all VNGs of type Vpn, show any that do not have AZ in the SKU tier
    resources
    | where type =~ "Microsoft.Network/virtualNetworkGateways"
    | where properties.gatewayType == "Vpn"
    | where properties.sku.tier !contains 'AZ'
    | project recommendationId = "5b1933a6-90e4-f642-a01f-e58594e5aab2", name, id, tags, param1= strcat("sku-tier: " , properties.sku.tier), param2=location
    | order by id asc
