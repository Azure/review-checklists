guid: e3d742e1-dacd-9b48-b6b1-510ec9f87c96
name: AzureNetappFilesVolumes
title: Enable Cross-zone replication of Azure NetApp Files volumes
description: The cross-zone replication (CZR) feature enables asynchronous data replication
  between Azure NetApp Files volumes across different availability zones, ensuring
  data protection and critical application failover in case of zone-wide disasters.
  Note that failover is a manual process.
source:
  type: aprl
  file: azure-resources/NetApp/netAppAccounts/recommendations.yaml
  timestamp: July 24, 2024
services:
- Microsoft.NetApp/netAppAccounts
resourceTypes:
- Microsoft.NetApp/netAppAccounts
severity: 0
labels:
  area: Disaster Recovery
links: []
queries:
  arg: "// Azure Resource Graph Query\n// This Resource Graph query will return all\
    \ Azure NetApp Files volumes without cross-zone replication.\nresources\n|\_where\_\
    type\_==\_\"microsoft.netapp/netappaccounts/capacitypools/volumes\"\n|\_extend\_\
    remoteVolumeRegion\_=\_properties.dataProtection.replication.remoteVolumeRegion\n\
    |\_extend\_volumeType\_=\_properties.volumeType\n|\_extend\_replicationType\_\
    =\_iff((remoteVolumeRegion\_==\_location),\_\"CZR\",\_iff((remoteVolumeRegion\_\
    ==\_\"\"),\"n/a\",\"CRR\"))\n| where replicationType != \"CZR\" and volumeType\
    \ != \"DataProtection\"\n| project recommendationId = \"e3d742e1-dacd-9b48-b6b1-510ec9f87c96\"\
    , name, id, tags"
