guid: b2acb591-6e44-49f2-97f9-1196094776f3
name: BackendVirtualMachineScaleSetInstance
title: Assess potential SNAT port exhaustion problem.
description: Azure Firewall currently supports 2496 ports per Public IP address per
  backend Virtual Machine Scale Set instance. By default, there are two Virtual Machine
  Scale Set instances. So, there are 4992 ports per flow destination IP, destination
  port and protocol (TCP or UDP). The firewall scales up to a maximum of 20 instances.
  You can work around the limits by configuring Azure Firewall deployments with a
  minimum of five public IP addresses for deployments susceptible to SNAT exhaustion.
source:
  type: revcl
  file: ./checklists-ext/wafsg_checklist.en.json
services:
- Azure Firewall
resourceTypes:
- Microsoft.Network/azureFirewalls
waf: Performance
labels: {}
links: []
queries: []
reviewed: August 26, 2024
