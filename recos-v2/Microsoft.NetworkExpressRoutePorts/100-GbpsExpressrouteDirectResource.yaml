guid: 0bee356b-7348-4799-8cab-0c71ffe13018
name: 100-GbpsExpressrouteDirectResource
title: Ensure you do not over-subscribe an ExpressRoute Direct
description: Provisioning ExpressRoute circuits on a 10-Gbps or 100-Gbps ExpressRoute
  Direct resource up to 20-Gbps or 200-Gbps is possible but not recommended for resiliency.
  If an ExpressRoute Direct port fails, and circuits are using full capacity, the
  remaining port won't handle the extra load.
source:
  type: aprl
  file: azure-resources/Network/expressRoutePorts/recommendations.yaml
  timestamp: July 24, 2024
services:
- Microsoft.Network/ExpressRoutePorts
resourceTypes:
- Microsoft.Network/ExpressRoutePorts
severity: 0
labels:
  area: Scalability
links: []
queries:
  arg: |-
    // Azure Resource Graph Query
    // Find all Express Route Directs that are over subscribed
    resources
    | where type == "microsoft.network/expressrouteports"
    | where toint(properties['provisionedBandwidthInGbps']) > toint(properties['bandwidthInGbps'])
    | project recommendationId = "0bee356b-7348-4799-8cab-0c71ffe13018", name, id, tags, param1 = strcat("provisionedBandwidthInGbps: ", properties['provisionedBandwidthInGbps']), param2 = strcat("bandwidthInGbps: ", properties['bandwidthInGbps'])
