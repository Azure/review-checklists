guid: baf3bfc0-32a2-4c0c-926d-c9bf0b49808e
name: ApiManagementInstance
title: Migrate API Management services to Premium SKU to support Availability Zones
description: |-
  Upgrading the API Management instance to the Premium SKU adds support for Availability Zones, enhancing availability and resilience by distributing services across physically separate locations within Azure regions.
source:
  type: aprl
  file: azure-resources/ApiManagement/service/recommendations.yaml
  timestamp: July 24, 2024
services:
- Microsoft.ApiManagement/service
resourceTypes:
- Microsoft.ApiManagement/service
severity: 0
labels:
  area: High Availability
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // Find all API Management instances that aren't Premium
    resources
    | where type =~ 'Microsoft.ApiManagement/service'
    | extend skuName = sku.name
    | where tolower(skuName) != tolower('premium')
    | project recommendationId = "baf3bfc0-32a2-4c0c-926d-c9bf0b49808e", name, id, tags, param1=strcat("SKU: ", skuName)
