description: 'Zone redundancy for APIM instances ensures the gateway and control plane
  (Management API, developer portal, Git configuration) are replicated across datacenters
  in physically separated zones, boosting resilience to zone failures.

  '
guid: 740f2c1c-8857-4648-80eb-47d2c56d5a50
labels:
  area: High Availability
  source: azure-resources/ApiManagement/service/recommendations.yaml
  sourceType: aprl
links: []
queries:
- arg: '// Azure Resource Graph Query

    // Find all Premium API Management instances that aren''t zone redundant

    resources

    | where type =~ ''Microsoft.ApiManagement/service''

    | extend skuName = sku.name

    | where tolower(skuName) == tolower(''premium'')

    | where isnull(zones) or array_length(zones) < 2

    | extend zoneValue = iff((isnull(zones)), "null", zones)

    | project recommendationId = "740f2c1c-8857-4648-80eb-47d2c56d5a50", name, id,
    tags, param1="Zones: No Zone or Zonal", param2=strcat("Zones value: ", zoneValue
    )


    '
resourceTypes:
- Microsoft.ApiManagement/service
service: APIM
severity: 0
text: Enable Availability Zones on Premium API Management instances
