description: |-
  GitOps, an operating model for cloud-native apps, uses Git for storing application and infrastructure code as a source of truth for continuous delivery.
guid: 5f3cbd68-692a-4121-988c-9770914859a9
labels:
  area: Other Best Practices
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // Returns AKS clusters where GitOps is not enabled
    resources
    |  where type == "microsoft.containerservice/managedclusters"
    |  extend gitops = tostring (parse_json(properties.addOnProfiles.gitops.enabled))
    |  where isempty(gitops)
    |  project recommendationId="5f3cbd68-692a-4121-988c-9770914859a9", id, name, tags, param1=strcat("gitopsEnabled: ", "false")
resourceTypes:
- Microsoft.ContainerService/managedClusters
service: AKS
severity: 2
source:
  file: azure-resources/ContainerService/managedClusters/recommendations.yaml
  type: aprl
title: Enable GitOps when using DevOps frameworks
