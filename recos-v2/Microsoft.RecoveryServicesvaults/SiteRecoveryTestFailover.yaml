guid: 17e877f7-3a89-4205-8a24-0670de54ddcd
name: SiteRecoveryTestFailover
title: Validate VM functionality with a Site Recovery test failover to check performance
  at target
description: |-
  Perform a test failover to validate your BCDR strategy and ensure that your applications are functioning correctly in the target region without impacting your production environment. Test your Disaster Recovery plan periodically without any data loss or downtime, using test failovers.
source:
  type: aprl
  file: azure-resources/RecoveryServices/vaults/recommendations.yaml
  timestamp: July 24, 2024
services:
- Microsoft.RecoveryServices/vaults
resourceTypes:
- Microsoft.RecoveryServices/vaults
severity: 0
labels:
  area: Disaster Recovery
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // Find all VMs where replication has been enabled but Test Failover was never performed
    recoveryservicesresources
    | where type == "microsoft.recoveryservices/vaults/replicationfabrics/replicationprotectioncontainers/replicationprotecteditems"
    | where properties.providerSpecificDetails.dataSourceInfo.datasourceType == 'AzureVm' and isnull(properties.lastSuccessfulTestFailoverTime)
    | project recommendationId="17e877f7-3a89-4205-8a24-0670de54ddcd" , name = properties.providerSpecificDetails.recoveryAzureVMName, id=properties.providerSpecificDetails.dataSourceInfo.resourceId
