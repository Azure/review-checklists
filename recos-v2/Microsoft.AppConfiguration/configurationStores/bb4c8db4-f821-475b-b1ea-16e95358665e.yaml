description: 'With Purge protection enabled, soft deleted stores can''t be purged
  in the retention period. If disabled, the soft deleted store can be purged before
  the retention period expires.

  '
guid: bb4c8db4-f821-475b-b1ea-16e95358665e
labels:
  area: Governance
  source: azure-resources/AppConfiguration/configurationStores/recommendations.yaml
  sourceType: aprl
links: []
queries:
- arg: '// Azure Resource Graph Query

    // Purge protection should be enabled for App Configuration stores to prevent
    accidental deletion of configuration data.

    resources

    | where type =~ "Microsoft.AppConfiguration/configurationStores"

    | where sku.name <> "free"

    | where (properties.enablePurgeProtection <> true) or isnull(properties.enablePurgeProtection
    )

    | project recommendationId = "bb4c8db4-f821-475b-b1ea-16e95358665e", name, id,
    tags, param1 = "Enable purge protection"

    '
resourceTypes:
- Microsoft.AppConfiguration/configurationStores
service: Microsoft.AppConfiguration/configurationStores
severity: 2
text: Enable Purge protection for Azure App Configuration
