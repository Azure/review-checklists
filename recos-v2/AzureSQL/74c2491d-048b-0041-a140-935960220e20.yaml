description: |-
  Active Geo Replication ensures business continuity by utilizing readable secondary database replicas. In case of primary database failure, manually failover to secondary database. Secondaries, up to four, can be in same/different regions, used for read-only access.
guid: 74c2491d-048b-0041-a140-935960220e20
labels:
  area: Disaster Recovery
links: []
queries:
  arg: |-
    // Azure Resource Graph Query
    // Provides a list of SQL databases that are not part of Geo Replication.
    resources
    | where type == "microsoft.sql/servers/databases"
    | summarize secondaryTypeCount = countif(isnotempty(properties.secondaryType)) by name
    | where secondaryTypeCount == 0
    | join kind=inner (
        Resources
        | where type == "microsoft.sql/servers/databases"
    ) on name
    | extend param1 = "Not part of Geo Replication"
    | project recommendationId = "74c2491d-048b-0041-a140-935960220e20", name, id, tags, param1
resourceTypes:
- Microsoft.Sql/servers
service: Azure SQL
severity: 0
source:
  file: azure-resources/Sql/servers/recommendations.yaml
  type: aprl
title: Use Active Geo Replication to Create a Readable Secondary in Another Region
