guid: a3058909-fcf8-4450-88b5-499f57449178
name: MicrosoftEntraDomainServices
title: Use replica sets for resiliency or geolocation in Microsoft Entra Domain Services
description: |-
  To improve the resiliency of a Microsoft Entra Domain Services managed domain, or deploy to additional geographic locations close to your applications, you can use replica sets.
  You can add a replica set to any peered virtual network in any Azure region that supports Domain Services.
source:
  type: aprl
  file: azure-resources/AAD/domainServices/recommendations.yaml
  timestamp: July 24, 2024
services:
- Microsoft.AAD/domainServices
resourceTypes:
- Microsoft.AAD/domainServices
severity: 0
labels:
  area: High Availability
links: []
queries:
  arg: |-
    // Azure Resource Graph Query
    // Gets Entry Domain Services that are using only one replicaSet
    resources
    | where type == "microsoft.aad/domainservices"
    | extend replicaSets = properties.replicaSets
    | where array_length(replicaSets) < 2
    | project recommendationId='a3058909-fcf8-4450-88b5-499f57449178', name=name, id=id, tags=tags, param1=strcat('replicaSetLocation:', replicaSets[0].location)
