guid: c72b7fee-1fa0-5b4b-98e5-54bcae95bb74
name: SingleAvailabilityZone
title: Deploy Azure Firewall across multiple availability zones
description: |-
  Azure Firewall offers different SLAs depending on its deployment; in a single availability zone or across multiple, potentially improving reliability and performance.
source:
  type: aprl
  file: azure-resources/Network/azureFirewalls/recommendations.yaml
  timestamp: July 24, 2024
services:
- Microsoft.Network/azureFirewalls
resourceTypes:
- Microsoft.Network/azureFirewalls
severity: 0
labels:
  area: High Availability
links: []
queries:
  arg: |
    // Azure Resource Graph Query
    // List all Azure Firewalls that are not configured with multiple availability zones or deployed without a zone
    resources
    | where type == 'microsoft.network/azurefirewalls'
    | where array_length(zones) <= 1 or isnull(zones)
    | where isempty(properties.virtualHub.id) or isnull(properties.virtualHub.id)
    | project recommendationId = "c72b7fee-1fa0-5b4b-98e5-54bcae95bb74", name, id, tags, param1="multipleZones:false"
