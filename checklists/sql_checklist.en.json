{
  "items": [
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "VM Size",
      "text": "Collect the target workload's performance characteristics and use them to determine the appropriate VM size for your business.",
      "description": "When you are creating a SQL Server on Azure VM, carefully consider the type of workload necessary. If you are migrating an existing environment, collect a performance baseline to determine your SQL Server on Azure VM requirements. If this is a new VM, then create your new SQL Server VM based on your vendor requirements.",
      "waf": "Performance",
      "guid": "1fc3fc14-eea6-4e69-b8d9-a3eec218e687",
      "id": "A01.01",
      "severity": "High",
      "link": "https://learn.microsoft.com/sql/dma/dma-sku-recommend-sql-db?view=sql-server-ver16"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "VM Size",
      "text": "Use memory optimized virtual machine sizes for the best performance of SQL Server workloads.",
      "description": "The memory optimized virtual machine sizes are a primary target for SQL Server VMs and the recommended choice by Microsoft. The memory optimized virtual machines offer stronger memory-to-CPU ratios and medium-to-large cache options.Consider Ebdsv5-series series first for most SQL Server workloads.",
      "waf": "Performance",
      "guid": "e04abe1f-8d39-4fda-9776-8424c116775c",
      "id": "A01.02",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-vm-size?view=azuresql#memory-optimized"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "Determine storage bandwidth and latency requirements for SQL Server data, log, and tempdb files before choosing the disk type.",
      "description": "To find the most effective configuration for SQL Server workloads on an Azure VM, start by measuring the storage performance of your business application. Once storage requirements are known, select a virtual machine that supports the necessary IOPS and throughput with the appropriate memory-to-vCore ratio.",
      "waf": "Performance",
      "guid": "2ea55b56-ad48-4408-be72-734b476ba18f",
      "id": "A02.01",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/azure/virtual-machines/premium-storage-performance#counters-to-measure-application-performance-requirements"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "Place data, log, and tempdb files on separate drives",
      "description": "This provides more dedicated disk IOPS and throughput on the disk level and also allows you to configure the Azure disk host caching setting for each disk to the optimal setting for that data type.",
      "waf": "Performance",
      "guid": "dbf590ce-65de-48e0-9f9c-cbd468266abc",
      "id": "A02.02",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "For the data drive, use premium P30 and P40 or smaller disks to ensure the availability of cache support",
      "description": "Premium SSD is always recommend as a minimum for SQL Server in order to obtain better performance and lower latency. P30 and P40 are recommended because disk caching is not supported for disks 4 TiB and larger ( P50 and above) and they provide the optimal price to performance ratio",
      "waf": "Performance",
      "guid": "e6a84de5-df43-4d19-a248-1718d5d1e5f6",
      "id": "A02.03",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "For the log drive plan for capacity and test performance versus cost while evaluating the premium P30 - P80 disks",
      "description": "Log files have primarily write-heavy operations. Therefore, they do not benefit from the ReadOnly cache. Hence evaluate your price vs performance vs capacity and chose the right storage disk.",
      "waf": "Performance",
      "guid": "25659d35-58fd-4772-99c9-31112d027fe4",
      "id": "A02.04",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "Place tempdb on the local ephemeral SSD (default D:\\) drive for most SQL Server workloads that are not part of Failover Cluster Instance (FCI) after choosing the optimal VM size.",
      "description": "Placing TempDB on the D drive can help performance. Consider the size required and always test performance.",
      "waf": "Performance",
      "guid": "12f70983-f630-4472-8ee6-9d6b5c2622f5",
      "id": "A02.05",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "Stripe multiple Azure data disks using Storage Spaces to increase I/O bandwidth",
      "description": "Striping Data and Log disk can increase bandwidth. Ensure that VM size also matches expected output",
      "waf": "Performance",
      "guid": "4b69bad3-4aad-45e8-a78e-1d76667313c4",
      "id": "A02.06",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "Set host caching to read-only for data file disks and none for log file disks.",
      "description": "Your storage caching policy varies depending on the type of SQL Server data files that are hosted on the drive.Enable Read-only caching for the disks hosting SQL Server data files.Reads from cache will be faster than the uncached reads from the data disk.Set the caching policy to None for disks hosting the transaction log. There is no performance benefit to enabling caching for the Transaction log disk.",
      "waf": "Performance",
      "guid": "05674b5e-985b-4859-a773-e7e261623b77",
      "id": "A02.07",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "Provision the storage account in the same region as the SQL Server VM",
      "description": "Check that you storage is in the same region as your VM. For exaplme if your VM is in EAST US 2 ensure your storage is in East US 2.",
      "waf": "Performance",
      "guid": "5a917e1f-348e-4f35-9c27-d42e8bbac868",
      "id": "A02.08",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Storage",
      "text": "Format your data disk to use 64 KB block size (allocation unit size) for all data files placed on a drive other than the temporary D:\\ drive",
      "description": "SQL Server uses extents to store data. These are 64KB in size. Therefore, on a SQL Server machine, the NTFS allocation unit size for hosting SQL database files should be 64 KB.",
      "waf": "Performance",
      "guid": "155abb91-63e9-4908-ae28-c84c33b6b780",
      "id": "A02.09",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql#storage"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "HADR",
      "text": "Determine HA/DR requirements for each VM to be migrated.",
      "description": "It is recommended that you determine BCDR needs and requirements ensuring that you are able to meet you SLAs of the environment.",
      "waf": "Reliability",
      "guid": "8b9fe5c4-2049-4d41-9a92-3c3474d11028",
      "id": "A03.01",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/business-continuity-high-availability-disaster-recovery-hadr-overview?view=azuresql#azure-only-disaster-recovery-solutions"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "HADR",
      "text": "Place your VMs in an availability set or different availability zones.",
      "description": "When depoying High Availability you need to use availability sets or availability zones to avoid unexpected outages.",
      "waf": "Reliability",
      "guid": "ac6aae01-e6a8-44de-9df4-3d1992481718",
      "id": "A03.02",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/business-continuity-high-availability-disaster-recovery-hadr-overview?view=azuresql#high-availability-nodes-in-an-availability-set"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "HADR",
      "text": "Deploy your SQL Server VMs to multiple subnets whenever possible to avoid the dependency on an Azure Load Balancer or a distributed network name (DNN) to route traffic to your HADR solution. ( If one is implementing FCI or AG)",
      "description": "Prefered option when deploying an Availability Group. The recommended solution is to use multi-subnets when deploying Always on Availability Groups.",
      "waf": "Reliability",
      "guid": "d5d1e5f6-2565-49d3-958f-d77249c93111",
      "id": "A03.03",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/availability-group-azure-portal-configure?view=azuresql&tabs=azure-cli"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "HADR",
      "text": "Change the cluster to less aggressive parameters to avoid unexpected outages from transient network failures or Azure platform maintenance. ( If one is implementing FCI or AG)",
      "description": "High availability and disaster recovery (HADR) features, such as the Always On availability group and the failover cluster instance rely on underlying Windows Server Failover Cluster technology. Review the best practices for modifying your HADR settings to better support the cloud environment.",
      "waf": "Reliability",
      "guid": "2d027fe4-12f7-4098-9f63-04722ee69d6b",
      "id": "A03.04",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql-vm#hadr-configuration"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "HADR",
      "text": "Configure cluster quorum voting to use 3 or more odd number of votes. Don't assign votes to DR regions. ( If one is implementing FCI or AG)",
      "description": "Ensure that quorum is set correct for the number of instances deployed.",
      "waf": "Reliability",
      "guid": "5c2622f5-4b69-4bad-94aa-d5e8c78e1d76",
      "id": "A03.05",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/hadr-cluster-best-practices?view=azuresql-vm&tabs=windows2012#quorum-voting"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "HADR",
      "text": "When using the virtual network name (VNN) and Azure Load Balancer to connect to your HADR solution, specify MultiSubnetFailover = true in the connection string, even if your cluster only spans one subnet. ( If one is implementing FCI or AG)",
      "description": "On Azure virtual machines, clusters use a load balancer to hold an IP address that needs to be on one cluster node at a time. In this solution, the load balancer holds the IP address for the virtual network name (VNN) listener for the Always On availability group when the SQL Server VMs are in a single subnet.",
      "waf": "Reliability",
      "guid": "667313c4-0567-44b5-b985-b859c773e7e2",
      "id": "A03.06",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/availability-group-vnn-azure-load-balancer-configure?view=azuresql-vm&tabs=ilb"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Enable database page compression where appropriate.",
      "description": "SQL Server, Azure SQL Database, and Azure SQL Managed Instance support row and page compression for rowstore tables and indexes, and support columnstore and columnstore archival compression for columnstore tables and indexes.",
      "waf": "Performance",
      "guid": "61623b77-5a91-47e1-b348-ef354c27d42e",
      "id": "A04.01",
      "severity": "Low",
      "link": "https://learn.microsoft.com/sql/relational-databases/data-compression/data-compression?view=sql-server-ver16"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Enable instant file initialization for data files.",
      "description": "By default, data and log files are initialized to overwrite any existing data left on the disk from previously deleted files. Data and log files are first initialized by zeroing the files (filling with zeros).In SQL Server, for data files only, instant file initialization (IFI) allows for faster execution of the previously mentioned file operations, since it reclaims used disk space without filling that space with zeros. Instead, disk content is overwritten as new data is written to the files.",
      "waf": "Operations",
      "guid": "8bbac868-155a-4bb9-863e-9908ae28c84c",
      "id": "A04.02",
      "severity": "High",
      "link": "https://learn.microsoft.com/sql/relational-databases/databases/database-instant-file-initialization?view=sql-server-ver16"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Move all databases to data disks, including system databases.",
      "description": "Recommended for best performance and availability migrate all databases to data and log disks",
      "waf": "Operations",
      "guid": "33b6b780-8b9f-4e5c-9204-9d413a923c34",
      "id": "A04.03",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/sql/relational-databases/databases/move-database-files?view=sql-server-ver16"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Move SQL Server error log and trace file directories to data disks.",
      "description": "Part of the SQL Server Feature checklist in the link that is recommended when SQL Server Instance is in an Azure VM.",
      "waf": "Operations",
      "guid": "b824546c-e1ae-4e34-93ae-c8239248725d",
      "id": "A04.04",
      "severity": "Low",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/performance-guidelines-best-practices-checklist?view=azuresql-vm#sql-server-features"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Set max SQL Server memory limit to leave enough memory for the Operating System.",
      "description": "Part of the SQL Server Feature checklist in the link that is recommended when SQL Server Instance is in an Azure VM.",
      "waf": "Performance",
      "guid": "d68c5b5c-2925-4394-a69a-9d2799c42bb6",
      "id": "A04.05",
      "severity": "High",
      "link": "https://learn.microsoft.com/sql/database-engine/configure-windows/server-memory-server-configuration-options#use-"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Enable lock pages in memory.",
      "description": "Part of the SQL Server Feature checklist in the link that is recommended when SQL Server Instance is in an Azure VM.",
      "waf": "Performance",
      "guid": "8d1d7555-6246-4b43-a563-b4dc74a748b6",
      "id": "A04.06",
      "severity": "High",
      "link": "https://learn.microsoft.com/sql/database-engine/configure-windows/enable-the-lock-pages-in-memory-option-windows"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Enable Query Store on all production SQL Server databases following best practices.",
      "description": "Part of the SQL Server Feature checklist in the link that is recommended when SQL Server Instance is in an Azure VM.",
      "waf": "Performance",
      "guid": "633ad2a0-916a-4664-a8fa-d0e278ee293c",
      "id": "A04.07",
      "severity": "Low",
      "link": "https://learn.microsoft.com/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Ensure that all tempdb best practices are followed.",
      "description": "Part of the SQL Server Feature checklist in the link that is recommended when SQL Server Instance is in an Azure VM.",
      "waf": "Performance",
      "guid": "1bc352ba-aab7-4571-a49a-b8093dc9ec9d",
      "id": "A04.08",
      "severity": "High",
      "link": "https://learn.microsoft.com/sql/relational-databases/databases/tempdb-database#optimizing-tempdb-performance-in-sql-server"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Schedule SQL Server Agent jobs to run DBCC CHECKDB, index reorganize, index rebuild, and update statistics jobs.",
      "description": "Part of the SQL Server Feature checklist in the link that is recommended when SQL Server Instance is in an Azure VM.",
      "waf": "Operations",
      "guid": "1bb73b36-a5a6-47fb-a9ed-5b35478c3479",
      "id": "A04.09",
      "severity": "High",
      "link": "https://docs.microsoft.com/azure/governance/management-groups/how-to/protect-resource-hierarchy#setting---require-authorization"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "SQL Server",
      "text": "Limit autogrowth of the database and Disable autoshrink",
      "description": "Part of the SQL Server Feature checklist in the link that is recommended when SQL Server Instance is in an Azure VM.",
      "waf": "Operations",
      "guid": "816b2863-cffe-41ca-a599-ef0d5a73dd4c",
      "id": "A04.10",
      "severity": "Medium",
      "link": "https://docs.microsoft.com/azure/governance/management-groups/how-to/protect-resource-hierarchy#setting---require-authorization"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Cost Optimization",
      "text": "Optimize SQL Server License cost with Constrained vCPU VM's",
      "description": "Constrained vCPU virtual machines (VMs) are a type of VM where the vCPU count can be constrained to a half or a quarter of the original VM size. This allows customers to reduce the cost of software licensing while maintaining the same memory, storage, and I/O bandwidth",
      "waf": "Cost",
      "guid": "e36c1c81-770a-4fbc-9c0d-43918648d285",
      "id": "A05.01",
      "severity": "Low",
      "training": "https://learn.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview",
      "link": "https://learn.microsoft.com/azure/virtual-machines/constrained-vcpu"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Cost Optimization",
      "text": "Leverage Azure Hybrid benefit to maximize the value of your on premises licenses in the cloud",
      "description": "Azure Hybrid Benefit allows you to exchange your existing licenses for discounted rates on Azure SQL Database and Azure SQL Managed Instance. Y",
      "waf": "Cost",
      "guid": "7ed67178-b824-4546-ae1a-ee3453aec823",
      "id": "A05.02",
      "severity": "Low",
      "link": "https://azure.microsoft.com/en-ca/pricing/hybrid-benefit/"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Azure",
      "text": "Register with the SQL IaaS Agent Extension to unlock a number of feature benefits.",
      "description": "The SQL Server IaaS Agent extension (SqlIaasExtension) runs on SQL Server on Azure Windows Virtual Machines (VMs) to automate management and administration tasks.",
      "waf": "Operations",
      "guid": "9248725d-d68c-45b5-a292-5394a69a9d27",
      "id": "A06.01",
      "severity": "Medium",
      "training": "https://learn.microsoft.com/learn/modules/azure-ad-privileged-identity-management/",
      "link": "https://learn.microsoft.com/azure/azure-sql/virtual-machines/windows/sql-agent-extension-automatic-registration-all-vms?view=azuresql-vm&tabs=azure-cli"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Azure",
      "text": "Ensure Accelerated Networking is enabled on the virtual machine.",
      "description": "Accelerated Networking provides consistent ultra-low network latency via Azure's in-house programmable hardware and technologies",
      "waf": "Operations",
      "guid": "99c42bb6-8d1d-4755-9624-6b438563b4dc",
      "id": "A06.02",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/virtual-network/accelerated-networking-overview?tabs=redhat"
    },
    {
      "category": "SQL Server on Azure VM",
      "subcategory": "Azure",
      "text": "Leverage Microsoft Defender for Cloud to improve the overall security posture of your virtual machine deployment.",
      "description": "Microsoft Defender detects anomalous activities indicating unusual and potentially harmful attempts to access or exploit databases on the SQL server.",
      "waf": "Security",
      "guid": "74a748b6-633a-4d2a-8916-a66498fad0e2",
      "id": "A06.03",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/paths/implement-resource-mgmt-security/",
      "link": "https://learn.microsoft.com/azure/defender-for-cloud/secure-score-security-controls"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Review the major differences between SQL Server and Managed Instance",
      "description": "There are some PaaS limitations that are introduced in SQL Managed Instance and some behavior changes compared to SQL Server. It is important to review and understand these differences.",
      "waf": "Operations",
      "guid": "78ee293c-1bc3-452b-aaab-7571849ab809",
      "id": "B01.01",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/modules/plan-implement-administer-conditional-access/",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/transact-sql-tsql-differences-sql-server?view=azuresql"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Review capacity limits for SQL MI",
      "description": "SQL Managed Instance has characteristics and resource limits that depend on the underlying infrastructure and architecture. It is important to review these limits.",
      "waf": "Performance",
      "guid": "3dc9ec9d-1bb7-43b3-9a5a-67fba9ed5b35",
      "id": "B01.02",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/modules/secure-aad-users-with-mfa/",
      "link": "https://docs.microsoft.com/azure/azure-sql/managed-instance/resource-limits"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Compare instance settings on SQL Server and Azure SQL MI that may impact performance",
      "description": "The instance settings between managed instance and your source SQL Server can be different . It is important to review those differences that can impact performance.",
      "waf": "Performance",
      "guid": "8bc178bd-c5a0-46ca-9144-351e19dd3442",
      "id": "B01.03",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/paths/azure-administrator-manage-identities-governance/",
      "link": "https://medium.com/azure-sqldb-managed-instance/compare-environment-settings-on-sql-server-and-azure-sql-that-may-impact-performance-e90c21fa9b08"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Run Data Migration assistant or Azure Data Studio Migration Extension to detect compatibility issues that can impact database functionality on Managed Instance",
      "description": "Assess on-premises SQL Server instance(s) migrating to Azure SQL Managed Instance. The assessment workflow helps you to detect issues that block the migration itself and also partially supported and unsupported features",
      "waf": "Operations",
      "guid": "9eb72281-37a1-451c-9bb4-e4f1814287d5",
      "id": "B01.04",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/modules/azure-ad-privileged-identity-management/",
      "link": "https://docs.microsoft.com/azure/dms/ads-sku-recommend"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Select the right compute resources for your workload by leveraging the SKU recommendation tools.",
      "description": "The SKU recommendation feature can evaluate the source SQL Server performance and utilization characteristics to recommend a right-sized Azure SQL Managed Instance to assist with your migration journey.",
      "waf": "Performance",
      "guid": "ca8c26c9-b32a-4b5b-afc6-898a135e3378",
      "id": "B01.05",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/modules/explore-basic-services-identity-types/",
      "link": "https://learn.microsoft.com/azure/dms/ads-sku-recommend"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Review and address the issues highlighted in DMA/Azure Data Studio",
      "description": "Review Unsupported Features, Migration Blockers and Breaking Changes for each database from the Assessment",
      "waf": "Operations",
      "guid": "97e31c67-d68c-4b69-82ac-19f906d697c8",
      "id": "B01.06",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/paths/manage-identity-and-access/",
      "link": "https://learn.microsoft.com/azure/dms/ads-sku-recommend"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Plan for connection string changes as changing a managed instance name is not supported",
      "description": "The SQL Managed Instance default DNS zone .database.windows.net can be changed with your own. However, the managed instance hostname part of its FQDN should remain the same.",
      "waf": "Operations",
      "guid": "eaded26b-dd18-46f0-ac25-1b999a68af87",
      "id": "B01.07",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/modules/create-custom-azure-roles-with-rbac/",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/frequently-asked-questions-faq?view=azuresql-mi#can-a-managed-instance-have-the-same-name-as-a-sql-server-on-premises-instance"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Review managed instance VNet requirements",
      "description": "There are addional requirements in configuring a vnet and subnet hosting the managed instance.",
      "waf": "Operations",
      "guid": "c9a7f821-b8eb-48c0-aa77-e25e4d5aeaa8",
      "id": "B01.08",
      "severity": "Medium",
      "training": "https://learn.microsoft.com/learn/paths/secure-your-cloud-data/",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/vnet-existing-add-subnet?view=azuresql-mi"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Deployment",
      "text": "Ensure managed instance subnet has sufficient IP addresses available",
      "description": "Though it's possible to deploy managed instances to a subnet with a number of IP addresses that's less than the output of the subnet formula, always consider using bigger subnets instead. Using a bigger subnet can help avoid future issues stemming from a lack of IP addresses, such as the inability to create additional instances within the subnet or scale existing instances.",
      "waf": "Operations",
      "guid": "dc4e2436-bb33-46d7-85f1-7960eee0b9b5",
      "id": "B02.01",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/modules/azure-active-directory/",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/vnet-subnet-determine-size?view=azuresql-mi"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Plan between General Purpose and Business Critical tiers of MI",
      "description": "SQL Managed Instance has characteristics and resource limits that depend on the underlying infrastructure and architecture. SQL Managed Instance can be deployed on multiple hardware configurations.",
      "waf": "Performance",
      "guid": "c8defc4d-721d-431d-850f-b707ae9eab40",
      "id": "B03.01",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/modules/implement-hybrid-identity-windows-server/",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/resource-limits?view=azuresql-mi#service-tier-characteristics"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Based on your RPO/RTO's , determine if Auto failover Group needs to be implemented. If so, plan for the deployment attributes of the second instance.",
      "description": "The auto-failover groups feature allows you to manage the replication and failover of user databases in a managed instance to a managed instance in another Azure region. Auto-failover groups are designed to simplify deployment and management of geo-replicated databases at scale.",
      "waf": "Reliability",
      "guid": "ed329079-8bc1-478b-bc5a-06ca7144351e",
      "id": "B03.02",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/paths/implement-windows-server-iaas-virtual-machine-identity/",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/auto-failover-group-sql-mi?view=azuresql-mi&tabs=azure-powershell"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Review the Connectivity Design between Database and Application, test & validate it",
      "description": "There are multiple ways to connect your application to the managed instance. Review and understand the pros and cons and decide on the best approach for your application.",
      "waf": "Operations",
      "guid": "5d226886-d30b-466c-97be-595190f83845",
      "id": "B03.03",
      "severity": "Low",
      "training": "https://learn.microsoft.com/learn/paths/implement-applications-external-access-azure-ad/",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/connect-application-instance?view=azuresql-mi"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Plan for the Migration Method. Depending on the DB Size and Application downtime window, select the preferred Migration Method.",
      "description": "Compare migration options to choose the path that's appropriate to your business needs.",
      "waf": "Operations",
      "guid": "c586cb29-1ec1-46a1-b076-ef9f141acdce",
      "id": "B03.04",
      "severity": "Medium",
      "training": "https://learn.microsoft.com/learn/modules/design-identity-security-strategy/",
      "link": "https://learn.microsoft.com/azure/azure-sql/migration-guides/managed-instance/sql-server-to-managed-instance-overview?view=azuresql-mi#migration-tools"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Pre Migration",
      "text": "Plan the cutover process with business / application teams to ensure minimal interruption during cutover and it does not affect business continuity.",
      "description": "After you verify that data is the same on both source and target, you can cut over from the source to the target environment. It's important to plan the cutover process with business / application teams to ensure minimal interruption during cutover doesn't affect business continuity.",
      "waf": "Reliability",
      "guid": "579377bc-db37-451a-a2ac-1fad66e15d4d",
      "id": "B03.05",
      "severity": "Medium",
      "training": "https://learn.microsoft.com/azure/architecture/example-scenario/identity/adds-extend-domain",
      "link": "https://learn.microsoft.com/azure/dms/tutorial-sql-server-managed-instance-online#performing-migration-cutover"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Deployment",
      "text": "Ensure you customize your time zone setting at the instance creation time. One cannot change it later.",
      "description": "A time zone of a managed instance can be set during instance creation only. The default time zone is UTC",
      "waf": "Operations",
      "guid": "4a2adb1c-3d23-426a-b225-ca44e1695fdd",
      "id": "B04.01",
      "severity": "High",
      "training": "https://learn.microsoft.com/azure/role-based-access-control/overview",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/timezones-overview?view=azuresql#set-a-time-zone"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Deployment",
      "text": "Ensure you select the right collation setting at the instance creation time. One cannot change it later",
      "description": "Server-level collation in Azure SQL Managed Instance can be specified when the instance is created and cannot be changed later.Default server-level collation is SQL_Latin1_General_CP1_CI_AS.",
      "waf": "Operations",
      "guid": "deace4cb-1deb-44c6-90c3-fc14eebb3693",
      "id": "B04.02",
      "severity": "High",
      "link": "https://learn.microsoft.com/sql/relational-databases/collations/set-or-change-the-server-collation?view=sql-server-ver16"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Deployment",
      "text": "For TDE Enabled Database, corresponding certificate from the on-premises or Azure VM SQL Server needs to be migrated before database restore",
      "description": "When you're migrating a database protected by Transparent Data Encryption (TDE) to Azure SQL Managed Instance using the native restore option, the corresponding certificate from the SQL Server instance needs to be migrated before database restore.",
      "waf": "Operations",
      "guid": "829e3eec-2183-4687-a007-7a2b5945bda4",
      "id": "B04.03",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/tde-certificate-migrate?view=azuresql-mi&tabs=azure-powershell"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Migration",
      "text": "Restore of system databases is not supported. To migrate instance-level objects (stored in master or msdb databases), we recommend to script them out and run T-SQL scripts on the destination instance.",
      "description": "System databases can be restored only from backups that are created on the version of SQL Server that the server instance is currently running. This is not the case when you are migrating to SQL Managed Instance.Azure PowerShell and DBATools PowerShell libraries enable you to easily script and automate and customize all parts of the migration process.",
      "waf": "Operations",
      "guid": "3334fdf9-1c23-4418-8b65-275269440b4b",
      "id": "B05.01",
      "severity": "Low",
      "link": "https://learn.microsoft.com/azure/azure-sql/migration-guides/managed-instance/sql-server-to-managed-instance-guide?view=azuresql-mi#backup-and-restore"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Migration",
      "text": "Ensure that all changes on the source are captured and applied to the target during the migration process.",
      "description": "When using migration options that continuously replicate / sync data changes from source to the target, the source data and schema can change and drift from the target. During data sync, ensure that all changes on the source are captured and applied to the target during the migration process.",
      "waf": "Operations",
      "guid": "e3d3e084-3276-4d4b-bc01-5bcf219e4a1e",
      "id": "B05.02",
      "severity": "High"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Migration",
      "text": "Test Application Connectivity to MI and Databases",
      "description": "Ensure that the application is able to succesffuly connect to the managed instance post migration of the databases.",
      "waf": "Operations",
      "guid": "b5887952-5d22-4688-9d30-b66c57be5951",
      "id": "B05.03",
      "severity": "Medium",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/connect-application-instance?view=azuresql-mi"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "Consider executing a manual failover on SQL Managed Instance to test for fault and failover resiliency.",
      "description": "High availability is a fundamental part of SQL Managed Instance platform that works transparently for your database applications. Failovers from primary to secondary nodes in case of node degradation or fault detection, or during regular monthly software updates are an expected occurrence for all applications using SQL Managed Instance in Azure.",
      "waf": "Reliability",
      "guid": "90f83845-c586-4cb2-a1ec-16a1d076ef9f",
      "id": "B06.01",
      "severity": "High",
      "training": "https://learn.microsoft.com/azure/azure-monitor/logs/design-logs-deployment",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/user-initiated-failover?view=azuresql"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "If failover groups have been implemented, Test Manual Failover and Failback and test application connectivity behavior during failover/failback",
      "description": "Ensuring that your applications are failover resilient prior to deploying to production will help mitigate the risk of application faults in production and will contribute to application availability for your customers.",
      "waf": "Reliability",
      "guid": "141acdce-5793-477b-adb3-751ab2ac1fad",
      "id": "B06.02",
      "severity": "High",
      "link": "https://learn.microsoft.com/azure/azure-sql/managed-instance/auto-failover-group-configure-sql-mi?view=azuresql&tabs=azure-portal#test-failover"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "Optimize Storage Performance for General Purpose Managed Instance",
      "description": "This provides more dedicated disk IOPS and throughput",
      "waf": "Performance",
      "guid": "aa359272-8e6e-4205-8726-76ae46691e88",
      "id": "B06.03",
      "severity": "High",
      "training": "https://learn.microsoft.com/learn/paths/architect-infrastructure-operations/",
      "link": "https://techcommunity.microsoft.com/t5/azure-sql-blog/storage-performance-best-practices-and-considerations-for-azure/ba-p/305525"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "Enable Customer managed TDE for taking your own copy only full backups",
      "description": "Many organizations have policies that require that certificates or encryption keys be created and managed internally. If your organization has a similar policy, this architecture might apply to you. If your customers require internal management of these items, the architecture also might apply to you.",
      "waf": "Security",
      "guid": "35ad9422-23e1-4381-8523-081a94174158",
      "id": "B06.04",
      "severity": "Low",
      "training": "https://learn.microsoft.com/learn/paths/architect-infrastructure-operations/",
      "link": "https://learn.microsoft.com/azure/architecture/example-scenario/data/sql-managed-instance-cmk"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "Plan for Azure maintenance events",
      "description": "The maintenance window feature provides you with the ability to onboard Azure SQL resource to prescheduled time blocks outside of business hours.",
      "waf": "Operations",
      "guid": "33ef7ad7-c6d3-4733-865c-7acbe44bbe60",
      "id": "B06.05",
      "severity": "Medium",
      "training": "https://learn.microsoft.com/learn/paths/implement-resource-mgmt-security/",
      "link": "https://learn.microsoft.com/azure/azure-sql/database/planned-maintenance?view=azuresql"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "Configure Long Term backup retention, view backups and restore from backups",
      "description": "By using the long-term retention (LTR) feature, you can store specified SQL Database and SQL Managed Instance full backups in Azure Blob storage with configured redundancy for up to 10 years.",
      "waf": "Reliability",
      "guid": "9d89f2e8-7778-4424-b516-785c6fa96b96",
      "id": "B06.06",
      "severity": "Low",
      "training": "https://learn.microsoft.com/learn/paths/azure-administrator-manage-compute-resources/",
      "link": "https://learn.microsoft.com/azure/azure-sql/database/long-term-retention-overview?view=azuresql-mi"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "Take advantage of Azure Hybrid Benefit and Azure Reservations where applicable.",
      "description": "By using Azure Hybrid Benefit, you can achieve cost savings, modernise and maintain a flexible hybrid environment while optimising business applications.",
      "waf": "Cost",
      "guid": "ad88408f-3727-434c-a76b-a28021459014",
      "id": "B06.07",
      "severity": "Low",
      "training": "https://learn.microsoft.com/learn/modules/configure-network-watcher/",
      "link": "https://azure.microsoft.com/en-gb/pricing/hybrid-benefit/#overview"
    },
    {
      "category": "SQL Managed Instance",
      "subcategory": "Post Migration",
      "text": "Leverage Microsoft Defender for Cloud to improve the overall security posture",
      "description": "If you don't have threat protection Advanced Threat Protection is part of the Microsoft Defender for SQL offering, which is a unified package for advanced SQL security capabilities.",
      "waf": "Security",
      "guid": "65d38e53-f9cc-4bd8-9926-6acca274faa1",
      "id": "B06.08",
      "severity": "Medium",
      "training": "https://learn.microsoft.com/learn/paths/implement-resource-mgmt-security/",
      "link": "https://learn.microsoft.com/azure/azure-sql/database/threat-detection-overview?view=azuresql"
    }
  ],
  "categories": [
    {
        "name": "SQL Server on Azure VM"
    },
    {
        "name": "SQL Managed Instance"
    }
  ],
  "waf": [
    {
      "name": "Reliability"
    },
    {
      "name": "Security"
    },
    {
      "name": "Cost"
    },
    {
      "name": "Operations"
    },
    {
      "name": "Performance"
    }
  ],
  "yesno": [
    {
      "name": "Yes"
    },
    {
      "name": "No"
    }
  ],
  "status": [
    {
      "name": "Not verified",
      "description": "This check has not been looked at yet"
    },
    {
      "name": "Open",
      "description": "There is an action item associated to this check"
    },
    {
      "name": "Fulfilled",
      "description": "This check has been verified, and there are no further action items associated to it"
    },
    {
      "name": "Not required",
      "description": "Recommendation understood, but not needed by current requirements"
    },
    {
      "name": "N/A",
      "description": "Not applicable for current design"
    }
  ],
  "severities": [
    {
      "name": "High"
    },
    {
      "name": "Medium"
    },
    {
      "name": "Low"
    }
  ],
  "metadata": {
    "name": "SQL Migration Review",
    "state": "Preview",
    "timestamp": "December 12, 2023"
  }
}

