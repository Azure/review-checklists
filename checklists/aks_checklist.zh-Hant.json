{
    "categories": [
        {
            "name": "身份和訪問管理"
        },
        {
            "name": "網路拓撲和連接"
        },
        {
            "name": "BC 和DR"
        },
        {
            "name": "治理與安全"
        },
        {
            "name": "成本治理"
        },
        {
            "name": "操作"
        },
        {
            "name": "應用程式部署"
        }
    ],
    "items": [
        {
            "category": "應用程式部署",
            "cost": 1,
            "guid": "785c2fa5-5b56-4ad4-a408-fe72734c476b",
            "id": "01.01.01",
            "link": "https://learn.microsoft.com/azure/architecture/reference-architectures/containers/aks/secure-baseline-aks",
            "severity": "中等",
            "subcategory": "發展",
            "text": "使用 Canary 或藍/綠部署",
            "waf": "操作"
        },
        {
            "category": "應用程式部署",
            "cost": 1,
            "guid": "ab5351f6-383a-45ed-9c5e-b143b16db40a",
            "id": "01.01.02",
            "link": "https://learn.microsoft.com/azure/aks/use-windows-hpc",
            "service": "AKS",
            "severity": "低",
            "subcategory": "發展",
            "text": "如果需要 AKS Windows 工作負載，可以使用 HostProcess 容器",
            "waf": "可靠性"
        },
        {
            "category": "應用程式部署",
            "guid": "a280dcf5-90ce-465d-b8e1-3f9ccbd46926",
            "id": "01.01.03",
            "link": "https://learn.microsoft.com/azure/azure-functions/functions-kubernetes-keda",
            "scale": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "發展",
            "text": "如果運行事件驅動的工作負載，請使用KEDA",
            "waf": "性能"
        },
        {
            "category": "應用程式部署",
            "guid": "26886d20-b66c-457b-a591-19bf8e8f5c58",
            "id": "01.01.04",
            "link": "https://dapr.io/",
            "service": "AKS",
            "severity": "低",
            "simple": 1,
            "subcategory": "發展",
            "text": "使用 Dapr 簡化微服務開發",
            "waf": "操作"
        },
        {
            "category": "應用程式部署",
            "guid": "3acbe04b-be20-49d3-afda-47778424d116",
            "ha": 1,
            "id": "01.02.01",
            "link": "https://learn.microsoft.com/azure/developer/terraform/create-k8s-cluster-with-tf-and-aks",
            "severity": "中等",
            "simple": -1,
            "subcategory": "基礎架構即代碼",
            "text": "通過 ARM/TF 使用自動化來創建 Azure 資源",
            "waf": "操作"
        },
        {
            "category": "BC 和DR",
            "guid": "36cb45e5-7960-4332-9bdf-8cc23318da61",
            "ha": 1,
            "id": "02.01.01",
            "link": "https://learn.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/business-continuity-and-disaster-recovery",
            "severity": "高",
            "subcategory": "災難恢復",
            "text": "定期安排和執行DR測試",
            "waf": "可靠性"
        },
        {
            "category": "BC 和DR",
            "guid": "170265f4-bb46-4a39-9af7-f317284797b1",
            "ha": 1,
            "id": "02.02.01",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-multi-region",
            "severity": "中等",
            "subcategory": "高可用性",
            "text": "使用 Azure 流量管理器或 Azure Front Door 作為區域故障轉移的全域負載均衡器Use Azure Traffic Manager or Azure Front Door as a global load balancer for region failover",
            "waf": "可靠性"
        },
        {
            "category": "BC 和DR",
            "graph": "resources | where type=='microsoft.containerservice/managedclusters' | extend compliant= isnotnull(properties.agentPoolProfiles[0].availabilityZones) | distinct id,compliant",
            "guid": "578a219a-46be-4b54-9350-24922634292b",
            "ha": 1,
            "id": "02.02.02",
            "link": "https://learn.microsoft.com/azure/aks/availability-zones",
            "severity": "中等",
            "subcategory": "高可用性",
            "text": "如果 Azure 區域支援可用性區域，請使用它們",
            "waf": "可靠性"
        },
        {
            "category": "BC 和DR",
            "cost": -2,
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (sku.tier=='Paid') | distinct id,compliant",
            "guid": "71d41e36-10cc-457b-9a4b-1410d4395898",
            "ha": 2,
            "id": "02.02.03",
            "link": "https://learn.microsoft.com/azure/aks/uptime-sla",
            "service": "AKS",
            "severity": "高",
            "subcategory": "高可用性",
            "text": "使用 SLA 支援的 AKS 產品/服務",
            "waf": "可靠性"
        },
        {
            "category": "BC 和DR",
            "guid": "c1288b3c-6a57-4cfc-9444-51e1a3d3453a",
            "ha": 1,
            "id": "02.02.04",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-scheduler",
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "高可用性",
            "text": "在容器和部署定義中使用中斷預算",
            "waf": "可靠性"
        },
        {
            "category": "BC 和DR",
            "cost": -1,
            "guid": "3c763963-7a55-42d5-a15e-401955387e5c",
            "ha": 1,
            "id": "02.02.05",
            "link": "https://learn.microsoft.com/azure/container-registry/container-registry-geo-replication",
            "service": "ACR",
            "severity": "高",
            "subcategory": "高可用性",
            "text": "如果使用專用註冊表，請配置區域複製以將映像存儲在多個區域中",
            "waf": "可靠性"
        },
        {
            "category": "BC 和DR",
            "guid": "bc14aea6-e65d-48d9-a3ad-c218e6436b06",
            "ha": 1,
            "id": "02.03.01",
            "link": "https://learn.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/business-continuity-and-disaster-recovery",
            "severity": "高",
            "subcategory": "要求",
            "text": "定義非功能性需求，例如 SLA、RTO（恢復時間目標）和 RPO（恢復點目標）。",
            "waf": "可靠性"
        },
        {
            "category": "成本治理",
            "cost": 1,
            "guid": "f82cb8eb-8c0a-4a63-a25a-4956eaa8dc4a",
            "id": "03.01.01",
            "link": "https://learn.microsoft.com/azure/cloud-adoption-framework/scenarios/aks/eslz-cost-governance-with-kubecost",
            "service": "AKS",
            "severity": "低",
            "subcategory": "成本",
            "text": "使用外部應用程式（如 kubecost）將成本分配給不同的使用者",
            "waf": "成本"
        },
        {
            "category": "成本治理",
            "cost": 1,
            "guid": "4d3dfbab-9924-4831-a68d-fdf0d72f462c",
            "id": "03.01.02",
            "link": "https://learn.microsoft.com/azure/aks/scale-down-mode",
            "service": "AKS",
            "severity": "低",
            "subcategory": "成本",
            "text": "使用縮減模式刪除/去分配節點",
            "waf": "成本"
        },
        {
            "category": "成本治理",
            "cost": 1,
            "guid": "87e651ea-bc4a-4a87-a6df-c06a4b570ebc",
            "id": "03.01.03",
            "link": "https://learn.microsoft.com/azure/aks/gpu-multi-instance",
            "service": "AKS",
            "severity": "中等",
            "subcategory": "成本",
            "text": "需要時，在 AKS 群集上使用多實例分區 GPU",
            "waf": "成本"
        },
        {
            "category": "成本治理",
            "cost": 1,
            "guid": "2b72a08b-0410-4cd6-9093-e068a5cf27e8",
            "id": "03.01.04",
            "link": "https://learn.microsoft.com/azure/aks/start-stop-nodepools",
            "service": "AKS",
            "severity": "低",
            "subcategory": "成本",
            "text": "如果運行開發/測試群集，請使用 NodePool 啟動/停止",
            "waf": "成本"
        },
        {
            "category": "治理與安全",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.azurepolicy) and properties.addonProfiles.azurepolicy.enabled==true) | distinct id,compliant",
            "guid": "9ca48e4a-85e2-4223-bce8-bb12307ca5f1",
            "id": "04.01.01",
            "link": "https://learn.microsoft.com/azure/governance/policy/concepts/policy-for-kubernetes",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "合規",
            "text": "使用適用於 Kubernetes 的 Azure Policy 確保群集符合性",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "cost": -1,
            "graph": "where type=='microsoft.containerservice/managedclusters' | project id,resourceGroup,name,pools=properties.agentPoolProfiles | project id,name,resourceGroup,poolcount=array_length(pools) | extend compliant = (poolcount > 1)",
            "guid": "6f158e3e-a3a9-42c2-be7e-2165c3a87af4",
            "id": "04.01.02",
            "link": "https://learn.microsoft.com/azure/aks/use-system-pools",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "合規",
            "text": "使用使用者/系統節點池將應用程式與控制平面分開",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "guid": "a7a1f893-9bda-4477-98f2-4c116775c2ea",
            "ha": 1,
            "id": "04.01.03",
            "link": "https://learn.microsoft.com/azure/aks/use-system-pools",
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "合規",
            "text": "將污點添加到系統節點池以使其專用",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "guid": "55b46a94-8008-4ae7-b7e4-b475b6c8bdbf",
            "id": "04.01.04",
            "link": "https://learn.microsoft.com/azure/container-registry/",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "合規",
            "text": "對映像使用專用註冊表，例如 ACR",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "cost": -1,
            "guid": "59bce65d-e8a0-43f9-9879-468d66a786d6",
            "id": "04.01.05",
            "link": "https://learn.microsoft.com/azure/security-center/container-security",
            "security": 1,
            "service": "ACR",
            "severity": "中等",
            "subcategory": "合規",
            "text": "掃描映像以查找漏洞",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "cost": -1,
            "guid": "cc639637-a652-42ac-89e8-06965388e9de",
            "id": "04.01.06",
            "link": "https://learn.microsoft.com/azure/security-center/container-security",
            "security": 1,
            "severity": "中等",
            "subcategory": "合規",
            "text": "使用 Azure 安全中心檢測安全態勢漏洞",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "cost": -1,
            "guid": "42d4aefe-2383-470e-b019-c30df24996b2",
            "id": "04.01.07",
            "link": "https://learn.microsoft.com/azure/aks/use-multiple-node-pools#add-a-fips-enabled-node-pool",
            "security": 1,
            "severity": "低",
            "subcategory": "合規",
            "text": "如果需要，請配置 FIPS",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "guid": "d167dd18-2b0a-4c24-8b99-9a646f8389a7",
            "id": "04.01.08",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-cluster-isolation",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "合規",
            "text": "定義應用程式分離要求（命名空間/節點池/群集）",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "guid": "5e3df584-eccc-4d97-a3b6-bcda3b50eb2e",
            "id": "04.02.01",
            "link": "https://github.com/Azure/secrets-store-csi-driver-provider-azure",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "秘密",
            "text": "使用 CSI 機密存儲驅動程式將機密存儲在 Azure Key Vault 中",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "guid": "b03dda6d-58d7-4c89-8ddb-107d5769ae66",
            "id": "04.02.02",
            "link": "https://learn.microsoft.com/azure/aks/update-credentials",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "秘密",
            "text": "如果對群集使用服務主體，請定期（如每季度）刷新憑據",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "cost": -1,
            "guid": "e7ba73a3-0508-4f80-806f-527db30cee96",
            "id": "04.02.03",
            "link": "https://learn.microsoft.com/azure/aks/use-kms-etcd-encryption",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "subcategory": "秘密",
            "text": "如果需要，請添加金鑰管理服務 etcd 加密",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "cost": -1,
            "guid": "ec8e4e42-0344-41b0-b865-9123e8956d31",
            "id": "04.02.04",
            "link": "https://learn.microsoft.com/azure/confidential-computing/confidential-nodes-aks-overview",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "subcategory": "秘密",
            "text": "如果需要，請考慮使用適用於 AKS 的機密計算",
            "waf": "安全"
        },
        {
            "category": "治理與安全",
            "cost": -1,
            "guid": "c9e95ffe-6dd1-4a17-8c5f-110389ca9b21",
            "id": "04.02.05",
            "link": "https://learn.microsoft.com/azure/defender-for-cloud/defender-for-containers-enable",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "subcategory": "秘密",
            "text": "考慮使用 Defender for Containers",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.servicePrincipalProfile.clientId=='msi') | distinct id,compliant",
            "guid": "ed127dd1-42b0-46b2-8c69-99a646f3389a",
            "id": "05.01.01",
            "link": "https://learn.microsoft.com/azure/aks/use-managed-identity",
            "service": "AKS",
            "severity": "高",
            "simple": 1,
            "subcategory": "身份",
            "text": "使用託管標識而不是服務主體",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = isnotnull(properties.aadProfile) | distinct id,compliant",
            "guid": "7e42c78e-78c0-46a6-8a21-94956e698dc4",
            "id": "05.01.02",
            "link": "https://learn.microsoft.com/azure/aks/managed-aad",
            "service": "AKS",
            "severity": "中等",
            "simple": 1,
            "subcategory": "身份",
            "text": "將身份驗證與 AAD 集成（使用託管集成）Integrate authentication with AAD （using the managed integration）",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "a2fe27b2-e287-401a-8352-beedf79b488d",
            "id": "05.01.03",
            "link": "https://learn.microsoft.com/azure/aks/control-kubeconfig-access",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "身份",
            "text": "限制對管理員 kubeconfig （get-credentials --admin） 的訪問",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "eec4962c-c3bd-421b-b77f-26e5e6b3bec3",
            "id": "05.01.04",
            "link": "https://learn.microsoft.com/azure/aks/manage-azure-rbac",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "身份",
            "text": "將授權與 AAD RBAC 集成",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "d4f3537c-1346-4dc5-9027-a71ffe1bd05d",
            "ha": 1,
            "id": "05.01.05",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-identity",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "身份",
            "text": "在 Kubernetes 中使用命名空間限制 RBAC 許可權",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "d2e0d5d7-71d4-41e3-910c-c57b4a4b1410",
            "id": "05.01.06",
            "link": "https://learn.microsoft.com/azure/aks/workload-identity-migration-sidecar",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "身份",
            "text": "對於 Pod Identity Access Management，請使用 Azure AD 工作負載標識（預覽版）",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "f4dcf690-1b30-407d-abab-6f8aa780d3a3",
            "id": "05.01.07",
            "link": "https://learn.microsoft.com/azure/aks/managed-aad#non-interactive-sign-in-with-kubelogin",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "身份",
            "text": "對於 AKS 非互動式登錄，請使用 kubelogin（預覽版）",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.disableLocalAccounts==true) | distinct id,compliant",
            "guid": "b085b1f2-3119-4771-8c9a-bbf4411810ec",
            "id": "05.01.08",
            "link": "https://learn.microsoft.com/azure/aks/managed-aad#disable-local-accounts",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "身份",
            "text": "禁用 AKS 本地帳戶",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "36abb0db-c118-4f4c-9880-3f30f9a2deb6",
            "id": "05.01.09",
            "link": "https://learn.microsoft.com/azure/aks/managed-aad#configure-just-in-time-cluster-access-with-azure-ad-and-aks",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "身份",
            "text": "如果需要，請進行配置：即時群集訪問Configure if required Just-in-time cluster access",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "c4d7f4c6-79bf-45d0-aa05-ce8fc717e150",
            "id": "05.01.10",
            "link": "https://learn.microsoft.com/azure/aks/managed-aad#use-conditional-access-with-azure-ad-and-aks",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "身份",
            "text": "如果需要，請為 AKS 配置 AAD 條件存取",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "e1123a7c-a333-4eb4-a120-4ee3f293c9f3",
            "id": "05.01.11",
            "link": "https://learn.microsoft.com/azure/aks/use-group-managed-service-accounts",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "身份",
            "text": "如果需要 Windows AKS 工作負載，請配置 gMSA",
            "waf": "安全"
        },
        {
            "category": "身份和訪問管理",
            "guid": "1f711a74-3672-470b-b8b8-a2148d640d79",
            "id": "05.01.12",
            "link": "https://learn.microsoft.com/azure/aks/use-managed-identity#use-a-pre-created-kubelet-managed-identity",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "身份",
            "text": "為了進行更精細的控制，請考慮使用託管的 Kubelet 標識",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "cbd8ac2a-aebc-4a2a-94da-1dbf3dc99248",
            "id": "06.01.01",
            "link": "https://azure.github.io/application-gateway-kubernetes-ingress/setup/install-existing/",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "最佳做法",
            "text": "如果使用 AGIC，請不要在群集之間共用 AppGW",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnull(properties.addonProfiles.httpApplicationRouting) or properties.addonProfiles.httpApplicationRouting.enabled==false) | distinct id,compliant",
            "guid": "8008ae7d-7e4b-4475-a6c8-bdbf59bce65d",
            "id": "06.01.02",
            "link": "https://learn.microsoft.com/azure/aks/http-application-routing",
            "scale": 1,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "最佳做法",
            "text": "請勿使用 AKS 應用程式路由載入項",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnull(properties.addonProfiles.httpApplicationRouting) or properties.addonProfiles.httpApplicationRouting.enabled==false) | distinct id,compliant",
            "guid": "7bacd7b9-c025-4a9d-a5d2-25d6bc5439d9",
            "id": "06.01.03",
            "link": "https://learn.microsoft.com/azure/virtual-network/accelerated-networking-overview",
            "scale": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "最佳做法",
            "text": "對於 Windows 工作負載，請使用加速網路",
            "waf": "性能"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (tolower(properties.networkProfile.loadBalancerSku)=='standard') | distinct id,compliant",
            "guid": "ba7da7be-9952-4914-a384-5d997cb39132",
            "id": "06.01.04",
            "link": "https://learn.microsoft.com/azure/aks/load-balancer-standard",
            "scale": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "最佳做法",
            "text": "使用標準 ALB（而不是基本 ALB）",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "22fbe8d6-9b40-47ef-9011-25bb1a555a6b",
            "id": "06.01.05",
            "link": "https://learn.microsoft.com/azure/aks/use-multiple-node-pools#add-a-node-pool-with-a-unique-subnet",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -2,
            "subcategory": "最佳做法",
            "text": "如果使用 Azure CNI，請考慮對 NodePool 使用不同的子網",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "c3c39c98-6bb2-4c12-859a-114b5e3df584",
            "id": "06.02.01",
            "link": "https://learn.microsoft.com/azure/private-link/private-link-overview",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "成本",
            "text": "使用專用終結點（首選）或虛擬網路服務終結點從群集訪問 PaaS 服務",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "cost": -1,
            "guid": "e8a03f97-8794-468d-96a7-86d60f96c97b",
            "ha": 1,
            "id": "06.03.01",
            "link": "https://learn.microsoft.com/azure/expressroute/designing-for-disaster-recovery-with-expressroute-privatepeering",
            "severity": "中等",
            "subcategory": "醫管 局",
            "text": "如果需要混合連接，請使用 2xER 或 ER+VPN 以獲得更好的可用性",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.networkProfile.networkPlugin=='azure') | distinct id,compliant",
            "guid": "a0f61565-9de5-458f-a372-49c831112dbd",
            "id": "06.04.01",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-network",
            "service": "AKS",
            "severity": "高",
            "simple": 1,
            "subcategory": "IPAM的",
            "text": "選擇最適合你要求的 CNI 網路外掛程式（建議使用 Azure CNI）",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "7faf12e7-0943-4f63-8472-2da29c2b1cd6",
            "id": "06.04.02",
            "link": "https://learn.microsoft.com/azure/aks/configure-azure-cni",
            "scale": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "IPAM的",
            "text": "如果使用 Azure CNI，請根據每個節點的最大 Pod 數相應地調整子網大小",
            "waf": "性能"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "22f54b29-bade-43aa-b1e8-c38ec9366673",
            "id": "06.04.03",
            "link": "https://learn.microsoft.com/azure/aks/configure-azure-cni",
            "scale": 1,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "IPAM的",
            "text": "如果使用 Azure CNI，請檢查最大 Pod/節點數（預設為 30）",
            "waf": "性能"
        },
        {
            "category": "網路拓撲和連接",
            "description": "對於內部應用，組織通常會在其防火牆中打開整個AKS子網。這也會打開對節點的網路訪問，也可能打開對 Pod 的網路訪問（如果使用 Azure CNI）。如果 LoadBalancer IP 位於不同的子網中，則只有此 IP 可供應用用戶端使用。另一個原因是，如果 AKS 子網中的 IP 位址是稀缺資源，則將其 IP 位址用於服務將降低群集的最大可伸縮性。",
            "guid": "13c00567-4b1e-4945-a459-c373e7ed6162",
            "id": "06.04.04",
            "link": "https://learn.microsoft.com/azure/aks/internal-lb",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "IPAM的",
            "text": "如果使用專用 IP 負載均衡器服務，請使用專用子網（而不是 AKS 子網）",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "43f63047-22d9-429c-8b1c-d622f54b29ba",
            "id": "06.04.05",
            "link": "https://learn.microsoft.com/azure/aks/configure-azure-cni",
            "scale": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "IPAM的",
            "text": "相應調整服務 IP 位址範圍的大小（這將限制群集的可伸縮性）",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "57bf217f-6dc8-481c-81e2-785773e9c00f",
            "id": "06.05.01",
            "link": "https://learn.microsoft.com/azure/aks/use-byo-cni",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -2,
            "subcategory": "操作",
            "text": "如果需要，請添加您自己的 CNI 外掛程式",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "4b3bb365-9458-44d9-9ed1-5c8f52890364",
            "id": "06.05.02",
            "link": "https://learn.microsoft.com/azure/aks/use-multiple-node-pools#assign-a-public-ip-per-node-for-your-node-pools",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -2,
            "subcategory": "操作",
            "text": "如果需要，請在 AKS 中設定每個節點的公共 IP（如果需要）",
            "waf": "性能"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "b3808b9f-a1cf-4204-ad01-3a923ce474db",
            "id": "06.06.01",
            "link": "https://learn.microsoft.com/azure/aks/concepts-network",
            "scale": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "可擴展性",
            "text": "使用入口控制器公開基於 Web 的應用，而不是使用 LoadBalancer 類型的服務公開它們",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "ccb534e7-416e-4a1d-8e93-533b53199085",
            "id": "06.06.02",
            "link": "https://learn.microsoft.com/azure/aks/nat-gateway",
            "scale": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "可擴展性",
            "text": "使用 Azure NAT 閘道作為 outboundType 縮放出口流量",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "8ee9a69a-1b58-4b1e-9c61-476e110a160b",
            "id": "06.06.03",
            "link": "https://learn.microsoft.com/azure/aks/configure-azure-cni#dynamic-allocation-of-ips-and-enhanced-subnet-support",
            "scale": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "可擴展性",
            "text": "使用IP的動態分配來避免 Azure CNI IP 耗盡",
            "waf": "可靠性"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.networkProfile.outboundType=='userDefinedRouting') | distinct id,compliant",
            "guid": "3b365a91-7ecb-4e48-bbe5-4cd7df2e8bba",
            "id": "06.07.01",
            "link": "https://learn.microsoft.com/azure/aks/limit-egress-traffic",
            "security": 2,
            "service": "AKS",
            "severity": "高",
            "simple": -2,
            "subcategory": "安全",
            "text": "如果安全要求，請使用 AzFW/NVA 篩選出口流量",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = ((isnull(properties.apiServerAccessProfile.enablePrivateCluster) or properties.apiServerAccessProfile.enablePrivateCluster==false) and isnotnull(properties.apiServerAccessProfile.authorizedIPRanges)) | distinct id,compliant",
            "guid": "c4581559-bb91-463e-a908-aed8c44ce3b2",
            "id": "06.07.02",
            "link": "https://learn.microsoft.com/azure/aks/api-server-authorized-ip-ranges",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "安全",
            "text": "如果使用公有 API 終端節點，請限制可以存取它的 IP 位址",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | where isnotnull(properties.apiServerAccessProfile.enablePrivateCluster) | extend compliant = (properties.apiServerAccessProfile.enablePrivateCluster==true) | distinct id, compliant",
            "guid": "ecccd979-3b6b-4cda-9b50-eb2eb03dda6d",
            "id": "06.07.03",
            "link": "https://learn.microsoft.com/azure/aks/private-clusters",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "安全",
            "text": "如果要求使用專用群集，請使用專用群集",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | where isnotnull(properties.apiServerAccessProfile.enablePrivateCluster) | extend compliant = (properties.apiServerAccessProfile.enablePrivateCluster==true) | distinct id, compliant",
            "guid": "ce7f2a7c-297c-47c6-adea-a6ff838db665",
            "id": "06.07.04",
            "link": "https://learn.microsoft.com/azure/aks/use-network-policies",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "安全",
            "text": "對於 Windows 2019 和 2022 AKS 節點，可以使用 Calico 網路策略",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = isnotnull(properties.networkProfile.networkPolicy) | distinct id,compliant",
            "guid": "58d7c892-ddb1-407d-9769-ae669ca48e4a",
            "id": "06.07.05",
            "link": "https://learn.microsoft.com/azure/aks/use-network-policies",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "安全",
            "text": "啟用 Kubernetes 網路策略選項 （Calico/Azure）",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "85e2223e-ce8b-4b12-907c-a5f16f158e3e",
            "id": "06.07.06",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-network",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "安全",
            "text": "使用 Kubernetes 網路策略提高集群內安全性",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "cost": -1,
            "guid": "a3a92c2d-e7e2-4165-a3a8-7af4a7a1f893",
            "id": "06.07.07",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-network",
            "security": 2,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "安全",
            "text": "將 WAF 用於 Web 工作負載（UI 或 API）",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "cost": -2,
            "graph": "Resources | where type=~'microsoft.containerservice/managedclusters' | project resourceGroup,name,pools=properties.agentPoolProfiles | mv-expand pools | project subnetId=tostring(pools.vnetSubnetID) | where isnotempty(subnetId) | join (Resources | where type=='microsoft.network/virtualnetworks' | project id,resourceGroup,name,enableDdosProtection=tostring(properties.enableDdosProtection),subnets=properties.subnets | mv-expand subnets | project id,resourceGroup,name,enableDdosProtection,subnetId=tostring(subnets.id)) on subnetId | distinct id,resourceGroup,name,enableDdosProtection | extend compliant = (enableDdosProtection == 'true')",
            "guid": "9bda4776-8f24-4c11-9775-c2ea55b46a94",
            "id": "06.07.08",
            "link": "https://learn.microsoft.com/azure/virtual-network/ddos-protection-overview",
            "security": 2,
            "service": "AKS",
            "severity": "中等",
            "subcategory": "安全",
            "text": "在 AKS 虛擬網路中使用 DDoS 標準",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "cost": -2,
            "graph": "Resources | where type=~'microsoft.containerservice/managedclusters' | project resourceGroup,name,pools=properties.agentPoolProfiles | mv-expand pools | project subnetId=tostring(pools.vnetSubnetID) | where isnotempty(subnetId) | join (Resources | where type=='microsoft.network/virtualnetworks' | project id,resourceGroup,name,enableDdosProtection=tostring(properties.enableDdosProtection),subnets=properties.subnets | mv-expand subnets | project id,resourceGroup,name,enableDdosProtection,subnetId=tostring(subnets.id)) on subnetId | distinct id,resourceGroup,name,enableDdosProtection | extend compliant = (enableDdosProtection == 'true')",
            "guid": "6c46b91a-1107-4485-ad66-3183e2a8c266",
            "id": "06.07.09",
            "link": "https://learn.microsoft.com/azure/aks/http-proxy",
            "security": 2,
            "service": "AKS",
            "severity": "低",
            "subcategory": "安全",
            "text": "如果需要，請添加公司 HTTP 代理",
            "waf": "安全"
        },
        {
            "category": "網路拓撲和連接",
            "guid": "e9855d04-c3c3-49c9-a6bb-2c12159a114b",
            "id": "06.07.10",
            "link": "https://learn.microsoft.com/azure/aks/servicemesh-about",
            "security": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -2,
            "subcategory": "安全",
            "text": "考慮使用服務網格進行高級微服務通信管理",
            "waf": "安全"
        },
        {
            "category": "操作",
            "guid": "67f7a9ed-5b31-4f38-a3f3-9812b2463cff",
            "ha": 1,
            "id": "07.01.01",
            "link": "https://learn.microsoft.com/azure/azure-monitor/insights/container-insights-metric-alerts",
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "提醒",
            "text": "針對最關鍵的指標配置警報（有關建議，請參閱容器見解）",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "337453a3-cc63-4963-9a65-22ac19e80696",
            "ha": 1,
            "id": "07.02.01",
            "link": "https://learn.microsoft.com/azure/advisor/advisor-get-started",
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "合規",
            "text": "定期查看 Azure 顧問，以獲取有關群集的建議",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "3aa70560-e7e7-4968-be3d-628af35b2ced",
            "id": "07.02.03",
            "link": "https://learn.microsoft.com/azure/aks/certificate-rotation",
            "service": "AKS",
            "severity": "低",
            "simple": 1,
            "subcategory": "合規",
            "text": "啟用 AKS 自動證書輪換",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "e189c599-df0d-45a7-9dd4-ce32c1881370",
            "id": "07.02.04",
            "link": "https://learn.microsoft.com/azure/aks/supported-kubernetes-versions",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "合規",
            "text": "定期（例如，每季度）升級 kubernetes 版本，或使用 AKS 自動升級功能",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "6f7c4c0d-4e51-4464-ad24-57ed67138b82",
            "id": "07.02.05",
            "link": "https://learn.microsoft.com/azure/aks/node-updates-kured",
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "合規",
            "text": "如果不使用 node-image 升級，請使用 kured 進行 Linux 節點升級",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "139c9580-ade3-426a-ba09-cf157d9f6477",
            "id": "07.02.06",
            "link": "https://learn.microsoft.com/azure/aks/node-image-upgrade",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "合規",
            "text": "定期（例如，每周）升級群集節點映像的常規過程",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "0102ce16-ee30-41e6-b882-e52e4621dd68",
            "id": "07.02.07",
            "link": "https://learn.microsoft.com/azure/architecture/example-scenario/bedrock/bedrock-automated-deployments",
            "service": "AKS",
            "severity": "低",
            "subcategory": "合規",
            "text": "考慮將應用程式或集群配置部署到多個集群的 gitops",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "d7672c26-7602-4482-85a4-14527fbe855c",
            "id": "07.02.08",
            "link": "https://learn.microsoft.com/azure/aks/command-invoke",
            "service": "AKS",
            "severity": "低",
            "subcategory": "合規",
            "text": "考慮在專用群集上使用 AKS 命令調用",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "31d7aaab-7571-4449-ab80-53d89e89d17b",
            "id": "07.02.09",
            "link": "https://learn.microsoft.com/azure/aks/node-auto-repair#node-autodrain",
            "security": 1,
            "service": "AKS",
            "severity": "低",
            "subcategory": "合規",
            "text": "對於計劃內的事件，請考慮使用節點自動排水",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "ed0fda7f-211b-47c7-8b6e-c18873fb473c",
            "id": "07.02.10",
            "link": "https://learn.microsoft.com/azure/aks/faq",
            "security": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "合規",
            "text": "制定自己的治理實踐，以確保節點 RG（又名“infra RG”）中的操作員不執行任何更改",
            "waf": "操作"
        },
        {
            "category": "操作",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (properties.nodeResourceGroup !startswith 'MC_') | distinct id,compliant",
            "guid": "73b32a5a-67f7-4a9e-b5b3-1f38c3f39812",
            "id": "07.02.11",
            "link": "https://learn.microsoft.com/azure/aks/cluster-configuration",
            "service": "AKS",
            "severity": "低",
            "simple": 1,
            "subcategory": "合規",
            "text": "使用自定義節點 RG（又名“Infra RG”）名稱",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "b2463cff-e189-4c59-adf0-d5a73dd4ce32",
            "ha": 1,
            "id": "07.02.12",
            "link": "https://kubernetes.io/docs/setup/release/notes/",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "合規",
            "text": "不要在 YAML 清單中使用已棄用的 Kubernetes API",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "c1881370-6f7c-44c0-b4e5-14648d2457ed",
            "ha": 1,
            "id": "07.02.13",
            "link": "https://learn.microsoft.com/azure-stack/aks-hci/adapt-apps-mixed-os-clusters",
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "合規",
            "text": "污點 Windows 節點",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "67138b82-0102-4ce1-9ee3-01e6e882e52e",
            "id": "07.02.14",
            "link": "https://learn.microsoft.com/virtualization/windowscontainers/deploy-containers/version-compatibility?tabs=windows-server-20H2%2Cwindows-10-20H2",
            "service": "AKS",
            "severity": "低",
            "subcategory": "合規",
            "text": "使 Windows 容器修補程式級別與主機修補程式級別保持同步",
            "waf": "操作"
        },
        {
            "category": "操作",
            "cost": -1,
            "description": "通過群集級別的診斷設置",
            "guid": "5b56ad48-408f-4e72-934c-476ba280dcf5",
            "ha": 1,
            "id": "07.02.15",
            "link": "https://learn.microsoft.com/azure/aks/monitor-aks",
            "service": "AKS",
            "severity": "低",
            "subcategory": "合規",
            "text": "將主日誌（也稱為 API 紀錄）發送到 Azure Monitor 或首選日誌管理解決方案",
            "waf": "操作"
        },
        {
            "category": "操作",
            "cost": 1,
            "guid": "64d1a846-e28a-4b6b-9a33-22a635c15a21",
            "id": "07.02.16",
            "link": "https://learn.microsoft.com/azure/aks/node-pool-snapshot",
            "service": "AKS",
            "severity": "低",
            "subcategory": "合規",
            "text": "如果需要，請使用 nodePool 快照",
            "waf": "成本"
        },
        {
            "category": "操作",
            "cost": 1,
            "guid": "c5a5b252-1e44-4a59-a9d2-399c4d7b68d0",
            "id": "07.03.01",
            "link": "https://learn.microsoft.com/azure/aks/spot-node-pool",
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "成本",
            "text": "考慮將現成節點池用於非時間敏感型工作負載",
            "waf": "操作"
        },
        {
            "category": "操作",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.aciConnectorLinux) and properties.addonProfiles.aciConnectorLinux.enabled==true) | distinct id,compliant",
            "guid": "c755562f-2b4e-4456-9b4d-874a748b662e",
            "id": "07.03.02",
            "link": "https://learn.microsoft.com/azure/aks/concepts-scale",
            "scale": 1,
            "service": "AKS",
            "severity": "低",
            "simple": -1,
            "subcategory": "成本",
            "text": "考慮使用用於快速突發的 AKS 虛擬節點",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "6f8389a7-f82c-4b8e-a8c0-aa63a25a4956",
            "ha": 1,
            "id": "07.04.01",
            "link": "https://learn.microsoft.com/azure/azure-monitor/insights/container-insights-overview",
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "監測",
            "text": "使用 Container Insights（或 Prometheus 等其他工具）監控集群指標",
            "waf": "操作"
        },
        {
            "category": "操作",
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.addonProfiles.omsagent) and properties.addonProfiles.omsagent.enabled==true) | distinct id,compliant",
            "guid": "eaa8dc4a-2436-47b3-9697-15b1752beee0",
            "ha": 1,
            "id": "07.04.02",
            "link": "https://learn.microsoft.com/azure/azure-monitor/insights/container-insights-overview",
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "監測",
            "text": "使用 Container Insights（或 Telegraf/ElasticSearch 等其他工具）存儲和分析集群日誌",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "4621dd68-c5a5-4be2-bdb1-1726769ef669",
            "ha": 1,
            "id": "07.04.03",
            "link": "https://learn.microsoft.com/azure/azure-monitor/containers/container-insights-analyze",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "監測",
            "text": "監控節點的 CPU 和記憶體利用率",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "1a4835ac-9422-423e-ae80-b123081a5417",
            "ha": 1,
            "id": "07.04.04",
            "link": "https://learn.microsoft.com/azure/aks/configure-azure-cni",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "監測",
            "text": "如果使用 Azure CNI，請監視每個節點使用的 Pod IP 百分比",
            "waf": "操作"
        },
        {
            "category": "操作",
            "description": "OS 磁碟上的 I/O 是關鍵資源。如果節點中的OS在I/O上受到限制，這可能會導致不可預知的行為，通常最終導致節點被聲明為 NotReady",
            "guid": "415833ea-3ad3-4c2d-b733-165c3acbe04b",
            "ha": 1,
            "id": "07.04.05",
            "link": "https://learn.microsoft.com/azure/virtual-machines/premium-storage-performance",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "監測",
            "text": "監視節點中的OS磁碟佇列深度",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "be209d39-fda4-4777-a424-d116785c2fa5",
            "ha": 1,
            "id": "07.04.06",
            "link": "https://learn.microsoft.com/azure/aks/load-balancer-standard",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "監測",
            "text": "如果不對 AzFW/NVA 使用出口篩選，請監視標準 ALB 分配的 SNAT 連接埠",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "74c2ee76-569b-4a79-a57e-dedf91b022c9",
            "ha": 1,
            "id": "07.04.07",
            "link": "https://learn.microsoft.com/azure/aks/aks-resource-health",
            "service": "AKS",
            "severity": "中等",
            "subcategory": "監測",
            "text": "訂閱 AKS 群集的資源運行狀況通知",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "b54eb2eb-03dd-4aa3-9927-18e2edb11726",
            "ha": 1,
            "id": "07.05.01",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-scheduler",
            "service": "AKS",
            "severity": "高",
            "simple": -1,
            "subcategory": "資源",
            "text": "在容器規範中配置請求和限制",
            "waf": "操作"
        },
        {
            "category": "操作",
            "guid": "769ef669-1a48-435a-a942-223ece80b123",
            "ha": 1,
            "id": "07.05.02",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-scheduler",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "資源",
            "text": "強制實施命名空間的資源配額",
            "waf": "操作"
        },
        {
            "category": "操作",
            "cost": 1,
            "guid": "081a5417-4158-433e-a3ad-3c2de733165c",
            "id": "07.05.03",
            "link": "https://learn.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits",
            "service": "AKS",
            "severity": "高",
            "subcategory": "資源",
            "text": "確保訂閱具有足夠的配額來橫向擴展節點池",
            "waf": "操作"
        },
        {
            "category": "操作",
            "cost": -1,
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.autoScalerProfile)) | distinct id,compliant",
            "guid": "90ce65de-8e13-4f9c-abd4-69266abca264",
            "ha": 1,
            "id": "07.06.01",
            "link": "https://learn.microsoft.com/azure/aks/concepts-scale",
            "service": "AKS",
            "severity": "中等",
            "subcategory": "可擴展性",
            "text": "使用群集自動縮放程式",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": -1,
            "graph": "where type=='microsoft.containerservice/managedclusters' | extend compliant = (isnotnull(properties.austoscalerProfile)) | distinct id,compliant",
            "guid": "831c2872-c693-4b39-a887-a561bada49bc",
            "ha": 1,
            "id": "07.06.02",
            "link": "https://learn.microsoft.com/azure/aks/custom-node-configuration",
            "service": "AKS",
            "severity": "低",
            "subcategory": "可擴展性",
            "text": "自定義 AKS 節點池的節點配置",
            "waf": "性能"
        },
        {
            "category": "操作",
            "guid": "faa19bfe-9d55-4d04-a3c4-919ca1b2d121",
            "id": "07.06.03",
            "link": "https://learn.microsoft.com/azure/aks/concepts-scale",
            "scale": 1,
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "可擴展性",
            "text": "需要時使用 Horizontal Pod Autoscaler",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": 1,
            "description": "較大的節點將帶來更高的性能和功能，例如臨時磁碟和加速網路，但它們會增加爆炸半徑並降低擴展粒度",
            "guid": "5ae124ba-34df-4585-bcdc-e9bd3bb0cdb3",
            "id": "07.06.04",
            "link": "https://blog.cloudtrooper.net/2020/10/23/which-vm-size-should-i-choose-as-aks-node/",
            "service": "AKS",
            "severity": "高",
            "subcategory": "可擴展性",
            "text": "考慮適當的節點大小，不要太大或太小",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": 1,
            "guid": "38800e6a-ae01-40a2-9fbc-ae5a06e5462d",
            "id": "07.06.05",
            "link": "https://learn.microsoft.com/azure/aks/quotas-skus-regions#service-quotas-and-limits",
            "service": "AKS",
            "severity": "低",
            "subcategory": "可擴展性",
            "text": "如果可伸縮性需要超過 5000 個節點，請考慮使用其他 AKS 群集",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": 1,
            "guid": "9583c0f6-6083-43f6-aa6b-df7102c901bb",
            "id": "07.06.06",
            "link": "https://learn.microsoft.com/azure/event-grid/event-schema-aks",
            "service": "AKS",
            "severity": "低",
            "subcategory": "可擴展性",
            "text": "考慮訂閱 AKS 自動化的 EventGrid 事件",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": 1,
            "guid": "c5016d8c-c6c9-4165-89ae-673ef0fff19d",
            "id": "07.06.07",
            "link": "https://learn.microsoft.com/azure/aks/manage-abort-operations",
            "service": "AKS",
            "severity": "低",
            "subcategory": "可擴展性",
            "text": "若要在 AKS 群集上長時間運行操作，請考慮事件終止",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": 1,
            "guid": "c4e37133-f186-4ce1-aed9-9f1b32f6e021",
            "id": "07.06.08",
            "link": "https://learn.microsoft.com/azure/aks/use-azure-dedicated-hosts",
            "service": "AKS",
            "severity": "低",
            "subcategory": "可擴展性",
            "text": "如果需要，請考慮將 Azure 專用主機用於 AKS 節點",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": -1,
            "graph": "where type=='microsoft.containerservice/managedclusters' | project id,resourceGroup,name,pools=properties.agentPoolProfiles | mvexpand pools | extend compliant = (pools.osDiskType=='Ephemeral') | project id,name=strcat(name,'-',pools.name), resourceGroup, compliant",
            "guid": "24367b33-6971-45b1-952b-eee0b9b588de",
            "id": "07.07.01",
            "link": "https://learn.microsoft.com/azure/aks/cluster-configuration",
            "scale": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "存儲",
            "text": "使用臨時OS磁碟",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": -1,
            "guid": "f0ce315f-1120-4166-8206-94f2cf3a4d07",
            "id": "07.07.02",
            "link": "https://learn.microsoft.com/azure/virtual-machines/disks-types",
            "scale": 1,
            "service": "AKS",
            "severity": "高",
            "subcategory": "存儲",
            "text": "對於非臨時磁碟，在運行多個 Pod/節點時，請對節點使用高 IOPS 和較大的 OS 磁碟，因為它需要高性能才能運行多個 Pod，並且會生成具有預設 AKS 日誌輪換閾值的大量日誌",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": -1,
            "guid": "39c486ce-d5af-4062-89d5-18bb5fd795db",
            "id": "07.07.03",
            "link": "https://learn.microsoft.com/azure/aks/use-ultra-disks",
            "scale": 1,
            "service": "AKS",
            "severity": "低",
            "subcategory": "存儲",
            "text": "對於超高性能儲存選項，請在 AKS 上使用超級磁碟",
            "waf": "性能"
        },
        {
            "category": "操作",
            "guid": "9f7547c1-747d-4c56-868a-714435bd19dd",
            "ha": 1,
            "id": "07.07.04",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-multi-region",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "存儲",
            "text": "避免將狀態保留在群集中，並將數據存儲在外部（AzStorage、AzSQL、Cosmos 等）",
            "waf": "性能"
        },
        {
            "category": "操作",
            "cost": -1,
            "guid": "24429eb7-2281-4376-85cc-57b4a4b18142",
            "id": "07.07.05",
            "link": "https://learn.microsoft.com/azure/aks/operator-best-practices-storage",
            "scale": 1,
            "service": "AKS",
            "severity": "中等",
            "subcategory": "存儲",
            "text": "如果使用 AzFiles Standard，請考慮 AzFiles Premium 和/或 ANF 以達到性能原因",
            "waf": "性能"
        },
        {
            "category": "操作",
            "guid": "83958a8c-2689-4b32-ab57-cfc64546135a",
            "ha": 1,
            "id": "07.07.06",
            "link": "https://learn.microsoft.com/azure/aks/availability-zones#azure-disk-availability-zone-support",
            "service": "AKS",
            "severity": "中等",
            "simple": -1,
            "subcategory": "存儲",
            "text": "如果使用 Azure 磁碟和 AZ，請考慮在 LRS 磁碟的區域中設置節點池，並使用 VolumeBindingMode：WaitForFirstConsumer 在正確的區域中預配存儲，或者將 ZRS 磁碟用於跨多個區域的節點池",
            "waf": "性能"
        }
    ],
    "metadata": {
        "name": "Azure AKS Review",
        "state": "GA",
        "timestamp": "January 09, 2024",
        "waf": "all"
    },
    "severities": [
        {
            "name": "高"
        },
        {
            "name": "中等"
        },
        {
            "name": "低"
        }
    ],
    "status": [
        {
            "description": "此檢查尚未查看",
            "name": "未驗證"
        },
        {
            "description": "有一個與此檢查關聯的操作項",
            "name": "打開"
        },
        {
            "description": "此檢查已經過驗證，沒有與之關聯的其他操作項",
            "name": "實現"
        },
        {
            "description": "建議已理解，但當前要求不需要",
            "name": "不需要"
        },
        {
            "description": "不適用於當前設計",
            "name": "不適用"
        }
    ],
    "waf": [
        {
            "name": "可靠性"
        },
        {
            "name": "安全"
        },
        {
            "name": "成本"
        },
        {
            "name": "操作"
        },
        {
            "name": "性能"
        }
    ]
}