description: 'Device Provisioning Service (DPS) enables easy redistribution of IoT
  devices for scaling and availability, allowing devices to be reassigned and not
  bound to specific IoT Hub instances. Devices in IoT Hubs using DPS should be verified
  for DPS utilization.

  '
guid: b1e1378d-4572-4414-bebd-b8872a6d4d1c
labels:
  area: Scalability
  source: azure-resources/Devices/iotHubs/recommendations.yaml
  sourceType: aprl
links: []
queries:
- arg: "// Azure Resource Graph Query\n// list all IoT Hubs that do not have a linked\
    \ IoT Hub Device Provisioning Service (DPS)\nresources\n| where type =~ \"microsoft.devices/iothubs\"\
    \n| project id, iotHubName=tostring(properties.hostName), tags, resourceGroup\n\
    | join kind=fullouter (\n    resources\n    | where type == \"microsoft.devices/provisioningservices\"\
    \n    | mv-expand iotHubs=properties.iotHubs\n    | project iotHubName = tostring(iotHubs.name),\
    \ dpsName = name, name=iotHubs.name\n) on iotHubName\n| where dpsName == ''\n\
    | project recommendationId=\"b1e1378d-4572-4414-bebd-b8872a6d4d1c\", name=iotHubName,\
    \ id, tags, param1='DPS:none'\n\n"
resourceTypes:
- Microsoft.Devices/IotHubs
service: IoT Hub
severity: 0
text: Use Device Provisioning Service
