description: 'ExpressRoute gateways are updated for improved functionality, reliability,
  performance, and security. Customer-controlled maintenance configuration and scheduling
  minimize update impact and align with your maintenance windows.

  '
guid: 3e115044-a3aa-433e-be01-ce17d67e50da
labels:
  area: High Availability
  source: azure-resources/Network/virtualNetworkGateways/recommendations.yaml
  sourceType: aprl
links: []
queries:
- arg: "// Azure Resource Graph Query\n// Find all Virtual Network Gateways without\
    \ Maintenance Configurations\n\nresources\n| where type =~ \"Microsoft.Network/virtualNetworkGateways\"\
    \n| extend resourceId = tolower(id)\n| join kind=leftouter  (\n    maintenanceresources\n\
    \    | where type =~ \"Microsoft.Maintenance/configurationAssignments\"\n    |\
    \ project JsonData = parse_json(properties)\n    | extend maintenanceConfigurationId\
    \ = tolower(tostring(JsonData.maintenanceConfigurationId))\n    | join kind=inner\
    \ (\n        resources\n        | where type =~ \"Microsoft.Maintenance/maintenanceConfigurations\"\
    \n        | project maintenanceConfigurationId=tolower(id)\n    ) on maintenanceConfigurationId\n\
    \    | project maintenanceConfigurationId, resourceId=tolower(tostring(JsonData.resourceId))\n\
    ) on resourceId\n| where isempty(maintenanceConfigurationId)\n| project recommendationId\
    \ = \"3e115044-a3aa-433e-be01-ce17d67e50da\", name, id, tags, param1= strcat(\"\
    sku-tier: \" , properties.sku.tier), param2=location\n\n"
resourceTypes:
- Microsoft.Network/virtualNetworkGateways
service: VPN
severity: 0
text: Configure customer-controlled ExpressRoute gateway maintenance
