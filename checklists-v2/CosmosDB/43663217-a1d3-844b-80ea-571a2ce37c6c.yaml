description: 'Enable a secondary region in Cosmos DB for higher SLA without downtime.
  Simple as pinning a location on a map. For Strong consistency, configure at least
  three regions for write availability in case of failure.

  '
guid: 43663217-a1d3-844b-80ea-571a2ce37c6c
labels:
  area: High Availability
  source: azure-resources/DocumentDB/databaseAccounts/recommendations.yaml
  sourceType: aprl
links: []
queries:
- arg: "// Azure Resource Graph Query\n// Query to find Azure Cosmos DB accounts that\
    \ have less than 2 regions or less than 3 regions with strong consistency level\n\
    Resources\n| where type =~ 'Microsoft.DocumentDb/databaseAccounts'\n| where\n\
    \    array_length(properties.locations) < 2 or\n    (array_length(properties.locations)\
    \ < 3 and properties.consistencyPolicy.defaultConsistencyLevel == 'Strong')\n\
    | project recommendationId='43663217-a1d3-844b-80ea-571a2ce37c6c', name, id, tags\n\
    \n"
resourceTypes:
- Microsoft.DocumentDB/databaseAccounts
service: CosmosDB
severity: 0
text: Configure at least two regions for high availability
