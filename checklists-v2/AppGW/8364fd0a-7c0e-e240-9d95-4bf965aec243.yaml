description: 'Application Gateway v2 (Standard_v2 or WAF_v2 SKU) can support up to
  125 instances. A /24 subnet isn''t mandatory for deployment but is advised to provide
  enough space for autoscaling and maintenance upgrades.

  '
guid: 8364fd0a-7c0e-e240-9d95-4bf965aec243
labels:
  area: Other Best Practices
  source: azure-resources/Network/applicationGateways/recommendations.yaml
  sourceType: aprl
links: []
queries:
- arg: "// Azure Resource Graph Query\n// This query will validate the subnet id for\
    \ an appGW ends with a /24\n\nresources\n| where type =~ 'Microsoft.Network/applicationGateways'\n\
    | extend subnetid = tostring(properties.gatewayIPConfigurations[0].properties.subnet.id)\n\
    | join kind=leftouter(resources\n    | where type == \"microsoft.network/virtualnetworks\"\
    \n    | mv-expand properties.subnets\n    | extend subnetid = tostring(properties_subnets.id)\n\
    \    | extend addressprefix = tostring(properties_subnets.properties.addressPrefix)\n\
    \    | project subnetid, addressprefix) on subnetid\n| where addressprefix !endswith\
    \ '/24'\n| project recommendationId = \"8364fd0a-7c0e-e240-9d95-4bf965aec243\"\
    , name, id, tags, param1 = strcat('AppGW subnet prefix: ', addressprefix)\n\n"
resourceTypes:
- Microsoft.Network/applicationGateways
service: AppGW
severity: 0
text: Ensure Application Gateway Subnet is using a /24 subnet mask
